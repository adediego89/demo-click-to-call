import{$ as cs,$a as jt,$b as _f,A as Zt,Aa as xn,Ab as Qn,B as Jt,Ba as Yn,Bb as bs,C as Ur,Ca as Xn,Cb as sf,D as ya,Da as Bd,Db as _s,E as vt,Ea as Vd,Eb as vs,F as Nd,Fa as $d,Fb as Na,G as Md,Ga as Wd,Gb as of,H as An,Ha as Gd,Hb as Ma,I as Qt,Ia as Kd,Ib as af,J as Ta,Ja as Yd,Jb as Pa,K as Pd,Ka as it,Kb as ys,L as Fd,La as zr,Lb as lf,M as Ld,Ma as Se,Mb as cf,N as as,Na as ee,Nb as uf,O as ls,Oa as Zn,Ob as xt,P as dt,Pa as Xd,Pb as Vr,Q as Gn,Qa as hs,Qb as df,R as Ce,Ra as ms,Rb as Ts,S as ye,Sa as Zd,Sb as ff,T as Rn,Ta as ae,Tb as hf,U as wa,Ua as Jd,Ub as de,V as jr,Va as Qd,Vb as mf,W as en,Wa as ef,Wb as Fa,X as Re,Xa as Ut,Xb as pf,Y as ze,Ya as tf,Yb as gf,Z as he,Za as xa,Zb as $r,_ as rt,_a as nf,_b as bf,a as F,aa as us,ab as st,ac as vf,b as qe,ba as Ca,bb as pe,bc as yf,ca as Ud,cb as ps,cc as Tf,d as Z,da as Be,db as ot,dc as ws,e as Nb,ea as jd,eb as nn,ec as wf,f as Cn,fa as G,fb as ge,fc as er,g as xd,ga as me,gb as Ee,gc as Cf,h as pa,ha as Hd,hb as Ke,hc as Ef,i as ga,ia as re,ib as Da,ic as La,j as ba,ja as Hr,jb as Oa,jc as Sf,k as ut,ka as qd,kb as yt,kc as Af,l as De,la as In,lb as gs,m as En,ma as Lt,mb as Jn,n as Je,na as qr,nb as Fe,o as z,oa as H,ob as Rt,p as Sn,pa as j,pb as Ye,q as Dd,qa as ds,qb as ka,r as Od,ra as Ea,rb as Br,s as Y,sa as fs,sb as rn,t as Wn,ta as zd,tb as sn,u as nt,ua as Kn,ub as Ht,v as _a,va as tn,vb as It,w as os,wa as Sa,wb as rf,x as va,xa as Aa,xb as Qe,y as kd,ya as Ra,yb as on,z as At,za as Ia,zb as an}from"./chunk-LRV4OMKE.js";var jl=Z((oS,d0)=>{d0.exports={name:"jssip",title:"JsSIP",description:"the Javascript SIP library",version:"3.10.1",homepage:"https://jssip.net",contributors:["Jos\xE9 Luis Mill\xE1n <jmillan@aliax.net> (https://github.com/jmillan)","I\xF1aki Baz Castillo <ibc@aliax.net> (https://inakibaz.me)"],types:"lib/JsSIP.d.ts",main:"lib-es5/JsSIP.js",keywords:["sip","websocket","webrtc","node","browser","library"],license:"MIT",repository:{type:"git",url:"https://github.com/versatica/JsSIP.git"},bugs:{url:"https://github.com/versatica/JsSIP/issues"},dependencies:{"@types/events":"^3.0.0","@types/debug":"^4.1.7",debug:"^4.3.1",events:"^3.3.0","sdp-transform":"^2.14.1"},devDependencies:{"@babel/core":"^7.19.6","@babel/preset-env":"^7.19.4","ansi-colors":"^3.2.4",browserify:"^16.5.1",eslint:"^5.16.0","fancy-log":"^1.3.3",gulp:"^4.0.2","gulp-babel":"^8.0.0","gulp-eslint":"^5.0.0","gulp-expect-file":"^1.0.2","gulp-header":"^2.0.9","gulp-nodeunit-runner":"^0.2.2","gulp-plumber":"^1.2.1","gulp-rename":"^1.4.0","gulp-uglify-es":"^1.0.4",pegjs:"^0.7.0","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},scripts:{lint:"node npm-scripts.js lint",test:"node npm-scripts.js test",prepublish:"node npm-scripts.js prepublish",release:"node npm-scripts.js release"}}});var Ie=Z((aS,Ph)=>{"use strict";var Mh=jl();Ph.exports={USER_AGENT:"".concat(Mh.title," ").concat(Mh.version),SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2}});var zt=Z((lS,Lh)=>{"use strict";function Ws(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ws=function(o){return typeof o}:Ws=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ws(s)}function Ks(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Ys(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&bi(s,r)}function Xs(s){var r=Fh();return function(){var t=_i(s),i;if(r){var l=_i(this).constructor;i=Reflect.construct(t,arguments,l)}else i=t.apply(this,arguments);return f0(this,i)}}function f0(s,r){return r&&(Ws(r)==="object"||typeof r=="function")?r:h0(s)}function h0(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function dr(s){var r=typeof Map=="function"?new Map:void 0;return dr=function(t){if(t===null||!m0(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(t))return r.get(t);r.set(t,i)}function i(){return Gs(t,arguments,_i(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),bi(i,t)},dr(s)}function Gs(s,r,o){return Fh()?Gs=Reflect.construct:Gs=function(i,l,e){var c=[null];c.push.apply(c,l);var m=Function.bind.apply(i,c),p=new m;return e&&bi(p,e.prototype),p},Gs.apply(null,arguments)}function Fh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function m0(s){return Function.toString.call(s).indexOf("[native code]")!==-1}function bi(s,r){return bi=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},bi(s,r)}function _i(s){return _i=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_i(s)}var p0=function(s){Ys(o,s);var r=Xs(o);function o(t,i){var l;return Ks(this,o),l=r.call(this),l.code=1,l.name="CONFIGURATION_ERROR",l.parameter=t,l.value=i,l.message=l.value?"Invalid value ".concat(JSON.stringify(l.value),' for parameter "').concat(l.parameter,'"'):"Missing parameter: ".concat(l.parameter),l}return o}(dr(Error)),g0=function(s){Ys(o,s);var r=Xs(o);function o(t){var i;return Ks(this,o),i=r.call(this),i.code=2,i.name="INVALID_STATE_ERROR",i.status=t,i.message="Invalid status: ".concat(t),i}return o}(dr(Error)),b0=function(s){Ys(o,s);var r=Xs(o);function o(t){var i;return Ks(this,o),i=r.call(this),i.code=3,i.name="NOT_SUPPORTED_ERROR",i.message=t,i}return o}(dr(Error)),_0=function(s){Ys(o,s);var r=Xs(o);function o(t){var i;return Ks(this,o),i=r.call(this),i.code=4,i.name="NOT_READY_ERROR",i.message=t,i}return o}(dr(Error));Lh.exports={ConfigurationError:p0,InvalidStateError:g0,NotSupportedError:b0,NotReadyError:_0}});var Zs=Z((cS,Hh)=>{"use strict";function v0(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Uh(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function jh(s,r,o){return r&&Uh(s.prototype,r),o&&Uh(s,o),s}var y0=Bt(),T0=Tt();Hh.exports=function(){jh(s,null,[{key:"parse",value:function(o){if(o=T0.parse(o,"Name_Addr_Header"),o!==-1)return o}}]);function s(r,o,t){if(v0(this,s),!r||!(r instanceof y0))throw new TypeError('missing or invalid "uri" parameter');this._uri=r,this._parameters={},this.display_name=o;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.setParam(i,t[i])}return jh(s,[{key:"setParam",value:function(o,t){o&&(this._parameters[o.toLowerCase()]=typeof t>"u"||t===null?null:t.toString())}},{key:"getParam",value:function(o){if(o)return this._parameters[o.toLowerCase()]}},{key:"hasParam",value:function(o){if(o)return this._parameters.hasOwnProperty(o.toLowerCase())&&!0||!1}},{key:"deleteParam",value:function(o){if(o=o.toLowerCase(),this._parameters.hasOwnProperty(o)){var t=this._parameters[o];return delete this._parameters[o],t}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"clone",value:function(){return new s(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}},{key:"_quote",value:function(o){return o.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}},{key:"toString",value:function(){var o=this._display_name?'"'.concat(this._quote(this._display_name),'" '):"";o+="<".concat(this._uri.toString(),">");for(var t in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,t)&&(o+=";".concat(t),this._parameters[t]!==null&&(o+="=".concat(this._parameters[t])));return o}},{key:"uri",get:function(){return this._uri}},{key:"display_name",get:function(){return this._display_name},set:function(o){this._display_name=o===0?"0":o}}]),s}()});var Tt=Z((uS,qh)=>{"use strict";qh.exports=function(){function s(o){return'"'+o.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var r={parse:function(t,i){var l={CRLF:S,DIGIT:v,ALPHA:C,HEXDIG:q,WSP:K,OCTET:_e,DQUOTE:we,SP:A,HTAB:O,alphanum:R,reserved:k,unreserved:ie,mark:Pe,escaped:ce,LWS:ve,SWS:ne,HCOLON:oe,TEXT_UTF8_TRIM:bt,TEXT_UTF8char:Ge,UTF8_NONASCII:_t,UTF8_CONT:Ct,LHEX:zn,token:$,token_nodot:Pt,separators:Bn,word:Et,STAR:_n,SLASH:Vn,EQUAL:P,LPAREN:W,RPAREN:Q,RAQUOT:te,LAQUOT:Ae,COMMA:J,SEMI:B,COLON:vn,LDQUOT:et,RDQUOT:qo,comment:zo,ctext:Bo,quoted_string:zi,quoted_string_clean:Ar,qdtext:Rr,quoted_pair:yn,SIP_URI_noparams:Ir,SIP_URI:Bi,uri_scheme:Vo,uri_scheme_sips:qc,uri_scheme_sip:zc,userinfo:Vi,user:Bc,user_unreserved:$o,password:Vc,hostport:$i,host:xr,hostname:Wo,domainlabel:Go,toplabel:$c,IPv6reference:Ko,IPv6address:Yo,h16:L,ls32:tt,IPv4address:Dr,dec_octet:Or,port:Wc,uri_parameters:Gc,uri_parameter:Xo,transport_param:Kc,user_param:Yc,method_param:Xc,ttl_param:Zc,maddr_param:Jc,lr_param:Qc,other_param:eu,pname:tu,pvalue:nu,paramchar:kr,param_unreserved:ru,headers:iu,header:Wi,hname:su,hvalue:ou,hnv_unreserved:Nr,Request_Response:Yg,Request_Line:au,Request_URI:lu,absoluteURI:Zo,hier_part:cu,net_path:uu,abs_path:Gi,opaque_part:du,uric:Mr,uric_no_slash:fu,path_segments:hu,segment:Ki,param:Jo,pchar:Pr,scheme:mu,authority:pu,srvr:gu,reg_name:bu,query:_u,SIP_Version:Qo,INVITEm:vu,ACKm:yu,OPTIONSm:Tu,BYEm:wu,CANCELm:Cu,REGISTERm:Eu,SUBSCRIBEm:Su,NOTIFYm:Au,REFERm:Ru,Method:Yi,Status_Line:Iu,Status_Code:xu,extension_code:Du,Reason_Phrase:Ou,Allow_Events:Xg,Call_ID:Zg,Contact:Jg,contact_param:Xi,name_addr:Tn,display_name:Zi,contact_params:ea,c_p_q:ku,c_p_expires:Nu,delta_seconds:wn,qvalue:Mu,generic_param:xe,gen_value:Pu,Content_Disposition:Qg,disp_type:Fu,disp_param:ta,handling_param:Lu,Content_Encoding:eb,Content_Length:tb,Content_Type:nb,media_type:Uu,m_type:ju,discrete_type:Hu,composite_type:qu,extension_token:Ji,x_token:zu,m_subtype:Bu,m_parameter:na,m_value:Vu,CSeq:rb,CSeq_value:$u,Expires:ib,Event:sb,event_type:Fr,From:ob,from_param:ra,tag_param:ia,Max_Forwards:ab,Min_Expires:lb,Name_Addr_Header:cb,Proxy_Authenticate:ub,challenge:sa,other_challenge:Wu,auth_param:Lr,digest_cln:Qi,realm:Gu,realm_value:Ku,domain:Yu,URI:es,nonce:Xu,nonce_value:Zu,opaque:Ju,stale:Qu,algorithm:ed,qop_options:td,qop_value:ts,Proxy_Require:db,Record_Route:fb,rec_route:ns,Reason:hb,reason_param:oa,reason_cause:nd,Require:mb,Route:pb,route_param:rs,Subscription_State:gb,substate_value:rd,subexp_params:aa,event_reason_value:id,Subject:bb,Supported:_b,To:vb,to_param:la,Via:yb,via_param:is,via_params:ca,via_ttl:sd,via_maddr:od,via_received:ad,via_branch:ld,response_port:cd,rport:ud,sent_protocol:dd,protocol_name:fd,transport:hd,sent_by:md,via_host:pd,via_port:gd,ttl:ua,WWW_Authenticate:Tb,Session_Expires:wb,s_e_expires:bd,s_e_params:da,s_e_refresher:_d,extension_header:Cb,header_value:vd,message_body:Eb,uuid_URI:Sb,uuid:yd,hex4:Ft,hex8:Td,hex12:wd,Refer_To:Ab,Replaces:Rb,call_id:Cd,replaces_param:fa,to_tag:Ed,from_tag:Sd,early_flag:Ad};if(i!==void 0){if(l[i]===void 0)throw new Error("Invalid rule name: "+s(i)+".")}else i="CRLF";var e=0,c=0,m=0,p=[];function b(n,a,u){for(var d=n,h=u-n.length,g=0;g<h;g++)d=a+d;return d}function y(n){var a=n.charCodeAt(0),u,d;return a<=255?(u="x",d=2):(u="u",d=4),"\\"+u+b(a.toString(16).toUpperCase(),"0",d)}function f(n){e<m||(e>m&&(m=e,p=[]),p.push(n))}function S(){var n;return t.substr(e,2)===`\r
`?(n=`\r
`,e+=2):(n=null,c===0&&f('"\\r\\n"')),n}function v(){var n;return/^[0-9]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[0-9]")),n}function C(){var n;return/^[a-zA-Z]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[a-zA-Z]")),n}function q(){var n;return/^[0-9a-fA-F]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[0-9a-fA-F]")),n}function K(){var n;return n=A(),n===null&&(n=O()),n}function _e(){var n;return/^[\0-\xFF]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[\\0-\\xFF]")),n}function we(){var n;return/^["]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f('["]')),n}function A(){var n;return t.charCodeAt(e)===32?(n=" ",e++):(n=null,c===0&&f('" "')),n}function O(){var n;return t.charCodeAt(e)===9?(n="	",e++):(n=null,c===0&&f('"\\t"')),n}function R(){var n;return/^[a-zA-Z0-9]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[a-zA-Z0-9]")),n}function k(){var n;return t.charCodeAt(e)===59?(n=";",e++):(n=null,c===0&&f('";"')),n===null&&(t.charCodeAt(e)===47?(n="/",e++):(n=null,c===0&&f('"/"')),n===null&&(t.charCodeAt(e)===63?(n="?",e++):(n=null,c===0&&f('"?"')),n===null&&(t.charCodeAt(e)===58?(n=":",e++):(n=null,c===0&&f('":"')),n===null&&(t.charCodeAt(e)===64?(n="@",e++):(n=null,c===0&&f('"@"')),n===null&&(t.charCodeAt(e)===38?(n="&",e++):(n=null,c===0&&f('"&"')),n===null&&(t.charCodeAt(e)===61?(n="=",e++):(n=null,c===0&&f('"="')),n===null&&(t.charCodeAt(e)===43?(n="+",e++):(n=null,c===0&&f('"+"')),n===null&&(t.charCodeAt(e)===36?(n="$",e++):(n=null,c===0&&f('"$"')),n===null&&(t.charCodeAt(e)===44?(n=",",e++):(n=null,c===0&&f('","'))))))))))),n}function ie(){var n;return n=R(),n===null&&(n=Pe()),n}function Pe(){var n;return t.charCodeAt(e)===45?(n="-",e++):(n=null,c===0&&f('"-"')),n===null&&(t.charCodeAt(e)===95?(n="_",e++):(n=null,c===0&&f('"_"')),n===null&&(t.charCodeAt(e)===46?(n=".",e++):(n=null,c===0&&f('"."')),n===null&&(t.charCodeAt(e)===33?(n="!",e++):(n=null,c===0&&f('"!"')),n===null&&(t.charCodeAt(e)===126?(n="~",e++):(n=null,c===0&&f('"~"')),n===null&&(t.charCodeAt(e)===42?(n="*",e++):(n=null,c===0&&f('"*"')),n===null&&(t.charCodeAt(e)===39?(n="'",e++):(n=null,c===0&&f(`"'"`)),n===null&&(t.charCodeAt(e)===40?(n="(",e++):(n=null,c===0&&f('"("')),n===null&&(t.charCodeAt(e)===41?(n=")",e++):(n=null,c===0&&f('")"')))))))))),n}function ce(){var n,a,u,d,h;return d=e,h=e,t.charCodeAt(e)===37?(n="%",e++):(n=null,c===0&&f('"%"')),n!==null?(a=q(),a!==null?(u=q(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){return _.join("")}(d,n)),n===null&&(e=d),n}function ve(){var n,a,u,d,h,g;for(d=e,h=e,g=e,n=[],a=K();a!==null;)n.push(a),a=K();if(n!==null?(a=S(),a!==null?n=[n,a]:(n=null,e=g)):(n=null,e=g),n=n!==null?n:"",n!==null){if(u=K(),u!==null)for(a=[];u!==null;)a.push(u),u=K();else a=null;a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n!==null&&(n=function(_){return" "}(d)),n===null&&(e=d),n}function ne(){var n;return n=ve(),n=n!==null?n:"",n}function oe(){var n,a,u,d,h;for(d=e,h=e,n=[],a=A(),a===null&&(a=O());a!==null;)n.push(a),a=A(),a===null&&(a=O());return n!==null?(t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=ne(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g){return":"}(d)),n===null&&(e=d),n}function bt(){var n,a,u,d,h,g,_;if(h=e,g=e,a=Ge(),a!==null)for(n=[];a!==null;)n.push(a),a=Ge();else n=null;if(n!==null){for(a=[],_=e,u=[],d=ve();d!==null;)u.push(d),d=ve();for(u!==null?(d=Ge(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);u!==null;){for(a.push(u),_=e,u=[],d=ve();d!==null;)u.push(d),d=ve();u!==null?(d=Ge(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_)}a!==null?n=[n,a]:(n=null,e=g)}else n=null,e=g;return n!==null&&(n=function(w){return t.substring(e,w)}(h)),n===null&&(e=h),n}function Ge(){var n;return/^[!-~]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[!-~]")),n===null&&(n=_t()),n}function _t(){var n;return/^[\x80-\uFFFF]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[\\x80-\\uFFFF]")),n}function Ct(){var n;return/^[\x80-\xBF]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[\\x80-\\xBF]")),n}function zn(){var n;return n=v(),n===null&&(/^[a-f]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[a-f]"))),n}function $(){var n,a,u;if(u=e,a=R(),a===null&&(t.charCodeAt(e)===45?(a="-",e++):(a=null,c===0&&f('"-"')),a===null&&(t.charCodeAt(e)===46?(a=".",e++):(a=null,c===0&&f('"."')),a===null&&(t.charCodeAt(e)===33?(a="!",e++):(a=null,c===0&&f('"!"')),a===null&&(t.charCodeAt(e)===37?(a="%",e++):(a=null,c===0&&f('"%"')),a===null&&(t.charCodeAt(e)===42?(a="*",e++):(a=null,c===0&&f('"*"')),a===null&&(t.charCodeAt(e)===95?(a="_",e++):(a=null,c===0&&f('"_"')),a===null&&(t.charCodeAt(e)===43?(a="+",e++):(a=null,c===0&&f('"+"')),a===null&&(t.charCodeAt(e)===96?(a="`",e++):(a=null,c===0&&f('"`"')),a===null&&(t.charCodeAt(e)===39?(a="'",e++):(a=null,c===0&&f(`"'"`)),a===null&&(t.charCodeAt(e)===126?(a="~",e++):(a=null,c===0&&f('"~"')))))))))))),a!==null)for(n=[];a!==null;)n.push(a),a=R(),a===null&&(t.charCodeAt(e)===45?(a="-",e++):(a=null,c===0&&f('"-"')),a===null&&(t.charCodeAt(e)===46?(a=".",e++):(a=null,c===0&&f('"."')),a===null&&(t.charCodeAt(e)===33?(a="!",e++):(a=null,c===0&&f('"!"')),a===null&&(t.charCodeAt(e)===37?(a="%",e++):(a=null,c===0&&f('"%"')),a===null&&(t.charCodeAt(e)===42?(a="*",e++):(a=null,c===0&&f('"*"')),a===null&&(t.charCodeAt(e)===95?(a="_",e++):(a=null,c===0&&f('"_"')),a===null&&(t.charCodeAt(e)===43?(a="+",e++):(a=null,c===0&&f('"+"')),a===null&&(t.charCodeAt(e)===96?(a="`",e++):(a=null,c===0&&f('"`"')),a===null&&(t.charCodeAt(e)===39?(a="'",e++):(a=null,c===0&&f(`"'"`)),a===null&&(t.charCodeAt(e)===126?(a="~",e++):(a=null,c===0&&f('"~"'))))))))))));else n=null;return n!==null&&(n=function(d){return t.substring(e,d)}(u)),n===null&&(e=u),n}function Pt(){var n,a,u;if(u=e,a=R(),a===null&&(t.charCodeAt(e)===45?(a="-",e++):(a=null,c===0&&f('"-"')),a===null&&(t.charCodeAt(e)===33?(a="!",e++):(a=null,c===0&&f('"!"')),a===null&&(t.charCodeAt(e)===37?(a="%",e++):(a=null,c===0&&f('"%"')),a===null&&(t.charCodeAt(e)===42?(a="*",e++):(a=null,c===0&&f('"*"')),a===null&&(t.charCodeAt(e)===95?(a="_",e++):(a=null,c===0&&f('"_"')),a===null&&(t.charCodeAt(e)===43?(a="+",e++):(a=null,c===0&&f('"+"')),a===null&&(t.charCodeAt(e)===96?(a="`",e++):(a=null,c===0&&f('"`"')),a===null&&(t.charCodeAt(e)===39?(a="'",e++):(a=null,c===0&&f(`"'"`)),a===null&&(t.charCodeAt(e)===126?(a="~",e++):(a=null,c===0&&f('"~"'))))))))))),a!==null)for(n=[];a!==null;)n.push(a),a=R(),a===null&&(t.charCodeAt(e)===45?(a="-",e++):(a=null,c===0&&f('"-"')),a===null&&(t.charCodeAt(e)===33?(a="!",e++):(a=null,c===0&&f('"!"')),a===null&&(t.charCodeAt(e)===37?(a="%",e++):(a=null,c===0&&f('"%"')),a===null&&(t.charCodeAt(e)===42?(a="*",e++):(a=null,c===0&&f('"*"')),a===null&&(t.charCodeAt(e)===95?(a="_",e++):(a=null,c===0&&f('"_"')),a===null&&(t.charCodeAt(e)===43?(a="+",e++):(a=null,c===0&&f('"+"')),a===null&&(t.charCodeAt(e)===96?(a="`",e++):(a=null,c===0&&f('"`"')),a===null&&(t.charCodeAt(e)===39?(a="'",e++):(a=null,c===0&&f(`"'"`)),a===null&&(t.charCodeAt(e)===126?(a="~",e++):(a=null,c===0&&f('"~"')))))))))));else n=null;return n!==null&&(n=function(d){return t.substring(e,d)}(u)),n===null&&(e=u),n}function Bn(){var n;return t.charCodeAt(e)===40?(n="(",e++):(n=null,c===0&&f('"("')),n===null&&(t.charCodeAt(e)===41?(n=")",e++):(n=null,c===0&&f('")"')),n===null&&(t.charCodeAt(e)===60?(n="<",e++):(n=null,c===0&&f('"<"')),n===null&&(t.charCodeAt(e)===62?(n=">",e++):(n=null,c===0&&f('">"')),n===null&&(t.charCodeAt(e)===64?(n="@",e++):(n=null,c===0&&f('"@"')),n===null&&(t.charCodeAt(e)===44?(n=",",e++):(n=null,c===0&&f('","')),n===null&&(t.charCodeAt(e)===59?(n=";",e++):(n=null,c===0&&f('";"')),n===null&&(t.charCodeAt(e)===58?(n=":",e++):(n=null,c===0&&f('":"')),n===null&&(t.charCodeAt(e)===92?(n="\\",e++):(n=null,c===0&&f('"\\\\"')),n===null&&(n=we(),n===null&&(t.charCodeAt(e)===47?(n="/",e++):(n=null,c===0&&f('"/"')),n===null&&(t.charCodeAt(e)===91?(n="[",e++):(n=null,c===0&&f('"["')),n===null&&(t.charCodeAt(e)===93?(n="]",e++):(n=null,c===0&&f('"]"')),n===null&&(t.charCodeAt(e)===63?(n="?",e++):(n=null,c===0&&f('"?"')),n===null&&(t.charCodeAt(e)===61?(n="=",e++):(n=null,c===0&&f('"="')),n===null&&(t.charCodeAt(e)===123?(n="{",e++):(n=null,c===0&&f('"{"')),n===null&&(t.charCodeAt(e)===125?(n="}",e++):(n=null,c===0&&f('"}"')),n===null&&(n=A(),n===null&&(n=O())))))))))))))))))),n}function Et(){var n,a,u;if(u=e,a=R(),a===null&&(t.charCodeAt(e)===45?(a="-",e++):(a=null,c===0&&f('"-"')),a===null&&(t.charCodeAt(e)===46?(a=".",e++):(a=null,c===0&&f('"."')),a===null&&(t.charCodeAt(e)===33?(a="!",e++):(a=null,c===0&&f('"!"')),a===null&&(t.charCodeAt(e)===37?(a="%",e++):(a=null,c===0&&f('"%"')),a===null&&(t.charCodeAt(e)===42?(a="*",e++):(a=null,c===0&&f('"*"')),a===null&&(t.charCodeAt(e)===95?(a="_",e++):(a=null,c===0&&f('"_"')),a===null&&(t.charCodeAt(e)===43?(a="+",e++):(a=null,c===0&&f('"+"')),a===null&&(t.charCodeAt(e)===96?(a="`",e++):(a=null,c===0&&f('"`"')),a===null&&(t.charCodeAt(e)===39?(a="'",e++):(a=null,c===0&&f(`"'"`)),a===null&&(t.charCodeAt(e)===126?(a="~",e++):(a=null,c===0&&f('"~"')),a===null&&(t.charCodeAt(e)===40?(a="(",e++):(a=null,c===0&&f('"("')),a===null&&(t.charCodeAt(e)===41?(a=")",e++):(a=null,c===0&&f('")"')),a===null&&(t.charCodeAt(e)===60?(a="<",e++):(a=null,c===0&&f('"<"')),a===null&&(t.charCodeAt(e)===62?(a=">",e++):(a=null,c===0&&f('">"')),a===null&&(t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a===null&&(t.charCodeAt(e)===92?(a="\\",e++):(a=null,c===0&&f('"\\\\"')),a===null&&(a=we(),a===null&&(t.charCodeAt(e)===47?(a="/",e++):(a=null,c===0&&f('"/"')),a===null&&(t.charCodeAt(e)===91?(a="[",e++):(a=null,c===0&&f('"["')),a===null&&(t.charCodeAt(e)===93?(a="]",e++):(a=null,c===0&&f('"]"')),a===null&&(t.charCodeAt(e)===63?(a="?",e++):(a=null,c===0&&f('"?"')),a===null&&(t.charCodeAt(e)===123?(a="{",e++):(a=null,c===0&&f('"{"')),a===null&&(t.charCodeAt(e)===125?(a="}",e++):(a=null,c===0&&f('"}"'))))))))))))))))))))))))),a!==null)for(n=[];a!==null;)n.push(a),a=R(),a===null&&(t.charCodeAt(e)===45?(a="-",e++):(a=null,c===0&&f('"-"')),a===null&&(t.charCodeAt(e)===46?(a=".",e++):(a=null,c===0&&f('"."')),a===null&&(t.charCodeAt(e)===33?(a="!",e++):(a=null,c===0&&f('"!"')),a===null&&(t.charCodeAt(e)===37?(a="%",e++):(a=null,c===0&&f('"%"')),a===null&&(t.charCodeAt(e)===42?(a="*",e++):(a=null,c===0&&f('"*"')),a===null&&(t.charCodeAt(e)===95?(a="_",e++):(a=null,c===0&&f('"_"')),a===null&&(t.charCodeAt(e)===43?(a="+",e++):(a=null,c===0&&f('"+"')),a===null&&(t.charCodeAt(e)===96?(a="`",e++):(a=null,c===0&&f('"`"')),a===null&&(t.charCodeAt(e)===39?(a="'",e++):(a=null,c===0&&f(`"'"`)),a===null&&(t.charCodeAt(e)===126?(a="~",e++):(a=null,c===0&&f('"~"')),a===null&&(t.charCodeAt(e)===40?(a="(",e++):(a=null,c===0&&f('"("')),a===null&&(t.charCodeAt(e)===41?(a=")",e++):(a=null,c===0&&f('")"')),a===null&&(t.charCodeAt(e)===60?(a="<",e++):(a=null,c===0&&f('"<"')),a===null&&(t.charCodeAt(e)===62?(a=">",e++):(a=null,c===0&&f('">"')),a===null&&(t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a===null&&(t.charCodeAt(e)===92?(a="\\",e++):(a=null,c===0&&f('"\\\\"')),a===null&&(a=we(),a===null&&(t.charCodeAt(e)===47?(a="/",e++):(a=null,c===0&&f('"/"')),a===null&&(t.charCodeAt(e)===91?(a="[",e++):(a=null,c===0&&f('"["')),a===null&&(t.charCodeAt(e)===93?(a="]",e++):(a=null,c===0&&f('"]"')),a===null&&(t.charCodeAt(e)===63?(a="?",e++):(a=null,c===0&&f('"?"')),a===null&&(t.charCodeAt(e)===123?(a="{",e++):(a=null,c===0&&f('"{"')),a===null&&(t.charCodeAt(e)===125?(a="}",e++):(a=null,c===0&&f('"}"')))))))))))))))))))))))));else n=null;return n!==null&&(n=function(d){return t.substring(e,d)}(u)),n===null&&(e=u),n}function _n(){var n,a,u,d,h;return d=e,h=e,n=ne(),n!==null?(t.charCodeAt(e)===42?(a="*",e++):(a=null,c===0&&f('"*"')),a!==null?(u=ne(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g){return"*"}(d)),n===null&&(e=d),n}function Vn(){var n,a,u,d,h;return d=e,h=e,n=ne(),n!==null?(t.charCodeAt(e)===47?(a="/",e++):(a=null,c===0&&f('"/"')),a!==null?(u=ne(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g){return"/"}(d)),n===null&&(e=d),n}function P(){var n,a,u,d,h;return d=e,h=e,n=ne(),n!==null?(t.charCodeAt(e)===61?(a="=",e++):(a=null,c===0&&f('"="')),a!==null?(u=ne(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g){return"="}(d)),n===null&&(e=d),n}function W(){var n,a,u,d,h;return d=e,h=e,n=ne(),n!==null?(t.charCodeAt(e)===40?(a="(",e++):(a=null,c===0&&f('"("')),a!==null?(u=ne(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g){return"("}(d)),n===null&&(e=d),n}function Q(){var n,a,u,d,h;return d=e,h=e,n=ne(),n!==null?(t.charCodeAt(e)===41?(a=")",e++):(a=null,c===0&&f('")"')),a!==null?(u=ne(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g){return")"}(d)),n===null&&(e=d),n}function te(){var n,a,u,d;return u=e,d=e,t.charCodeAt(e)===62?(n=">",e++):(n=null,c===0&&f('">"')),n!==null?(a=ne(),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n!==null&&(n=function(h){return">"}(u)),n===null&&(e=u),n}function Ae(){var n,a,u,d;return u=e,d=e,n=ne(),n!==null?(t.charCodeAt(e)===60?(a="<",e++):(a=null,c===0&&f('"<"')),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n!==null&&(n=function(h){return"<"}(u)),n===null&&(e=u),n}function J(){var n,a,u,d,h;return d=e,h=e,n=ne(),n!==null?(t.charCodeAt(e)===44?(a=",",e++):(a=null,c===0&&f('","')),a!==null?(u=ne(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g){return","}(d)),n===null&&(e=d),n}function B(){var n,a,u,d,h;return d=e,h=e,n=ne(),n!==null?(t.charCodeAt(e)===59?(a=";",e++):(a=null,c===0&&f('";"')),a!==null?(u=ne(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g){return";"}(d)),n===null&&(e=d),n}function vn(){var n,a,u,d,h;return d=e,h=e,n=ne(),n!==null?(t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=ne(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g){return":"}(d)),n===null&&(e=d),n}function et(){var n,a,u,d;return u=e,d=e,n=ne(),n!==null?(a=we(),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n!==null&&(n=function(h){return'"'}(u)),n===null&&(e=u),n}function qo(){var n,a,u,d;return u=e,d=e,n=we(),n!==null?(a=ne(),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n!==null&&(n=function(h){return'"'}(u)),n===null&&(e=u),n}function zo(){var n,a,u,d;if(d=e,n=W(),n!==null){for(a=[],u=Bo(),u===null&&(u=yn(),u===null&&(u=zo()));u!==null;)a.push(u),u=Bo(),u===null&&(u=yn(),u===null&&(u=zo()));a!==null?(u=Q(),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)}else n=null,e=d;return n}function Bo(){var n;return/^[!-']/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[!-']")),n===null&&(/^[*-[]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[*-[]")),n===null&&(/^[\]-~]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[\\]-~]")),n===null&&(n=_t(),n===null&&(n=ve())))),n}function zi(){var n,a,u,d,h,g;if(h=e,g=e,n=ne(),n!==null)if(a=we(),a!==null){for(u=[],d=Rr(),d===null&&(d=yn());d!==null;)u.push(d),d=Rr(),d===null&&(d=yn());u!==null?(d=we(),d!==null?n=[n,a,u,d]:(n=null,e=g)):(n=null,e=g)}else n=null,e=g;else n=null,e=g;return n!==null&&(n=function(_){return t.substring(e,_)}(h)),n===null&&(e=h),n}function Ar(){var n,a,u,d,h,g;if(h=e,g=e,n=ne(),n!==null)if(a=we(),a!==null){for(u=[],d=Rr(),d===null&&(d=yn());d!==null;)u.push(d),d=Rr(),d===null&&(d=yn());u!==null?(d=we(),d!==null?n=[n,a,u,d]:(n=null,e=g)):(n=null,e=g)}else n=null,e=g;else n=null,e=g;return n!==null&&(n=function(_){var w=t.substring(e,_).trim();return w.substring(1,w.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1")}(h)),n===null&&(e=h),n}function Rr(){var n;return n=ve(),n===null&&(t.charCodeAt(e)===33?(n="!",e++):(n=null,c===0&&f('"!"')),n===null&&(/^[#-[]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[#-[]")),n===null&&(/^[\]-~]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[\\]-~]")),n===null&&(n=_t())))),n}function yn(){var n,a,u;return u=e,t.charCodeAt(e)===92?(n="\\",e++):(n=null,c===0&&f('"\\\\"')),n!==null?(/^[\0-\t]/.test(t.charAt(e))?(a=t.charAt(e),e++):(a=null,c===0&&f("[\\0-\\t]")),a===null&&(/^[\x0B-\f]/.test(t.charAt(e))?(a=t.charAt(e),e++):(a=null,c===0&&f("[\\x0B-\\f]")),a===null&&(/^[\x0E-]/.test(t.charAt(e))?(a=t.charAt(e),e++):(a=null,c===0&&f("[\\x0E-\x7F]")))),a!==null?n=[n,a]:(n=null,e=u)):(n=null,e=u),n}function Ir(){var n,a,u,d,h,g;return h=e,g=e,n=Vo(),n!==null?(t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=Vi(),u=u!==null?u:"",u!==null?(d=$i(),d!==null?n=[n,a,u,d]:(n=null,e=g)):(n=null,e=g)):(n=null,e=g)):(n=null,e=g),n!==null&&(n=function(_){try{T.uri=new Rd(T.scheme,T.user,T.host,T.port),delete T.scheme,delete T.user,delete T.host,delete T.host_type,delete T.port}catch{T=-1}}(h)),n===null&&(e=h),n}function Bi(){var n,a,u,d,h,g,_,w;return _=e,w=e,n=Vo(),n!==null?(t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=Vi(),u=u!==null?u:"",u!==null?(d=$i(),d!==null?(h=Gc(),h!==null?(g=iu(),g=g!==null?g:"",g!==null?n=[n,a,u,d,h,g]:(n=null,e=w)):(n=null,e=w)):(n=null,e=w)):(n=null,e=w)):(n=null,e=w)):(n=null,e=w),n!==null&&(n=function(x){var V;try{T.uri=new Rd(T.scheme,T.user,T.host,T.port,T.uri_params,T.uri_headers),delete T.scheme,delete T.user,delete T.host,delete T.host_type,delete T.port,delete T.uri_params,i==="SIP_URI"&&(T=T.uri)}catch{T=-1}}(_)),n===null&&(e=_),n}function Vo(){var n;return n=qc(),n===null&&(n=zc()),n}function qc(){var n,a;return a=e,t.substr(e,4).toLowerCase()==="sips"?(n=t.substr(e,4),e+=4):(n=null,c===0&&f('"sips"')),n!==null&&(n=function(u,d){T.scheme=d.toLowerCase()}(a,n)),n===null&&(e=a),n}function zc(){var n,a;return a=e,t.substr(e,3).toLowerCase()==="sip"?(n=t.substr(e,3),e+=3):(n=null,c===0&&f('"sip"')),n!==null&&(n=function(u,d){T.scheme=d.toLowerCase()}(a,n)),n===null&&(e=a),n}function Vi(){var n,a,u,d,h,g;return d=e,h=e,n=Bc(),n!==null?(g=e,t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=Vc(),u!==null?a=[a,u]:(a=null,e=g)):(a=null,e=g),a=a!==null?a:"",a!==null?(t.charCodeAt(e)===64?(u="@",e++):(u=null,c===0&&f('"@"')),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(_){T.user=decodeURIComponent(t.substring(e-1,_))}(d)),n===null&&(e=d),n}function Bc(){var n,a;if(a=ie(),a===null&&(a=ce(),a===null&&(a=$o())),a!==null)for(n=[];a!==null;)n.push(a),a=ie(),a===null&&(a=ce(),a===null&&(a=$o()));else n=null;return n}function $o(){var n;return t.charCodeAt(e)===38?(n="&",e++):(n=null,c===0&&f('"&"')),n===null&&(t.charCodeAt(e)===61?(n="=",e++):(n=null,c===0&&f('"="')),n===null&&(t.charCodeAt(e)===43?(n="+",e++):(n=null,c===0&&f('"+"')),n===null&&(t.charCodeAt(e)===36?(n="$",e++):(n=null,c===0&&f('"$"')),n===null&&(t.charCodeAt(e)===44?(n=",",e++):(n=null,c===0&&f('","')),n===null&&(t.charCodeAt(e)===59?(n=";",e++):(n=null,c===0&&f('";"')),n===null&&(t.charCodeAt(e)===63?(n="?",e++):(n=null,c===0&&f('"?"')),n===null&&(t.charCodeAt(e)===47?(n="/",e++):(n=null,c===0&&f('"/"'))))))))),n}function Vc(){var n,a,u;for(u=e,n=[],a=ie(),a===null&&(a=ce(),a===null&&(t.charCodeAt(e)===38?(a="&",e++):(a=null,c===0&&f('"&"')),a===null&&(t.charCodeAt(e)===61?(a="=",e++):(a=null,c===0&&f('"="')),a===null&&(t.charCodeAt(e)===43?(a="+",e++):(a=null,c===0&&f('"+"')),a===null&&(t.charCodeAt(e)===36?(a="$",e++):(a=null,c===0&&f('"$"')),a===null&&(t.charCodeAt(e)===44?(a=",",e++):(a=null,c===0&&f('","'))))))));a!==null;)n.push(a),a=ie(),a===null&&(a=ce(),a===null&&(t.charCodeAt(e)===38?(a="&",e++):(a=null,c===0&&f('"&"')),a===null&&(t.charCodeAt(e)===61?(a="=",e++):(a=null,c===0&&f('"="')),a===null&&(t.charCodeAt(e)===43?(a="+",e++):(a=null,c===0&&f('"+"')),a===null&&(t.charCodeAt(e)===36?(a="$",e++):(a=null,c===0&&f('"$"')),a===null&&(t.charCodeAt(e)===44?(a=",",e++):(a=null,c===0&&f('","'))))))));return n!==null&&(n=function(d){T.password=t.substring(e,d)}(u)),n===null&&(e=u),n}function $i(){var n,a,u,d,h;return d=e,n=xr(),n!==null?(h=e,t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=Wc(),u!==null?a=[a,u]:(a=null,e=h)):(a=null,e=h),a=a!==null?a:"",a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n}function xr(){var n,a;return a=e,n=Wo(),n===null&&(n=Dr(),n===null&&(n=Ko())),n!==null&&(n=function(u){return T.host=t.substring(e,u).toLowerCase(),T.host}(a)),n===null&&(e=a),n}function Wo(){var n,a,u,d,h,g;for(d=e,h=e,n=[],g=e,a=Go(),a!==null?(t.charCodeAt(e)===46?(u=".",e++):(u=null,c===0&&f('"."')),u!==null?a=[a,u]:(a=null,e=g)):(a=null,e=g);a!==null;)n.push(a),g=e,a=Go(),a!==null?(t.charCodeAt(e)===46?(u=".",e++):(u=null,c===0&&f('"."')),u!==null?a=[a,u]:(a=null,e=g)):(a=null,e=g);return n!==null?(a=$c(),a!==null?(t.charCodeAt(e)===46?(u=".",e++):(u=null,c===0&&f('"."')),u=u!==null?u:"",u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(_){return T.host_type="domain",t.substring(e,_)}(d)),n===null&&(e=d),n}function Go(){var n,a,u,d;if(d=e,n=R(),n!==null){for(a=[],u=R(),u===null&&(t.charCodeAt(e)===45?(u="-",e++):(u=null,c===0&&f('"-"')),u===null&&(t.charCodeAt(e)===95?(u="_",e++):(u=null,c===0&&f('"_"'))));u!==null;)a.push(u),u=R(),u===null&&(t.charCodeAt(e)===45?(u="-",e++):(u=null,c===0&&f('"-"')),u===null&&(t.charCodeAt(e)===95?(u="_",e++):(u=null,c===0&&f('"_"'))));a!==null?n=[n,a]:(n=null,e=d)}else n=null,e=d;return n}function $c(){var n,a,u,d;if(d=e,n=C(),n!==null){for(a=[],u=R(),u===null&&(t.charCodeAt(e)===45?(u="-",e++):(u=null,c===0&&f('"-"')),u===null&&(t.charCodeAt(e)===95?(u="_",e++):(u=null,c===0&&f('"_"'))));u!==null;)a.push(u),u=R(),u===null&&(t.charCodeAt(e)===45?(u="-",e++):(u=null,c===0&&f('"-"')),u===null&&(t.charCodeAt(e)===95?(u="_",e++):(u=null,c===0&&f('"_"'))));a!==null?n=[n,a]:(n=null,e=d)}else n=null,e=d;return n}function Ko(){var n,a,u,d,h;return d=e,h=e,t.charCodeAt(e)===91?(n="[",e++):(n=null,c===0&&f('"["')),n!==null?(a=Yo(),a!==null?(t.charCodeAt(e)===93?(u="]",e++):(u=null,c===0&&f('"]"')),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g){return T.host_type="IPv6",t.substring(e,g)}(d)),n===null&&(e=d),n}function Yo(){var n,a,u,d,h,g,_,w,x,V,ue,St,ss,ma,E,U;return ma=e,E=e,n=L(),n!==null?(t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=L(),u!==null?(t.charCodeAt(e)===58?(d=":",e++):(d=null,c===0&&f('":"')),d!==null?(h=L(),h!==null?(t.charCodeAt(e)===58?(g=":",e++):(g=null,c===0&&f('":"')),g!==null?(_=L(),_!==null?(t.charCodeAt(e)===58?(w=":",e++):(w=null,c===0&&f('":"')),w!==null?(x=L(),x!==null?(t.charCodeAt(e)===58?(V=":",e++):(V=null,c===0&&f('":"')),V!==null?(ue=L(),ue!==null?(t.charCodeAt(e)===58?(St=":",e++):(St=null,c===0&&f('":"')),St!==null?(ss=tt(),ss!==null?n=[n,a,u,d,h,g,_,w,x,V,ue,St,ss]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,t.substr(e,2)==="::"?(n="::",e+=2):(n=null,c===0&&f('"::"')),n!==null?(a=L(),a!==null?(t.charCodeAt(e)===58?(u=":",e++):(u=null,c===0&&f('":"')),u!==null?(d=L(),d!==null?(t.charCodeAt(e)===58?(h=":",e++):(h=null,c===0&&f('":"')),h!==null?(g=L(),g!==null?(t.charCodeAt(e)===58?(_=":",e++):(_=null,c===0&&f('":"')),_!==null?(w=L(),w!==null?(t.charCodeAt(e)===58?(x=":",e++):(x=null,c===0&&f('":"')),x!==null?(V=L(),V!==null?(t.charCodeAt(e)===58?(ue=":",e++):(ue=null,c===0&&f('":"')),ue!==null?(St=tt(),St!==null?n=[n,a,u,d,h,g,_,w,x,V,ue,St]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,t.substr(e,2)==="::"?(n="::",e+=2):(n=null,c===0&&f('"::"')),n!==null?(a=L(),a!==null?(t.charCodeAt(e)===58?(u=":",e++):(u=null,c===0&&f('":"')),u!==null?(d=L(),d!==null?(t.charCodeAt(e)===58?(h=":",e++):(h=null,c===0&&f('":"')),h!==null?(g=L(),g!==null?(t.charCodeAt(e)===58?(_=":",e++):(_=null,c===0&&f('":"')),_!==null?(w=L(),w!==null?(t.charCodeAt(e)===58?(x=":",e++):(x=null,c===0&&f('":"')),x!==null?(V=tt(),V!==null?n=[n,a,u,d,h,g,_,w,x,V]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,t.substr(e,2)==="::"?(n="::",e+=2):(n=null,c===0&&f('"::"')),n!==null?(a=L(),a!==null?(t.charCodeAt(e)===58?(u=":",e++):(u=null,c===0&&f('":"')),u!==null?(d=L(),d!==null?(t.charCodeAt(e)===58?(h=":",e++):(h=null,c===0&&f('":"')),h!==null?(g=L(),g!==null?(t.charCodeAt(e)===58?(_=":",e++):(_=null,c===0&&f('":"')),_!==null?(w=tt(),w!==null?n=[n,a,u,d,h,g,_,w]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,t.substr(e,2)==="::"?(n="::",e+=2):(n=null,c===0&&f('"::"')),n!==null?(a=L(),a!==null?(t.charCodeAt(e)===58?(u=":",e++):(u=null,c===0&&f('":"')),u!==null?(d=L(),d!==null?(t.charCodeAt(e)===58?(h=":",e++):(h=null,c===0&&f('":"')),h!==null?(g=tt(),g!==null?n=[n,a,u,d,h,g]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,t.substr(e,2)==="::"?(n="::",e+=2):(n=null,c===0&&f('"::"')),n!==null?(a=L(),a!==null?(t.charCodeAt(e)===58?(u=":",e++):(u=null,c===0&&f('":"')),u!==null?(d=tt(),d!==null?n=[n,a,u,d]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,t.substr(e,2)==="::"?(n="::",e+=2):(n=null,c===0&&f('"::"')),n!==null?(a=tt(),a!==null?n=[n,a]:(n=null,e=E)):(n=null,e=E),n===null&&(E=e,t.substr(e,2)==="::"?(n="::",e+=2):(n=null,c===0&&f('"::"')),n!==null?(a=L(),a!==null?n=[n,a]:(n=null,e=E)):(n=null,e=E),n===null&&(E=e,n=L(),n!==null?(t.substr(e,2)==="::"?(a="::",e+=2):(a=null,c===0&&f('"::"')),a!==null?(u=L(),u!==null?(t.charCodeAt(e)===58?(d=":",e++):(d=null,c===0&&f('":"')),d!==null?(h=L(),h!==null?(t.charCodeAt(e)===58?(g=":",e++):(g=null,c===0&&f('":"')),g!==null?(_=L(),_!==null?(t.charCodeAt(e)===58?(w=":",e++):(w=null,c===0&&f('":"')),w!==null?(x=L(),x!==null?(t.charCodeAt(e)===58?(V=":",e++):(V=null,c===0&&f('":"')),V!==null?(ue=tt(),ue!==null?n=[n,a,u,d,h,g,_,w,x,V,ue]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,n=L(),n!==null?(U=e,t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=L(),u!==null?a=[a,u]:(a=null,e=U)):(a=null,e=U),a=a!==null?a:"",a!==null?(t.substr(e,2)==="::"?(u="::",e+=2):(u=null,c===0&&f('"::"')),u!==null?(d=L(),d!==null?(t.charCodeAt(e)===58?(h=":",e++):(h=null,c===0&&f('":"')),h!==null?(g=L(),g!==null?(t.charCodeAt(e)===58?(_=":",e++):(_=null,c===0&&f('":"')),_!==null?(w=L(),w!==null?(t.charCodeAt(e)===58?(x=":",e++):(x=null,c===0&&f('":"')),x!==null?(V=tt(),V!==null?n=[n,a,u,d,h,g,_,w,x,V]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,n=L(),n!==null?(U=e,t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=L(),u!==null?a=[a,u]:(a=null,e=U)):(a=null,e=U),a=a!==null?a:"",a!==null?(U=e,t.charCodeAt(e)===58?(u=":",e++):(u=null,c===0&&f('":"')),u!==null?(d=L(),d!==null?u=[u,d]:(u=null,e=U)):(u=null,e=U),u=u!==null?u:"",u!==null?(t.substr(e,2)==="::"?(d="::",e+=2):(d=null,c===0&&f('"::"')),d!==null?(h=L(),h!==null?(t.charCodeAt(e)===58?(g=":",e++):(g=null,c===0&&f('":"')),g!==null?(_=L(),_!==null?(t.charCodeAt(e)===58?(w=":",e++):(w=null,c===0&&f('":"')),w!==null?(x=tt(),x!==null?n=[n,a,u,d,h,g,_,w,x]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,n=L(),n!==null?(U=e,t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=L(),u!==null?a=[a,u]:(a=null,e=U)):(a=null,e=U),a=a!==null?a:"",a!==null?(U=e,t.charCodeAt(e)===58?(u=":",e++):(u=null,c===0&&f('":"')),u!==null?(d=L(),d!==null?u=[u,d]:(u=null,e=U)):(u=null,e=U),u=u!==null?u:"",u!==null?(U=e,t.charCodeAt(e)===58?(d=":",e++):(d=null,c===0&&f('":"')),d!==null?(h=L(),h!==null?d=[d,h]:(d=null,e=U)):(d=null,e=U),d=d!==null?d:"",d!==null?(t.substr(e,2)==="::"?(h="::",e+=2):(h=null,c===0&&f('"::"')),h!==null?(g=L(),g!==null?(t.charCodeAt(e)===58?(_=":",e++):(_=null,c===0&&f('":"')),_!==null?(w=tt(),w!==null?n=[n,a,u,d,h,g,_,w]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,n=L(),n!==null?(U=e,t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=L(),u!==null?a=[a,u]:(a=null,e=U)):(a=null,e=U),a=a!==null?a:"",a!==null?(U=e,t.charCodeAt(e)===58?(u=":",e++):(u=null,c===0&&f('":"')),u!==null?(d=L(),d!==null?u=[u,d]:(u=null,e=U)):(u=null,e=U),u=u!==null?u:"",u!==null?(U=e,t.charCodeAt(e)===58?(d=":",e++):(d=null,c===0&&f('":"')),d!==null?(h=L(),h!==null?d=[d,h]:(d=null,e=U)):(d=null,e=U),d=d!==null?d:"",d!==null?(U=e,t.charCodeAt(e)===58?(h=":",e++):(h=null,c===0&&f('":"')),h!==null?(g=L(),g!==null?h=[h,g]:(h=null,e=U)):(h=null,e=U),h=h!==null?h:"",h!==null?(t.substr(e,2)==="::"?(g="::",e+=2):(g=null,c===0&&f('"::"')),g!==null?(_=tt(),_!==null?n=[n,a,u,d,h,g,_]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,n=L(),n!==null?(U=e,t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=L(),u!==null?a=[a,u]:(a=null,e=U)):(a=null,e=U),a=a!==null?a:"",a!==null?(U=e,t.charCodeAt(e)===58?(u=":",e++):(u=null,c===0&&f('":"')),u!==null?(d=L(),d!==null?u=[u,d]:(u=null,e=U)):(u=null,e=U),u=u!==null?u:"",u!==null?(U=e,t.charCodeAt(e)===58?(d=":",e++):(d=null,c===0&&f('":"')),d!==null?(h=L(),h!==null?d=[d,h]:(d=null,e=U)):(d=null,e=U),d=d!==null?d:"",d!==null?(U=e,t.charCodeAt(e)===58?(h=":",e++):(h=null,c===0&&f('":"')),h!==null?(g=L(),g!==null?h=[h,g]:(h=null,e=U)):(h=null,e=U),h=h!==null?h:"",h!==null?(U=e,t.charCodeAt(e)===58?(g=":",e++):(g=null,c===0&&f('":"')),g!==null?(_=L(),_!==null?g=[g,_]:(g=null,e=U)):(g=null,e=U),g=g!==null?g:"",g!==null?(t.substr(e,2)==="::"?(_="::",e+=2):(_=null,c===0&&f('"::"')),_!==null?(w=L(),w!==null?n=[n,a,u,d,h,g,_,w]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E),n===null&&(E=e,n=L(),n!==null?(U=e,t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=L(),u!==null?a=[a,u]:(a=null,e=U)):(a=null,e=U),a=a!==null?a:"",a!==null?(U=e,t.charCodeAt(e)===58?(u=":",e++):(u=null,c===0&&f('":"')),u!==null?(d=L(),d!==null?u=[u,d]:(u=null,e=U)):(u=null,e=U),u=u!==null?u:"",u!==null?(U=e,t.charCodeAt(e)===58?(d=":",e++):(d=null,c===0&&f('":"')),d!==null?(h=L(),h!==null?d=[d,h]:(d=null,e=U)):(d=null,e=U),d=d!==null?d:"",d!==null?(U=e,t.charCodeAt(e)===58?(h=":",e++):(h=null,c===0&&f('":"')),h!==null?(g=L(),g!==null?h=[h,g]:(h=null,e=U)):(h=null,e=U),h=h!==null?h:"",h!==null?(U=e,t.charCodeAt(e)===58?(g=":",e++):(g=null,c===0&&f('":"')),g!==null?(_=L(),_!==null?g=[g,_]:(g=null,e=U)):(g=null,e=U),g=g!==null?g:"",g!==null?(U=e,t.charCodeAt(e)===58?(_=":",e++):(_=null,c===0&&f('":"')),_!==null?(w=L(),w!==null?_=[_,w]:(_=null,e=U)):(_=null,e=U),_=_!==null?_:"",_!==null?(t.substr(e,2)==="::"?(w="::",e+=2):(w=null,c===0&&f('"::"')),w!==null?n=[n,a,u,d,h,g,_,w]:(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E)):(n=null,e=E))))))))))))))),n!==null&&(n=function(kb){return T.host_type="IPv6",t.substring(e,kb)}(ma)),n===null&&(e=ma),n}function L(){var n,a,u,d,h;return h=e,n=q(),n!==null?(a=q(),a=a!==null?a:"",a!==null?(u=q(),u=u!==null?u:"",u!==null?(d=q(),d=d!==null?d:"",d!==null?n=[n,a,u,d]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n}function tt(){var n,a,u,d;return d=e,n=L(),n!==null?(t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=L(),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n===null&&(n=Dr()),n}function Dr(){var n,a,u,d,h,g,_,w,x;return w=e,x=e,n=Or(),n!==null?(t.charCodeAt(e)===46?(a=".",e++):(a=null,c===0&&f('"."')),a!==null?(u=Or(),u!==null?(t.charCodeAt(e)===46?(d=".",e++):(d=null,c===0&&f('"."')),d!==null?(h=Or(),h!==null?(t.charCodeAt(e)===46?(g=".",e++):(g=null,c===0&&f('"."')),g!==null?(_=Or(),_!==null?n=[n,a,u,d,h,g,_]:(n=null,e=x)):(n=null,e=x)):(n=null,e=x)):(n=null,e=x)):(n=null,e=x)):(n=null,e=x)):(n=null,e=x),n!==null&&(n=function(V){return T.host_type="IPv4",t.substring(e,V)}(w)),n===null&&(e=w),n}function Or(){var n,a,u,d;return d=e,t.substr(e,2)==="25"?(n="25",e+=2):(n=null,c===0&&f('"25"')),n!==null?(/^[0-5]/.test(t.charAt(e))?(a=t.charAt(e),e++):(a=null,c===0&&f("[0-5]")),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n===null&&(d=e,t.charCodeAt(e)===50?(n="2",e++):(n=null,c===0&&f('"2"')),n!==null?(/^[0-4]/.test(t.charAt(e))?(a=t.charAt(e),e++):(a=null,c===0&&f("[0-4]")),a!==null?(u=v(),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n===null&&(d=e,t.charCodeAt(e)===49?(n="1",e++):(n=null,c===0&&f('"1"')),n!==null?(a=v(),a!==null?(u=v(),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n===null&&(d=e,/^[1-9]/.test(t.charAt(e))?(n=t.charAt(e),e++):(n=null,c===0&&f("[1-9]")),n!==null?(a=v(),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n===null&&(n=v())))),n}function Wc(){var n,a,u,d,h,g,_;return g=e,_=e,n=v(),n=n!==null?n:"",n!==null?(a=v(),a=a!==null?a:"",a!==null?(u=v(),u=u!==null?u:"",u!==null?(d=v(),d=d!==null?d:"",d!==null?(h=v(),h=h!==null?h:"",h!==null?n=[n,a,u,d,h]:(n=null,e=_)):(n=null,e=_)):(n=null,e=_)):(n=null,e=_)):(n=null,e=_),n!==null&&(n=function(w,x){return x=parseInt(x.join("")),T.port=x,x}(g,n)),n===null&&(e=g),n}function Gc(){var n,a,u,d;for(n=[],d=e,t.charCodeAt(e)===59?(a=";",e++):(a=null,c===0&&f('";"')),a!==null?(u=Xo(),u!==null?a=[a,u]:(a=null,e=d)):(a=null,e=d);a!==null;)n.push(a),d=e,t.charCodeAt(e)===59?(a=";",e++):(a=null,c===0&&f('";"')),a!==null?(u=Xo(),u!==null?a=[a,u]:(a=null,e=d)):(a=null,e=d);return n}function Xo(){var n;return n=Kc(),n===null&&(n=Yc(),n===null&&(n=Xc(),n===null&&(n=Zc(),n===null&&(n=Jc(),n===null&&(n=Qc(),n===null&&(n=eu())))))),n}function Kc(){var n,a,u,d;return u=e,d=e,t.substr(e,10).toLowerCase()==="transport="?(n=t.substr(e,10),e+=10):(n=null,c===0&&f('"transport="')),n!==null?(t.substr(e,3).toLowerCase()==="udp"?(a=t.substr(e,3),e+=3):(a=null,c===0&&f('"udp"')),a===null&&(t.substr(e,3).toLowerCase()==="tcp"?(a=t.substr(e,3),e+=3):(a=null,c===0&&f('"tcp"')),a===null&&(t.substr(e,4).toLowerCase()==="sctp"?(a=t.substr(e,4),e+=4):(a=null,c===0&&f('"sctp"')),a===null&&(t.substr(e,3).toLowerCase()==="tls"?(a=t.substr(e,3),e+=3):(a=null,c===0&&f('"tls"')),a===null&&(a=$())))),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n!==null&&(n=function(h,g){T.uri_params||(T.uri_params={}),T.uri_params.transport=g.toLowerCase()}(u,n[1])),n===null&&(e=u),n}function Yc(){var n,a,u,d;return u=e,d=e,t.substr(e,5).toLowerCase()==="user="?(n=t.substr(e,5),e+=5):(n=null,c===0&&f('"user="')),n!==null?(t.substr(e,5).toLowerCase()==="phone"?(a=t.substr(e,5),e+=5):(a=null,c===0&&f('"phone"')),a===null&&(t.substr(e,2).toLowerCase()==="ip"?(a=t.substr(e,2),e+=2):(a=null,c===0&&f('"ip"')),a===null&&(a=$())),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n!==null&&(n=function(h,g){T.uri_params||(T.uri_params={}),T.uri_params.user=g.toLowerCase()}(u,n[1])),n===null&&(e=u),n}function Xc(){var n,a,u,d;return u=e,d=e,t.substr(e,7).toLowerCase()==="method="?(n=t.substr(e,7),e+=7):(n=null,c===0&&f('"method="')),n!==null?(a=Yi(),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n!==null&&(n=function(h,g){T.uri_params||(T.uri_params={}),T.uri_params.method=g}(u,n[1])),n===null&&(e=u),n}function Zc(){var n,a,u,d;return u=e,d=e,t.substr(e,4).toLowerCase()==="ttl="?(n=t.substr(e,4),e+=4):(n=null,c===0&&f('"ttl="')),n!==null?(a=ua(),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n!==null&&(n=function(h,g){T.params||(T.params={}),T.params.ttl=g}(u,n[1])),n===null&&(e=u),n}function Jc(){var n,a,u,d;return u=e,d=e,t.substr(e,6).toLowerCase()==="maddr="?(n=t.substr(e,6),e+=6):(n=null,c===0&&f('"maddr="')),n!==null?(a=xr(),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n!==null&&(n=function(h,g){T.uri_params||(T.uri_params={}),T.uri_params.maddr=g}(u,n[1])),n===null&&(e=u),n}function Qc(){var n,a,u,d,h,g;return d=e,h=e,t.substr(e,2).toLowerCase()==="lr"?(n=t.substr(e,2),e+=2):(n=null,c===0&&f('"lr"')),n!==null?(g=e,t.charCodeAt(e)===61?(a="=",e++):(a=null,c===0&&f('"="')),a!==null?(u=$(),u!==null?a=[a,u]:(a=null,e=g)):(a=null,e=g),a=a!==null?a:"",a!==null?n=[n,a]:(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(_){T.uri_params||(T.uri_params={}),T.uri_params.lr=void 0}(d)),n===null&&(e=d),n}function eu(){var n,a,u,d,h,g;return d=e,h=e,n=tu(),n!==null?(g=e,t.charCodeAt(e)===61?(a="=",e++):(a=null,c===0&&f('"="')),a!==null?(u=nu(),u!==null?a=[a,u]:(a=null,e=g)):(a=null,e=g),a=a!==null?a:"",a!==null?n=[n,a]:(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(_,w,x){T.uri_params||(T.uri_params={}),typeof x>"u"?x=void 0:x=x[1],T.uri_params[w.toLowerCase()]=x}(d,n[0],n[1])),n===null&&(e=d),n}function tu(){var n,a,u;if(u=e,a=kr(),a!==null)for(n=[];a!==null;)n.push(a),a=kr();else n=null;return n!==null&&(n=function(d,h){return h.join("")}(u,n)),n===null&&(e=u),n}function nu(){var n,a,u;if(u=e,a=kr(),a!==null)for(n=[];a!==null;)n.push(a),a=kr();else n=null;return n!==null&&(n=function(d,h){return h.join("")}(u,n)),n===null&&(e=u),n}function kr(){var n;return n=ru(),n===null&&(n=ie(),n===null&&(n=ce())),n}function ru(){var n;return t.charCodeAt(e)===91?(n="[",e++):(n=null,c===0&&f('"["')),n===null&&(t.charCodeAt(e)===93?(n="]",e++):(n=null,c===0&&f('"]"')),n===null&&(t.charCodeAt(e)===47?(n="/",e++):(n=null,c===0&&f('"/"')),n===null&&(t.charCodeAt(e)===58?(n=":",e++):(n=null,c===0&&f('":"')),n===null&&(t.charCodeAt(e)===38?(n="&",e++):(n=null,c===0&&f('"&"')),n===null&&(t.charCodeAt(e)===43?(n="+",e++):(n=null,c===0&&f('"+"')),n===null&&(t.charCodeAt(e)===36?(n="$",e++):(n=null,c===0&&f('"$"')))))))),n}function iu(){var n,a,u,d,h,g,_;if(g=e,t.charCodeAt(e)===63?(n="?",e++):(n=null,c===0&&f('"?"')),n!==null)if(a=Wi(),a!==null){for(u=[],_=e,t.charCodeAt(e)===38?(d="&",e++):(d=null,c===0&&f('"&"')),d!==null?(h=Wi(),h!==null?d=[d,h]:(d=null,e=_)):(d=null,e=_);d!==null;)u.push(d),_=e,t.charCodeAt(e)===38?(d="&",e++):(d=null,c===0&&f('"&"')),d!==null?(h=Wi(),h!==null?d=[d,h]:(d=null,e=_)):(d=null,e=_);u!==null?n=[n,a,u]:(n=null,e=g)}else n=null,e=g;else n=null,e=g;return n}function Wi(){var n,a,u,d,h;return d=e,h=e,n=su(),n!==null?(t.charCodeAt(e)===61?(a="=",e++):(a=null,c===0&&f('"="')),a!==null?(u=ou(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_,w){_=_.join("").toLowerCase(),w=w.join(""),T.uri_headers||(T.uri_headers={}),T.uri_headers[_]?T.uri_headers[_].push(w):T.uri_headers[_]=[w]}(d,n[0],n[2])),n===null&&(e=d),n}function su(){var n,a;if(a=Nr(),a===null&&(a=ie(),a===null&&(a=ce())),a!==null)for(n=[];a!==null;)n.push(a),a=Nr(),a===null&&(a=ie(),a===null&&(a=ce()));else n=null;return n}function ou(){var n,a;for(n=[],a=Nr(),a===null&&(a=ie(),a===null&&(a=ce()));a!==null;)n.push(a),a=Nr(),a===null&&(a=ie(),a===null&&(a=ce()));return n}function Nr(){var n;return t.charCodeAt(e)===91?(n="[",e++):(n=null,c===0&&f('"["')),n===null&&(t.charCodeAt(e)===93?(n="]",e++):(n=null,c===0&&f('"]"')),n===null&&(t.charCodeAt(e)===47?(n="/",e++):(n=null,c===0&&f('"/"')),n===null&&(t.charCodeAt(e)===63?(n="?",e++):(n=null,c===0&&f('"?"')),n===null&&(t.charCodeAt(e)===58?(n=":",e++):(n=null,c===0&&f('":"')),n===null&&(t.charCodeAt(e)===43?(n="+",e++):(n=null,c===0&&f('"+"')),n===null&&(t.charCodeAt(e)===36?(n="$",e++):(n=null,c===0&&f('"$"')))))))),n}function Yg(){var n;return n=Iu(),n===null&&(n=au()),n}function au(){var n,a,u,d,h,g;return g=e,n=Yi(),n!==null?(a=A(),a!==null?(u=lu(),u!==null?(d=A(),d!==null?(h=Qo(),h!==null?n=[n,a,u,d,h]:(n=null,e=g)):(n=null,e=g)):(n=null,e=g)):(n=null,e=g)):(n=null,e=g),n}function lu(){var n;return n=Bi(),n===null&&(n=Zo()),n}function Zo(){var n,a,u,d;return d=e,n=mu(),n!==null?(t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a!==null?(u=cu(),u===null&&(u=du()),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function cu(){var n,a,u,d,h;return d=e,n=uu(),n===null&&(n=Gi()),n!==null?(h=e,t.charCodeAt(e)===63?(a="?",e++):(a=null,c===0&&f('"?"')),a!==null?(u=_u(),u!==null?a=[a,u]:(a=null,e=h)):(a=null,e=h),a=a!==null?a:"",a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n}function uu(){var n,a,u,d;return d=e,t.substr(e,2)==="//"?(n="//",e+=2):(n=null,c===0&&f('"//"')),n!==null?(a=pu(),a!==null?(u=Gi(),u=u!==null?u:"",u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function Gi(){var n,a,u;return u=e,t.charCodeAt(e)===47?(n="/",e++):(n=null,c===0&&f('"/"')),n!==null?(a=hu(),a!==null?n=[n,a]:(n=null,e=u)):(n=null,e=u),n}function du(){var n,a,u,d;if(d=e,n=fu(),n!==null){for(a=[],u=Mr();u!==null;)a.push(u),u=Mr();a!==null?n=[n,a]:(n=null,e=d)}else n=null,e=d;return n}function Mr(){var n;return n=k(),n===null&&(n=ie(),n===null&&(n=ce())),n}function fu(){var n;return n=ie(),n===null&&(n=ce(),n===null&&(t.charCodeAt(e)===59?(n=";",e++):(n=null,c===0&&f('";"')),n===null&&(t.charCodeAt(e)===63?(n="?",e++):(n=null,c===0&&f('"?"')),n===null&&(t.charCodeAt(e)===58?(n=":",e++):(n=null,c===0&&f('":"')),n===null&&(t.charCodeAt(e)===64?(n="@",e++):(n=null,c===0&&f('"@"')),n===null&&(t.charCodeAt(e)===38?(n="&",e++):(n=null,c===0&&f('"&"')),n===null&&(t.charCodeAt(e)===61?(n="=",e++):(n=null,c===0&&f('"="')),n===null&&(t.charCodeAt(e)===43?(n="+",e++):(n=null,c===0&&f('"+"')),n===null&&(t.charCodeAt(e)===36?(n="$",e++):(n=null,c===0&&f('"$"')),n===null&&(t.charCodeAt(e)===44?(n=",",e++):(n=null,c===0&&f('","')))))))))))),n}function hu(){var n,a,u,d,h,g;if(h=e,n=Ki(),n!==null){for(a=[],g=e,t.charCodeAt(e)===47?(u="/",e++):(u=null,c===0&&f('"/"')),u!==null?(d=Ki(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,t.charCodeAt(e)===47?(u="/",e++):(u=null,c===0&&f('"/"')),u!==null?(d=Ki(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function Ki(){var n,a,u,d,h,g;for(h=e,n=[],a=Pr();a!==null;)n.push(a),a=Pr();if(n!==null){for(a=[],g=e,t.charCodeAt(e)===59?(u=";",e++):(u=null,c===0&&f('";"')),u!==null?(d=Jo(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,t.charCodeAt(e)===59?(u=";",e++):(u=null,c===0&&f('";"')),u!==null?(d=Jo(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function Jo(){var n,a;for(n=[],a=Pr();a!==null;)n.push(a),a=Pr();return n}function Pr(){var n;return n=ie(),n===null&&(n=ce(),n===null&&(t.charCodeAt(e)===58?(n=":",e++):(n=null,c===0&&f('":"')),n===null&&(t.charCodeAt(e)===64?(n="@",e++):(n=null,c===0&&f('"@"')),n===null&&(t.charCodeAt(e)===38?(n="&",e++):(n=null,c===0&&f('"&"')),n===null&&(t.charCodeAt(e)===61?(n="=",e++):(n=null,c===0&&f('"="')),n===null&&(t.charCodeAt(e)===43?(n="+",e++):(n=null,c===0&&f('"+"')),n===null&&(t.charCodeAt(e)===36?(n="$",e++):(n=null,c===0&&f('"$"')),n===null&&(t.charCodeAt(e)===44?(n=",",e++):(n=null,c===0&&f('","')))))))))),n}function mu(){var n,a,u,d,h;if(d=e,h=e,n=C(),n!==null){for(a=[],u=C(),u===null&&(u=v(),u===null&&(t.charCodeAt(e)===43?(u="+",e++):(u=null,c===0&&f('"+"')),u===null&&(t.charCodeAt(e)===45?(u="-",e++):(u=null,c===0&&f('"-"')),u===null&&(t.charCodeAt(e)===46?(u=".",e++):(u=null,c===0&&f('"."'))))));u!==null;)a.push(u),u=C(),u===null&&(u=v(),u===null&&(t.charCodeAt(e)===43?(u="+",e++):(u=null,c===0&&f('"+"')),u===null&&(t.charCodeAt(e)===45?(u="-",e++):(u=null,c===0&&f('"-"')),u===null&&(t.charCodeAt(e)===46?(u=".",e++):(u=null,c===0&&f('"."'))))));a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n!==null&&(n=function(g){T.scheme=t.substring(e,g)}(d)),n===null&&(e=d),n}function pu(){var n;return n=gu(),n===null&&(n=bu()),n}function gu(){var n,a,u,d;return u=e,d=e,n=Vi(),n!==null?(t.charCodeAt(e)===64?(a="@",e++):(a=null,c===0&&f('"@"')),a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n=n!==null?n:"",n!==null?(a=$i(),a!==null?n=[n,a]:(n=null,e=u)):(n=null,e=u),n=n!==null?n:"",n}function bu(){var n,a;if(a=ie(),a===null&&(a=ce(),a===null&&(t.charCodeAt(e)===36?(a="$",e++):(a=null,c===0&&f('"$"')),a===null&&(t.charCodeAt(e)===44?(a=",",e++):(a=null,c===0&&f('","')),a===null&&(t.charCodeAt(e)===59?(a=";",e++):(a=null,c===0&&f('";"')),a===null&&(t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a===null&&(t.charCodeAt(e)===64?(a="@",e++):(a=null,c===0&&f('"@"')),a===null&&(t.charCodeAt(e)===38?(a="&",e++):(a=null,c===0&&f('"&"')),a===null&&(t.charCodeAt(e)===61?(a="=",e++):(a=null,c===0&&f('"="')),a===null&&(t.charCodeAt(e)===43?(a="+",e++):(a=null,c===0&&f('"+"'))))))))))),a!==null)for(n=[];a!==null;)n.push(a),a=ie(),a===null&&(a=ce(),a===null&&(t.charCodeAt(e)===36?(a="$",e++):(a=null,c===0&&f('"$"')),a===null&&(t.charCodeAt(e)===44?(a=",",e++):(a=null,c===0&&f('","')),a===null&&(t.charCodeAt(e)===59?(a=";",e++):(a=null,c===0&&f('";"')),a===null&&(t.charCodeAt(e)===58?(a=":",e++):(a=null,c===0&&f('":"')),a===null&&(t.charCodeAt(e)===64?(a="@",e++):(a=null,c===0&&f('"@"')),a===null&&(t.charCodeAt(e)===38?(a="&",e++):(a=null,c===0&&f('"&"')),a===null&&(t.charCodeAt(e)===61?(a="=",e++):(a=null,c===0&&f('"="')),a===null&&(t.charCodeAt(e)===43?(a="+",e++):(a=null,c===0&&f('"+"')))))))))));else n=null;return n}function _u(){var n,a;for(n=[],a=Mr();a!==null;)n.push(a),a=Mr();return n}function Qo(){var n,a,u,d,h,g,_,w;if(_=e,w=e,t.substr(e,3).toLowerCase()==="sip"?(n=t.substr(e,3),e+=3):(n=null,c===0&&f('"SIP"')),n!==null)if(t.charCodeAt(e)===47?(a="/",e++):(a=null,c===0&&f('"/"')),a!==null){if(d=v(),d!==null)for(u=[];d!==null;)u.push(d),d=v();else u=null;if(u!==null)if(t.charCodeAt(e)===46?(d=".",e++):(d=null,c===0&&f('"."')),d!==null){if(g=v(),g!==null)for(h=[];g!==null;)h.push(g),g=v();else h=null;h!==null?n=[n,a,u,d,h]:(n=null,e=w)}else n=null,e=w;else n=null,e=w}else n=null,e=w;else n=null,e=w;return n!==null&&(n=function(x){T.sip_version=t.substring(e,x)}(_)),n===null&&(e=_),n}function vu(){var n;return t.substr(e,6)==="INVITE"?(n="INVITE",e+=6):(n=null,c===0&&f('"INVITE"')),n}function yu(){var n;return t.substr(e,3)==="ACK"?(n="ACK",e+=3):(n=null,c===0&&f('"ACK"')),n}function Tu(){var n;return t.substr(e,7)==="OPTIONS"?(n="OPTIONS",e+=7):(n=null,c===0&&f('"OPTIONS"')),n}function wu(){var n;return t.substr(e,3)==="BYE"?(n="BYE",e+=3):(n=null,c===0&&f('"BYE"')),n}function Cu(){var n;return t.substr(e,6)==="CANCEL"?(n="CANCEL",e+=6):(n=null,c===0&&f('"CANCEL"')),n}function Eu(){var n;return t.substr(e,8)==="REGISTER"?(n="REGISTER",e+=8):(n=null,c===0&&f('"REGISTER"')),n}function Su(){var n;return t.substr(e,9)==="SUBSCRIBE"?(n="SUBSCRIBE",e+=9):(n=null,c===0&&f('"SUBSCRIBE"')),n}function Au(){var n;return t.substr(e,6)==="NOTIFY"?(n="NOTIFY",e+=6):(n=null,c===0&&f('"NOTIFY"')),n}function Ru(){var n;return t.substr(e,5)==="REFER"?(n="REFER",e+=5):(n=null,c===0&&f('"REFER"')),n}function Yi(){var n,a;return a=e,n=vu(),n===null&&(n=yu(),n===null&&(n=Tu(),n===null&&(n=wu(),n===null&&(n=Cu(),n===null&&(n=Eu(),n===null&&(n=Su(),n===null&&(n=Au(),n===null&&(n=Ru(),n===null&&(n=$()))))))))),n!==null&&(n=function(u){return T.method=t.substring(e,u),T.method}(a)),n===null&&(e=a),n}function Iu(){var n,a,u,d,h,g;return g=e,n=Qo(),n!==null?(a=A(),a!==null?(u=xu(),u!==null?(d=A(),d!==null?(h=Ou(),h!==null?n=[n,a,u,d,h]:(n=null,e=g)):(n=null,e=g)):(n=null,e=g)):(n=null,e=g)):(n=null,e=g),n}function xu(){var n,a;return a=e,n=Du(),n!==null&&(n=function(u,d){T.status_code=parseInt(d.join(""))}(a,n)),n===null&&(e=a),n}function Du(){var n,a,u,d;return d=e,n=v(),n!==null?(a=v(),a!==null?(u=v(),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function Ou(){var n,a,u;for(u=e,n=[],a=k(),a===null&&(a=ie(),a===null&&(a=ce(),a===null&&(a=_t(),a===null&&(a=Ct(),a===null&&(a=A(),a===null&&(a=O()))))));a!==null;)n.push(a),a=k(),a===null&&(a=ie(),a===null&&(a=ce(),a===null&&(a=_t(),a===null&&(a=Ct(),a===null&&(a=A(),a===null&&(a=O()))))));return n!==null&&(n=function(d){T.reason_phrase=t.substring(e,d)}(u)),n===null&&(e=u),n}function Xg(){var n,a,u,d,h,g;if(h=e,n=Fr(),n!==null){for(a=[],g=e,u=J(),u!==null?(d=Fr(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=J(),u!==null?(d=Fr(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function Zg(){var n,a,u,d,h,g;return d=e,h=e,n=Et(),n!==null?(g=e,t.charCodeAt(e)===64?(a="@",e++):(a=null,c===0&&f('"@"')),a!==null?(u=Et(),u!==null?a=[a,u]:(a=null,e=g)):(a=null,e=g),a=a!==null?a:"",a!==null?n=[n,a]:(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(_){T=t.substring(e,_)}(d)),n===null&&(e=d),n}function Jg(){var n,a,u,d,h,g,_;if(h=e,n=_n(),n===null)if(g=e,n=Xi(),n!==null){for(a=[],_=e,u=J(),u!==null?(d=Xi(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);u!==null;)a.push(u),_=e,u=J(),u!==null?(d=Xi(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);a!==null?n=[n,a]:(n=null,e=g)}else n=null,e=g;return n!==null&&(n=function(w){var x,V;for(V=T.multi_header.length,x=0;x<V;x++)if(T.multi_header[x].parsed===null){T=null;break}T!==null?T=T.multi_header:T=-1}(h)),n===null&&(e=h),n}function Xi(){var n,a,u,d,h,g,_;if(h=e,g=e,n=Ir(),n===null&&(n=Tn()),n!==null){for(a=[],_=e,u=B(),u!==null?(d=ea(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);u!==null;)a.push(u),_=e,u=B(),u!==null?(d=ea(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);a!==null?n=[n,a]:(n=null,e=g)}else n=null,e=g;return n!==null&&(n=function(w){var x;T.multi_header||(T.multi_header=[]);try{x=new $n(T.uri,T.display_name,T.params),delete T.uri,delete T.display_name,delete T.params}catch{x=null}T.multi_header.push({possition:e,offset:w,parsed:x})}(h)),n===null&&(e=h),n}function Tn(){var n,a,u,d,h;return h=e,n=Zi(),n=n!==null?n:"",n!==null?(a=Ae(),a!==null?(u=Bi(),u!==null?(d=te(),d!==null?n=[n,a,u,d]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n}function Zi(){var n,a,u,d,h,g,_;if(h=e,g=e,n=$(),n!==null){for(a=[],_=e,u=ve(),u!==null?(d=$(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);u!==null;)a.push(u),_=e,u=ve(),u!==null?(d=$(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);a!==null?n=[n,a]:(n=null,e=g)}else n=null,e=g;return n===null&&(n=Ar()),n!==null&&(n=function(w,x){typeof x=="string"?T.display_name=x:T.display_name=x[1].reduce(function(V,ue){return V+ue[0]+ue[1]},x[0])}(h,n)),n===null&&(e=h),n}function ea(){var n;return n=ku(),n===null&&(n=Nu(),n===null&&(n=xe())),n}function ku(){var n,a,u,d,h;return d=e,h=e,t.substr(e,1).toLowerCase()==="q"?(n=t.substr(e,1),e++):(n=null,c===0&&f('"q"')),n!==null?(a=P(),a!==null?(u=Mu(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.params||(T.params={}),T.params.q=_}(d,n[2])),n===null&&(e=d),n}function Nu(){var n,a,u,d,h;return d=e,h=e,t.substr(e,7).toLowerCase()==="expires"?(n=t.substr(e,7),e+=7):(n=null,c===0&&f('"expires"')),n!==null?(a=P(),a!==null?(u=wn(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.params||(T.params={}),T.params.expires=_}(d,n[2])),n===null&&(e=d),n}function wn(){var n,a,u;if(u=e,a=v(),a!==null)for(n=[];a!==null;)n.push(a),a=v();else n=null;return n!==null&&(n=function(d,h){return parseInt(h.join(""))}(u,n)),n===null&&(e=u),n}function Mu(){var n,a,u,d,h,g,_,w;return g=e,_=e,t.charCodeAt(e)===48?(n="0",e++):(n=null,c===0&&f('"0"')),n!==null?(w=e,t.charCodeAt(e)===46?(a=".",e++):(a=null,c===0&&f('"."')),a!==null?(u=v(),u=u!==null?u:"",u!==null?(d=v(),d=d!==null?d:"",d!==null?(h=v(),h=h!==null?h:"",h!==null?a=[a,u,d,h]:(a=null,e=w)):(a=null,e=w)):(a=null,e=w)):(a=null,e=w),a=a!==null?a:"",a!==null?n=[n,a]:(n=null,e=_)):(n=null,e=_),n!==null&&(n=function(x){return parseFloat(t.substring(e,x))}(g)),n===null&&(e=g),n}function xe(){var n,a,u,d,h,g;return d=e,h=e,n=$(),n!==null?(g=e,a=P(),a!==null?(u=Pu(),u!==null?a=[a,u]:(a=null,e=g)):(a=null,e=g),a=a!==null?a:"",a!==null?n=[n,a]:(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(_,w,x){T.params||(T.params={}),typeof x>"u"?x=void 0:x=x[1],T.params[w.toLowerCase()]=x}(d,n[0],n[1])),n===null&&(e=d),n}function Pu(){var n;return n=$(),n===null&&(n=xr(),n===null&&(n=zi())),n}function Qg(){var n,a,u,d,h,g;if(h=e,n=Fu(),n!==null){for(a=[],g=e,u=B(),u!==null?(d=ta(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=B(),u!==null?(d=ta(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function Fu(){var n;return t.substr(e,6).toLowerCase()==="render"?(n=t.substr(e,6),e+=6):(n=null,c===0&&f('"render"')),n===null&&(t.substr(e,7).toLowerCase()==="session"?(n=t.substr(e,7),e+=7):(n=null,c===0&&f('"session"')),n===null&&(t.substr(e,4).toLowerCase()==="icon"?(n=t.substr(e,4),e+=4):(n=null,c===0&&f('"icon"')),n===null&&(t.substr(e,5).toLowerCase()==="alert"?(n=t.substr(e,5),e+=5):(n=null,c===0&&f('"alert"')),n===null&&(n=$())))),n}function ta(){var n;return n=Lu(),n===null&&(n=xe()),n}function Lu(){var n,a,u,d;return d=e,t.substr(e,8).toLowerCase()==="handling"?(n=t.substr(e,8),e+=8):(n=null,c===0&&f('"handling"')),n!==null?(a=P(),a!==null?(t.substr(e,8).toLowerCase()==="optional"?(u=t.substr(e,8),e+=8):(u=null,c===0&&f('"optional"')),u===null&&(t.substr(e,8).toLowerCase()==="required"?(u=t.substr(e,8),e+=8):(u=null,c===0&&f('"required"')),u===null&&(u=$())),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function eb(){var n,a,u,d,h,g;if(h=e,n=$(),n!==null){for(a=[],g=e,u=J(),u!==null?(d=$(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=J(),u!==null?(d=$(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function tb(){var n,a,u;if(u=e,a=v(),a!==null)for(n=[];a!==null;)n.push(a),a=v();else n=null;return n!==null&&(n=function(d,h){T=parseInt(h.join(""))}(u,n)),n===null&&(e=u),n}function nb(){var n,a;return a=e,n=Uu(),n!==null&&(n=function(u){T=t.substring(e,u)}(a)),n===null&&(e=a),n}function Uu(){var n,a,u,d,h,g,_,w;if(_=e,n=ju(),n!==null)if(a=Vn(),a!==null)if(u=Bu(),u!==null){for(d=[],w=e,h=B(),h!==null?(g=na(),g!==null?h=[h,g]:(h=null,e=w)):(h=null,e=w);h!==null;)d.push(h),w=e,h=B(),h!==null?(g=na(),g!==null?h=[h,g]:(h=null,e=w)):(h=null,e=w);d!==null?n=[n,a,u,d]:(n=null,e=_)}else n=null,e=_;else n=null,e=_;else n=null,e=_;return n}function ju(){var n;return n=Hu(),n===null&&(n=qu()),n}function Hu(){var n;return t.substr(e,4).toLowerCase()==="text"?(n=t.substr(e,4),e+=4):(n=null,c===0&&f('"text"')),n===null&&(t.substr(e,5).toLowerCase()==="image"?(n=t.substr(e,5),e+=5):(n=null,c===0&&f('"image"')),n===null&&(t.substr(e,5).toLowerCase()==="audio"?(n=t.substr(e,5),e+=5):(n=null,c===0&&f('"audio"')),n===null&&(t.substr(e,5).toLowerCase()==="video"?(n=t.substr(e,5),e+=5):(n=null,c===0&&f('"video"')),n===null&&(t.substr(e,11).toLowerCase()==="application"?(n=t.substr(e,11),e+=11):(n=null,c===0&&f('"application"')),n===null&&(n=Ji()))))),n}function qu(){var n;return t.substr(e,7).toLowerCase()==="message"?(n=t.substr(e,7),e+=7):(n=null,c===0&&f('"message"')),n===null&&(t.substr(e,9).toLowerCase()==="multipart"?(n=t.substr(e,9),e+=9):(n=null,c===0&&f('"multipart"')),n===null&&(n=Ji())),n}function Ji(){var n;return n=$(),n===null&&(n=zu()),n}function zu(){var n,a,u;return u=e,t.substr(e,2).toLowerCase()==="x-"?(n=t.substr(e,2),e+=2):(n=null,c===0&&f('"x-"')),n!==null?(a=$(),a!==null?n=[n,a]:(n=null,e=u)):(n=null,e=u),n}function Bu(){var n;return n=Ji(),n===null&&(n=$()),n}function na(){var n,a,u,d;return d=e,n=$(),n!==null?(a=P(),a!==null?(u=Vu(),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function Vu(){var n;return n=$(),n===null&&(n=zi()),n}function rb(){var n,a,u,d;return d=e,n=$u(),n!==null?(a=ve(),a!==null?(u=Yi(),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function $u(){var n,a,u;if(u=e,a=v(),a!==null)for(n=[];a!==null;)n.push(a),a=v();else n=null;return n!==null&&(n=function(d,h){T.value=parseInt(h.join(""))}(u,n)),n===null&&(e=u),n}function ib(){var n,a;return a=e,n=wn(),n!==null&&(n=function(u,d){T=d}(a,n)),n===null&&(e=a),n}function sb(){var n,a,u,d,h,g,_;if(h=e,g=e,n=Fr(),n!==null){for(a=[],_=e,u=B(),u!==null?(d=xe(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);u!==null;)a.push(u),_=e,u=B(),u!==null?(d=xe(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);a!==null?n=[n,a]:(n=null,e=g)}else n=null,e=g;return n!==null&&(n=function(w,x){T.event=x.join("").toLowerCase()}(h,n[0])),n===null&&(e=h),n}function Fr(){var n,a,u,d,h,g;if(h=e,n=Pt(),n!==null){for(a=[],g=e,t.charCodeAt(e)===46?(u=".",e++):(u=null,c===0&&f('"."')),u!==null?(d=Pt(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,t.charCodeAt(e)===46?(u=".",e++):(u=null,c===0&&f('"."')),u!==null?(d=Pt(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function ob(){var n,a,u,d,h,g,_;if(h=e,g=e,n=Ir(),n===null&&(n=Tn()),n!==null){for(a=[],_=e,u=B(),u!==null?(d=ra(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);u!==null;)a.push(u),_=e,u=B(),u!==null?(d=ra(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);a!==null?n=[n,a]:(n=null,e=g)}else n=null,e=g;return n!==null&&(n=function(w){var x=T.tag;try{T=new $n(T.uri,T.display_name,T.params),x&&T.setParam("tag",x)}catch{T=-1}}(h)),n===null&&(e=h),n}function ra(){var n;return n=ia(),n===null&&(n=xe()),n}function ia(){var n,a,u,d,h;return d=e,h=e,t.substr(e,3).toLowerCase()==="tag"?(n=t.substr(e,3),e+=3):(n=null,c===0&&f('"tag"')),n!==null?(a=P(),a!==null?(u=$(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.tag=_}(d,n[2])),n===null&&(e=d),n}function ab(){var n,a,u;if(u=e,a=v(),a!==null)for(n=[];a!==null;)n.push(a),a=v();else n=null;return n!==null&&(n=function(d,h){T=parseInt(h.join(""))}(u,n)),n===null&&(e=u),n}function lb(){var n,a;return a=e,n=wn(),n!==null&&(n=function(u,d){T=d}(a,n)),n===null&&(e=a),n}function cb(){var n,a,u,d,h,g,_,w,x,V;for(w=e,x=e,n=[],a=Zi();a!==null;)n.push(a),a=Zi();if(n!==null)if(a=Ae(),a!==null)if(u=Bi(),u!==null)if(d=te(),d!==null){for(h=[],V=e,g=B(),g!==null?(_=xe(),_!==null?g=[g,_]:(g=null,e=V)):(g=null,e=V);g!==null;)h.push(g),V=e,g=B(),g!==null?(_=xe(),_!==null?g=[g,_]:(g=null,e=V)):(g=null,e=V);h!==null?n=[n,a,u,d,h]:(n=null,e=x)}else n=null,e=x;else n=null,e=x;else n=null,e=x;else n=null,e=x;return n!==null&&(n=function(ue){try{T=new $n(T.uri,T.display_name,T.params)}catch{T=-1}}(w)),n===null&&(e=w),n}function ub(){var n;return n=sa(),n}function sa(){var n,a,u,d,h,g,_,w;if(_=e,t.substr(e,6).toLowerCase()==="digest"?(n=t.substr(e,6),e+=6):(n=null,c===0&&f('"Digest"')),n!==null)if(a=ve(),a!==null)if(u=Qi(),u!==null){for(d=[],w=e,h=J(),h!==null?(g=Qi(),g!==null?h=[h,g]:(h=null,e=w)):(h=null,e=w);h!==null;)d.push(h),w=e,h=J(),h!==null?(g=Qi(),g!==null?h=[h,g]:(h=null,e=w)):(h=null,e=w);d!==null?n=[n,a,u,d]:(n=null,e=_)}else n=null,e=_;else n=null,e=_;else n=null,e=_;return n===null&&(n=Wu()),n}function Wu(){var n,a,u,d,h,g,_,w;if(_=e,n=$(),n!==null)if(a=ve(),a!==null)if(u=Lr(),u!==null){for(d=[],w=e,h=J(),h!==null?(g=Lr(),g!==null?h=[h,g]:(h=null,e=w)):(h=null,e=w);h!==null;)d.push(h),w=e,h=J(),h!==null?(g=Lr(),g!==null?h=[h,g]:(h=null,e=w)):(h=null,e=w);d!==null?n=[n,a,u,d]:(n=null,e=_)}else n=null,e=_;else n=null,e=_;else n=null,e=_;return n}function Lr(){var n,a,u,d;return d=e,n=$(),n!==null?(a=P(),a!==null?(u=$(),u===null&&(u=zi()),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function Qi(){var n;return n=Gu(),n===null&&(n=Yu(),n===null&&(n=Xu(),n===null&&(n=Ju(),n===null&&(n=Qu(),n===null&&(n=ed(),n===null&&(n=td(),n===null&&(n=Lr()))))))),n}function Gu(){var n,a,u,d;return d=e,t.substr(e,5).toLowerCase()==="realm"?(n=t.substr(e,5),e+=5):(n=null,c===0&&f('"realm"')),n!==null?(a=P(),a!==null?(u=Ku(),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function Ku(){var n,a;return a=e,n=Ar(),n!==null&&(n=function(u,d){T.realm=d}(a,n)),n===null&&(e=a),n}function Yu(){var n,a,u,d,h,g,_,w,x;if(w=e,t.substr(e,6).toLowerCase()==="domain"?(n=t.substr(e,6),e+=6):(n=null,c===0&&f('"domain"')),n!==null)if(a=P(),a!==null)if(u=et(),u!==null)if(d=es(),d!==null){if(h=[],x=e,_=A(),_!==null)for(g=[];_!==null;)g.push(_),_=A();else g=null;for(g!==null?(_=es(),_!==null?g=[g,_]:(g=null,e=x)):(g=null,e=x);g!==null;){if(h.push(g),x=e,_=A(),_!==null)for(g=[];_!==null;)g.push(_),_=A();else g=null;g!==null?(_=es(),_!==null?g=[g,_]:(g=null,e=x)):(g=null,e=x)}h!==null?(g=qo(),g!==null?n=[n,a,u,d,h,g]:(n=null,e=w)):(n=null,e=w)}else n=null,e=w;else n=null,e=w;else n=null,e=w;else n=null,e=w;return n}function es(){var n;return n=Zo(),n===null&&(n=Gi()),n}function Xu(){var n,a,u,d;return d=e,t.substr(e,5).toLowerCase()==="nonce"?(n=t.substr(e,5),e+=5):(n=null,c===0&&f('"nonce"')),n!==null?(a=P(),a!==null?(u=Zu(),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function Zu(){var n,a;return a=e,n=Ar(),n!==null&&(n=function(u,d){T.nonce=d}(a,n)),n===null&&(e=a),n}function Ju(){var n,a,u,d,h;return d=e,h=e,t.substr(e,6).toLowerCase()==="opaque"?(n=t.substr(e,6),e+=6):(n=null,c===0&&f('"opaque"')),n!==null?(a=P(),a!==null?(u=Ar(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.opaque=_}(d,n[2])),n===null&&(e=d),n}function Qu(){var n,a,u,d,h;return d=e,t.substr(e,5).toLowerCase()==="stale"?(n=t.substr(e,5),e+=5):(n=null,c===0&&f('"stale"')),n!==null?(a=P(),a!==null?(h=e,t.substr(e,4).toLowerCase()==="true"?(u=t.substr(e,4),e+=4):(u=null,c===0&&f('"true"')),u!==null&&(u=function(g){T.stale=!0}(h)),u===null&&(e=h),u===null&&(h=e,t.substr(e,5).toLowerCase()==="false"?(u=t.substr(e,5),e+=5):(u=null,c===0&&f('"false"')),u!==null&&(u=function(g){T.stale=!1}(h)),u===null&&(e=h)),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function ed(){var n,a,u,d,h;return d=e,h=e,t.substr(e,9).toLowerCase()==="algorithm"?(n=t.substr(e,9),e+=9):(n=null,c===0&&f('"algorithm"')),n!==null?(a=P(),a!==null?(t.substr(e,3).toLowerCase()==="md5"?(u=t.substr(e,3),e+=3):(u=null,c===0&&f('"MD5"')),u===null&&(t.substr(e,8).toLowerCase()==="md5-sess"?(u=t.substr(e,8),e+=8):(u=null,c===0&&f('"MD5-sess"')),u===null&&(u=$())),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.algorithm=_.toUpperCase()}(d,n[2])),n===null&&(e=d),n}function td(){var n,a,u,d,h,g,_,w,x,V;if(w=e,t.substr(e,3).toLowerCase()==="qop"?(n=t.substr(e,3),e+=3):(n=null,c===0&&f('"qop"')),n!==null)if(a=P(),a!==null)if(u=et(),u!==null){if(x=e,d=ts(),d!==null){for(h=[],V=e,t.charCodeAt(e)===44?(g=",",e++):(g=null,c===0&&f('","')),g!==null?(_=ts(),_!==null?g=[g,_]:(g=null,e=V)):(g=null,e=V);g!==null;)h.push(g),V=e,t.charCodeAt(e)===44?(g=",",e++):(g=null,c===0&&f('","')),g!==null?(_=ts(),_!==null?g=[g,_]:(g=null,e=V)):(g=null,e=V);h!==null?d=[d,h]:(d=null,e=x)}else d=null,e=x;d!==null?(h=qo(),h!==null?n=[n,a,u,d,h]:(n=null,e=w)):(n=null,e=w)}else n=null,e=w;else n=null,e=w;else n=null,e=w;return n}function ts(){var n,a;return a=e,t.substr(e,8).toLowerCase()==="auth-int"?(n=t.substr(e,8),e+=8):(n=null,c===0&&f('"auth-int"')),n===null&&(t.substr(e,4).toLowerCase()==="auth"?(n=t.substr(e,4),e+=4):(n=null,c===0&&f('"auth"')),n===null&&(n=$())),n!==null&&(n=function(u,d){T.qop||(T.qop=[]),T.qop.push(d.toLowerCase())}(a,n)),n===null&&(e=a),n}function db(){var n,a,u,d,h,g;if(h=e,n=$(),n!==null){for(a=[],g=e,u=J(),u!==null?(d=$(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=J(),u!==null?(d=$(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function fb(){var n,a,u,d,h,g,_;if(h=e,g=e,n=ns(),n!==null){for(a=[],_=e,u=J(),u!==null?(d=ns(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);u!==null;)a.push(u),_=e,u=J(),u!==null?(d=ns(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);a!==null?n=[n,a]:(n=null,e=g)}else n=null,e=g;return n!==null&&(n=function(w){var x,V;for(V=T.multi_header.length,x=0;x<V;x++)if(T.multi_header[x].parsed===null){T=null;break}T!==null?T=T.multi_header:T=-1}(h)),n===null&&(e=h),n}function ns(){var n,a,u,d,h,g,_;if(h=e,g=e,n=Tn(),n!==null){for(a=[],_=e,u=B(),u!==null?(d=xe(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);u!==null;)a.push(u),_=e,u=B(),u!==null?(d=xe(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);a!==null?n=[n,a]:(n=null,e=g)}else n=null,e=g;return n!==null&&(n=function(w){var x;T.multi_header||(T.multi_header=[]);try{x=new $n(T.uri,T.display_name,T.params),delete T.uri,delete T.display_name,delete T.params}catch{x=null}T.multi_header.push({possition:e,offset:w,parsed:x})}(h)),n===null&&(e=h),n}function hb(){var n,a,u,d,h,g,_;if(h=e,g=e,t.substr(e,3).toLowerCase()==="sip"?(n=t.substr(e,3),e+=3):(n=null,c===0&&f('"SIP"')),n===null&&(n=$()),n!==null){for(a=[],_=e,u=B(),u!==null?(d=oa(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);u!==null;)a.push(u),_=e,u=B(),u!==null?(d=oa(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);a!==null?n=[n,a]:(n=null,e=g)}else n=null,e=g;return n!==null&&(n=function(w,x){if(T.protocol=x.toLowerCase(),T.params||(T.params={}),T.params.text&&T.params.text[0]==='"'){var V=T.params.text;T.text=V.substring(1,V.length-1),delete T.params.text}}(h,n[0])),n===null&&(e=h),n}function oa(){var n;return n=nd(),n===null&&(n=xe()),n}function nd(){var n,a,u,d,h,g;if(h=e,g=e,t.substr(e,5).toLowerCase()==="cause"?(n=t.substr(e,5),e+=5):(n=null,c===0&&f('"cause"')),n!==null)if(a=P(),a!==null){if(d=v(),d!==null)for(u=[];d!==null;)u.push(d),d=v();else u=null;u!==null?n=[n,a,u]:(n=null,e=g)}else n=null,e=g;else n=null,e=g;return n!==null&&(n=function(_,w){T.cause=parseInt(w.join(""))}(h,n[2])),n===null&&(e=h),n}function mb(){var n,a,u,d,h,g;if(h=e,n=$(),n!==null){for(a=[],g=e,u=J(),u!==null?(d=$(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=J(),u!==null?(d=$(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function pb(){var n,a,u,d,h,g;if(h=e,n=rs(),n!==null){for(a=[],g=e,u=J(),u!==null?(d=rs(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=J(),u!==null?(d=rs(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function rs(){var n,a,u,d,h,g;if(h=e,n=Tn(),n!==null){for(a=[],g=e,u=B(),u!==null?(d=xe(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=B(),u!==null?(d=xe(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function gb(){var n,a,u,d,h,g;if(h=e,n=rd(),n!==null){for(a=[],g=e,u=B(),u!==null?(d=aa(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=B(),u!==null?(d=aa(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function rd(){var n,a;return a=e,t.substr(e,6).toLowerCase()==="active"?(n=t.substr(e,6),e+=6):(n=null,c===0&&f('"active"')),n===null&&(t.substr(e,7).toLowerCase()==="pending"?(n=t.substr(e,7),e+=7):(n=null,c===0&&f('"pending"')),n===null&&(t.substr(e,10).toLowerCase()==="terminated"?(n=t.substr(e,10),e+=10):(n=null,c===0&&f('"terminated"')),n===null&&(n=$()))),n!==null&&(n=function(u){T.state=t.substring(e,u)}(a)),n===null&&(e=a),n}function aa(){var n,a,u,d,h;return d=e,h=e,t.substr(e,6).toLowerCase()==="reason"?(n=t.substr(e,6),e+=6):(n=null,c===0&&f('"reason"')),n!==null?(a=P(),a!==null?(u=id(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){typeof _<"u"&&(T.reason=_)}(d,n[2])),n===null&&(e=d),n===null&&(d=e,h=e,t.substr(e,7).toLowerCase()==="expires"?(n=t.substr(e,7),e+=7):(n=null,c===0&&f('"expires"')),n!==null?(a=P(),a!==null?(u=wn(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){typeof _<"u"&&(T.expires=_)}(d,n[2])),n===null&&(e=d),n===null&&(d=e,h=e,t.substr(e,11).toLowerCase()==="retry_after"?(n=t.substr(e,11),e+=11):(n=null,c===0&&f('"retry_after"')),n!==null?(a=P(),a!==null?(u=wn(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){typeof _<"u"&&(T.retry_after=_)}(d,n[2])),n===null&&(e=d),n===null&&(n=xe()))),n}function id(){var n;return t.substr(e,11).toLowerCase()==="deactivated"?(n=t.substr(e,11),e+=11):(n=null,c===0&&f('"deactivated"')),n===null&&(t.substr(e,9).toLowerCase()==="probation"?(n=t.substr(e,9),e+=9):(n=null,c===0&&f('"probation"')),n===null&&(t.substr(e,8).toLowerCase()==="rejected"?(n=t.substr(e,8),e+=8):(n=null,c===0&&f('"rejected"')),n===null&&(t.substr(e,7).toLowerCase()==="timeout"?(n=t.substr(e,7),e+=7):(n=null,c===0&&f('"timeout"')),n===null&&(t.substr(e,6).toLowerCase()==="giveup"?(n=t.substr(e,6),e+=6):(n=null,c===0&&f('"giveup"')),n===null&&(t.substr(e,10).toLowerCase()==="noresource"?(n=t.substr(e,10),e+=10):(n=null,c===0&&f('"noresource"')),n===null&&(t.substr(e,9).toLowerCase()==="invariant"?(n=t.substr(e,9),e+=9):(n=null,c===0&&f('"invariant"')),n===null&&(n=$()))))))),n}function bb(){var n;return n=bt(),n=n!==null?n:"",n}function _b(){var n,a,u,d,h,g;if(h=e,n=$(),n!==null){for(a=[],g=e,u=J(),u!==null?(d=$(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=J(),u!==null?(d=$(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n=n!==null?n:"",n}function vb(){var n,a,u,d,h,g,_;if(h=e,g=e,n=Ir(),n===null&&(n=Tn()),n!==null){for(a=[],_=e,u=B(),u!==null?(d=la(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);u!==null;)a.push(u),_=e,u=B(),u!==null?(d=la(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);a!==null?n=[n,a]:(n=null,e=g)}else n=null,e=g;return n!==null&&(n=function(w){var x=T.tag;try{T=new $n(T.uri,T.display_name,T.params),x&&T.setParam("tag",x)}catch{T=-1}}(h)),n===null&&(e=h),n}function la(){var n;return n=ia(),n===null&&(n=xe()),n}function yb(){var n,a,u,d,h,g;if(h=e,n=is(),n!==null){for(a=[],g=e,u=J(),u!==null?(d=is(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=J(),u!==null?(d=is(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function is(){var n,a,u,d,h,g,_,w;if(_=e,n=dd(),n!==null)if(a=ve(),a!==null)if(u=md(),u!==null){for(d=[],w=e,h=B(),h!==null?(g=ca(),g!==null?h=[h,g]:(h=null,e=w)):(h=null,e=w);h!==null;)d.push(h),w=e,h=B(),h!==null?(g=ca(),g!==null?h=[h,g]:(h=null,e=w)):(h=null,e=w);d!==null?n=[n,a,u,d]:(n=null,e=_)}else n=null,e=_;else n=null,e=_;else n=null,e=_;return n}function ca(){var n;return n=sd(),n===null&&(n=od(),n===null&&(n=ad(),n===null&&(n=ld(),n===null&&(n=cd(),n===null&&(n=xe()))))),n}function sd(){var n,a,u,d,h;return d=e,h=e,t.substr(e,3).toLowerCase()==="ttl"?(n=t.substr(e,3),e+=3):(n=null,c===0&&f('"ttl"')),n!==null?(a=P(),a!==null?(u=ua(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.ttl=_}(d,n[2])),n===null&&(e=d),n}function od(){var n,a,u,d,h;return d=e,h=e,t.substr(e,5).toLowerCase()==="maddr"?(n=t.substr(e,5),e+=5):(n=null,c===0&&f('"maddr"')),n!==null?(a=P(),a!==null?(u=xr(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.maddr=_}(d,n[2])),n===null&&(e=d),n}function ad(){var n,a,u,d,h;return d=e,h=e,t.substr(e,8).toLowerCase()==="received"?(n=t.substr(e,8),e+=8):(n=null,c===0&&f('"received"')),n!==null?(a=P(),a!==null?(u=Dr(),u===null&&(u=Yo()),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.received=_}(d,n[2])),n===null&&(e=d),n}function ld(){var n,a,u,d,h;return d=e,h=e,t.substr(e,6).toLowerCase()==="branch"?(n=t.substr(e,6),e+=6):(n=null,c===0&&f('"branch"')),n!==null?(a=P(),a!==null?(u=$(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.branch=_}(d,n[2])),n===null&&(e=d),n}function cd(){var n,a,u,d,h;return d=e,t.substr(e,5).toLowerCase()==="rport"?(n=t.substr(e,5),e+=5):(n=null,c===0&&f('"rport"')),n!==null?(h=e,a=P(),a!==null?(u=ud(),u!==null?a=[a,u]:(a=null,e=h)):(a=null,e=h),a=a!==null?a:"",a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n}function ud(){var n,a,u,d,h,g,_;return g=e,_=e,n=v(),n=n!==null?n:"",n!==null?(a=v(),a=a!==null?a:"",a!==null?(u=v(),u=u!==null?u:"",u!==null?(d=v(),d=d!==null?d:"",d!==null?(h=v(),h=h!==null?h:"",h!==null?n=[n,a,u,d,h]:(n=null,e=_)):(n=null,e=_)):(n=null,e=_)):(n=null,e=_)):(n=null,e=_),n!==null&&(n=function(w,x){T.rport=parseInt(x.join(""))}(g,n)),n===null&&(e=g),n}function dd(){var n,a,u,d,h,g;return g=e,n=fd(),n!==null?(a=Vn(),a!==null?(u=$(),u!==null?(d=Vn(),d!==null?(h=hd(),h!==null?n=[n,a,u,d,h]:(n=null,e=g)):(n=null,e=g)):(n=null,e=g)):(n=null,e=g)):(n=null,e=g),n}function fd(){var n,a;return a=e,t.substr(e,3).toLowerCase()==="sip"?(n=t.substr(e,3),e+=3):(n=null,c===0&&f('"SIP"')),n===null&&(n=$()),n!==null&&(n=function(u,d){T.protocol=d}(a,n)),n===null&&(e=a),n}function hd(){var n,a;return a=e,t.substr(e,3).toLowerCase()==="udp"?(n=t.substr(e,3),e+=3):(n=null,c===0&&f('"UDP"')),n===null&&(t.substr(e,3).toLowerCase()==="tcp"?(n=t.substr(e,3),e+=3):(n=null,c===0&&f('"TCP"')),n===null&&(t.substr(e,3).toLowerCase()==="tls"?(n=t.substr(e,3),e+=3):(n=null,c===0&&f('"TLS"')),n===null&&(t.substr(e,4).toLowerCase()==="sctp"?(n=t.substr(e,4),e+=4):(n=null,c===0&&f('"SCTP"')),n===null&&(n=$())))),n!==null&&(n=function(u,d){T.transport=d}(a,n)),n===null&&(e=a),n}function md(){var n,a,u,d,h;return d=e,n=pd(),n!==null?(h=e,a=vn(),a!==null?(u=gd(),u!==null?a=[a,u]:(a=null,e=h)):(a=null,e=h),a=a!==null?a:"",a!==null?n=[n,a]:(n=null,e=d)):(n=null,e=d),n}function pd(){var n,a;return a=e,n=Dr(),n===null&&(n=Ko(),n===null&&(n=Wo())),n!==null&&(n=function(u){T.host=t.substring(e,u)}(a)),n===null&&(e=a),n}function gd(){var n,a,u,d,h,g,_;return g=e,_=e,n=v(),n=n!==null?n:"",n!==null?(a=v(),a=a!==null?a:"",a!==null?(u=v(),u=u!==null?u:"",u!==null?(d=v(),d=d!==null?d:"",d!==null?(h=v(),h=h!==null?h:"",h!==null?n=[n,a,u,d,h]:(n=null,e=_)):(n=null,e=_)):(n=null,e=_)):(n=null,e=_)):(n=null,e=_),n!==null&&(n=function(w,x){T.port=parseInt(x.join(""))}(g,n)),n===null&&(e=g),n}function ua(){var n,a,u,d,h;return d=e,h=e,n=v(),n!==null?(a=v(),a=a!==null?a:"",a!==null?(u=v(),u=u!==null?u:"",u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){return parseInt(_.join(""))}(d,n)),n===null&&(e=d),n}function Tb(){var n;return n=sa(),n}function wb(){var n,a,u,d,h,g;if(h=e,n=bd(),n!==null){for(a=[],g=e,u=B(),u!==null?(d=da(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=B(),u!==null?(d=da(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function bd(){var n,a;return a=e,n=wn(),n!==null&&(n=function(u,d){T.expires=d}(a,n)),n===null&&(e=a),n}function da(){var n;return n=_d(),n===null&&(n=xe()),n}function _d(){var n,a,u,d,h;return d=e,h=e,t.substr(e,9).toLowerCase()==="refresher"?(n=t.substr(e,9),e+=9):(n=null,c===0&&f('"refresher"')),n!==null?(a=P(),a!==null?(t.substr(e,3).toLowerCase()==="uac"?(u=t.substr(e,3),e+=3):(u=null,c===0&&f('"uac"')),u===null&&(t.substr(e,3).toLowerCase()==="uas"?(u=t.substr(e,3),e+=3):(u=null,c===0&&f('"uas"'))),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.refresher=_.toLowerCase()}(d,n[2])),n===null&&(e=d),n}function Cb(){var n,a,u,d;return d=e,n=$(),n!==null?(a=oe(),a!==null?(u=vd(),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function vd(){var n,a;for(n=[],a=Ge(),a===null&&(a=Ct(),a===null&&(a=ve()));a!==null;)n.push(a),a=Ge(),a===null&&(a=Ct(),a===null&&(a=ve()));return n}function Eb(){var n,a;for(n=[],a=_e();a!==null;)n.push(a),a=_e();return n}function Sb(){var n,a,u;return u=e,t.substr(e,5)==="uuid:"?(n="uuid:",e+=5):(n=null,c===0&&f('"uuid:"')),n!==null?(a=yd(),a!==null?n=[n,a]:(n=null,e=u)):(n=null,e=u),n}function yd(){var n,a,u,d,h,g,_,w,x,V,ue;return V=e,ue=e,n=Td(),n!==null?(t.charCodeAt(e)===45?(a="-",e++):(a=null,c===0&&f('"-"')),a!==null?(u=Ft(),u!==null?(t.charCodeAt(e)===45?(d="-",e++):(d=null,c===0&&f('"-"')),d!==null?(h=Ft(),h!==null?(t.charCodeAt(e)===45?(g="-",e++):(g=null,c===0&&f('"-"')),g!==null?(_=Ft(),_!==null?(t.charCodeAt(e)===45?(w="-",e++):(w=null,c===0&&f('"-"')),w!==null?(x=wd(),x!==null?n=[n,a,u,d,h,g,_,w,x]:(n=null,e=ue)):(n=null,e=ue)):(n=null,e=ue)):(n=null,e=ue)):(n=null,e=ue)):(n=null,e=ue)):(n=null,e=ue)):(n=null,e=ue)):(n=null,e=ue),n!==null&&(n=function(St,ss){T=t.substring(e+5,St)}(V,n[0])),n===null&&(e=V),n}function Ft(){var n,a,u,d,h;return h=e,n=q(),n!==null?(a=q(),a!==null?(u=q(),u!==null?(d=q(),d!==null?n=[n,a,u,d]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n}function Td(){var n,a,u;return u=e,n=Ft(),n!==null?(a=Ft(),a!==null?n=[n,a]:(n=null,e=u)):(n=null,e=u),n}function wd(){var n,a,u,d;return d=e,n=Ft(),n!==null?(a=Ft(),a!==null?(u=Ft(),u!==null?n=[n,a,u]:(n=null,e=d)):(n=null,e=d)):(n=null,e=d),n}function Ab(){var n,a,u,d,h,g,_;if(h=e,g=e,n=Ir(),n===null&&(n=Tn()),n!==null){for(a=[],_=e,u=B(),u!==null?(d=xe(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);u!==null;)a.push(u),_=e,u=B(),u!==null?(d=xe(),d!==null?u=[u,d]:(u=null,e=_)):(u=null,e=_);a!==null?n=[n,a]:(n=null,e=g)}else n=null,e=g;return n!==null&&(n=function(w){try{T=new $n(T.uri,T.display_name,T.params)}catch{T=-1}}(h)),n===null&&(e=h),n}function Rb(){var n,a,u,d,h,g;if(h=e,n=Cd(),n!==null){for(a=[],g=e,u=B(),u!==null?(d=fa(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);u!==null;)a.push(u),g=e,u=B(),u!==null?(d=fa(),d!==null?u=[u,d]:(u=null,e=g)):(u=null,e=g);a!==null?n=[n,a]:(n=null,e=h)}else n=null,e=h;return n}function Cd(){var n,a,u,d,h,g;return d=e,h=e,n=Et(),n!==null?(g=e,t.charCodeAt(e)===64?(a="@",e++):(a=null,c===0&&f('"@"')),a!==null?(u=Et(),u!==null?a=[a,u]:(a=null,e=g)):(a=null,e=g),a=a!==null?a:"",a!==null?n=[n,a]:(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(_){T.call_id=t.substring(e,_)}(d)),n===null&&(e=d),n}function fa(){var n;return n=Ed(),n===null&&(n=Sd(),n===null&&(n=Ad(),n===null&&(n=xe()))),n}function Ed(){var n,a,u,d,h;return d=e,h=e,t.substr(e,6)==="to-tag"?(n="to-tag",e+=6):(n=null,c===0&&f('"to-tag"')),n!==null?(a=P(),a!==null?(u=$(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.to_tag=_}(d,n[2])),n===null&&(e=d),n}function Sd(){var n,a,u,d,h;return d=e,h=e,t.substr(e,8)==="from-tag"?(n="from-tag",e+=8):(n=null,c===0&&f('"from-tag"')),n!==null?(a=P(),a!==null?(u=$(),u!==null?n=[n,a,u]:(n=null,e=h)):(n=null,e=h)):(n=null,e=h),n!==null&&(n=function(g,_){T.from_tag=_}(d,n[2])),n===null&&(e=d),n}function Ad(){var n,a;return a=e,t.substr(e,10)==="early-only"?(n="early-only",e+=10):(n=null,c===0&&f('"early-only"')),n!==null&&(n=function(u){T.early_only=!0}(a)),n===null&&(e=a),n}function Ib(n){n.sort();for(var a=null,u=[],d=0;d<n.length;d++)n[d]!==a&&(u.push(n[d]),a=n[d]);return u}function xb(){for(var n=1,a=1,u=!1,d=0;d<Math.max(e,m);d++){var h=t.charAt(d);h===`
`?(u||n++,a=1,u=!1):h==="\r"||h==="\u2028"||h==="\u2029"?(n++,a=1,u=!0):(a++,u=!1)}return{line:n,column:a}}var Rd=Bt(),$n=Zs(),T={},Db=l[i]();if(Db===null||e!==t.length){var ha=Math.max(e,m),Ob=ha<t.length?t.charAt(ha):null,Id=xb();return new this.SyntaxError(Ib(p),Ob,ha,Id.line,Id.column),-1}return T},toSource:function(){return this._source}};return r.SyntaxError=function(o,t,i,l,e){function c(m,p){var b,y;switch(m.length){case 0:b="end of input";break;case 1:b=m[0];break;default:b=m.slice(0,m.length-1).join(", ")+" or "+m[m.length-1]}return y=p?s(p):"end of input","Expected "+b+" but "+y+" found."}this.name="SyntaxError",this.expected=o,this.found=t,this.message=c(o,t),this.offset=i,this.line=l,this.column=e},r.SyntaxError.prototype=Error.prototype,r}()});var Bt=Z((dS,$h)=>{"use strict";function w0(s,r){var o;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(o=C0(s))||r&&s&&typeof s.length=="number"){o&&(s=o);var t=0,i=function(){};return{s:i,n:function(){return t>=s.length?{done:!0}:{done:!1,value:s[t++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,e=!1,c;return{s:function(){o=s[Symbol.iterator]()},n:function(){var p=o.next();return l=p.done,p},e:function(p){e=!0,c=p},f:function(){try{!l&&o.return!=null&&o.return()}finally{if(e)throw c}}}}function C0(s,r){if(s){if(typeof s=="string")return zh(s,r);var o=Object.prototype.toString.call(s).slice(8,-1);if(o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set")return Array.from(s);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return zh(s,r)}}function zh(s,r){(r==null||r>s.length)&&(r=s.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=s[o];return t}function E0(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Bh(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function Vh(s,r,o){return r&&Bh(s.prototype,r),o&&Bh(s,o),s}var S0=Ie(),fr=Le(),A0=Tt();$h.exports=function(){Vh(s,null,[{key:"parse",value:function(o){if(o=A0.parse(o,"SIP_URI"),o!==-1)return o}}]);function s(r,o,t,i){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},e=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(E0(this,s),!t)throw new TypeError('missing or invalid "host" parameter');this._parameters={},this._headers={},this._scheme=r||S0.SIP,this._user=o,this._host=t,this._port=i;for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&this.setParam(c,l[c]);for(var m in e)Object.prototype.hasOwnProperty.call(e,m)&&this.setHeader(m,e[m])}return Vh(s,[{key:"setParam",value:function(o,t){o&&(this._parameters[o.toLowerCase()]=typeof t>"u"||t===null?null:t.toString())}},{key:"getParam",value:function(o){if(o)return this._parameters[o.toLowerCase()]}},{key:"hasParam",value:function(o){if(o)return this._parameters.hasOwnProperty(o.toLowerCase())&&!0||!1}},{key:"deleteParam",value:function(o){if(o=o.toLowerCase(),this._parameters.hasOwnProperty(o)){var t=this._parameters[o];return delete this._parameters[o],t}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"setHeader",value:function(o,t){this._headers[fr.headerize(o)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(o){if(o)return this._headers[fr.headerize(o)]}},{key:"hasHeader",value:function(o){if(o)return this._headers.hasOwnProperty(fr.headerize(o))&&!0||!1}},{key:"deleteHeader",value:function(o){if(o=fr.headerize(o),this._headers.hasOwnProperty(o)){var t=this._headers[o];return delete this._headers[o],t}}},{key:"clearHeaders",value:function(){this._headers={}}},{key:"clone",value:function(){return new s(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}},{key:"toString",value:function(){var o=[],t="".concat(this._scheme,":");this._user&&(t+="".concat(fr.escapeUser(this._user),"@")),t+=this._host,(this._port||this._port===0)&&(t+=":".concat(this._port));for(var i in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,i)&&(t+=";".concat(i),this._parameters[i]!==null&&(t+="=".concat(this._parameters[i])));for(var l in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,l)){var e=w0(this._headers[l]),c;try{for(e.s();!(c=e.n()).done;){var m=c.value;o.push("".concat(l,"=").concat(m))}}catch(p){e.e(p)}finally{e.f()}}return o.length>0&&(t+="?".concat(o.join("&"))),t}},{key:"toAor",value:function(o){var t="".concat(this._scheme,":");return this._user&&(t+="".concat(fr.escapeUser(this._user),"@")),t+=this._host,o&&(this._port||this._port===0)&&(t+=":".concat(this._port)),t}},{key:"scheme",get:function(){return this._scheme},set:function(o){this._scheme=o.toLowerCase()}},{key:"user",get:function(){return this._user},set:function(o){this._user=o}},{key:"host",get:function(){return this._host},set:function(o){this._host=o.toLowerCase()}},{key:"port",get:function(){return this._port},set:function(o){this._port=o===0?o:parseInt(o,10)||null}}]),s}()});var Le=Z(Oe=>{"use strict";function Js(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Js=function(o){return typeof o}:Js=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Js(s)}function Hl(s,r){var o;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(o=R0(s))||r&&s&&typeof s.length=="number"){o&&(s=o);var t=0,i=function(){};return{s:i,n:function(){return t>=s.length?{done:!0}:{done:!1,value:s[t++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,e=!1,c;return{s:function(){o=s[Symbol.iterator]()},n:function(){var p=o.next();return l=p.done,p},e:function(p){e=!0,c=p},f:function(){try{!l&&o.return!=null&&o.return()}finally{if(e)throw c}}}}function R0(s,r){if(s){if(typeof s=="string")return Wh(s,r);var o=Object.prototype.toString.call(s).slice(8,-1);if(o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set")return Array.from(s);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Wh(s,r)}}function Wh(s,r){(r==null||r>s.length)&&(r=s.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=s[o];return t}var vi=Ie(),Gh=Bt(),I0=Tt();Oe.str_utf8_length=function(s){return unescape(encodeURIComponent(s)).length};var x0=Oe.isFunction=function(s){return s!==void 0?Object.prototype.toString.call(s)==="[object Function]":!1};Oe.isString=function(s){return s!==void 0?Object.prototype.toString.call(s)==="[object String]":!1};Oe.isDecimal=function(s){return!isNaN(s)&&parseFloat(s)===parseInt(s,10)};Oe.isEmpty=function(s){return s===null||s===""||s===void 0||Array.isArray(s)&&s.length===0||typeof s=="number"&&isNaN(s)};Oe.hasMethods=function(s){for(var r=arguments.length,o=new Array(r>1?r-1:0),t=1;t<r;t++)o[t-1]=arguments[t];for(var i=0,l=o;i<l.length;i++){var e=l[i];if(x0(s[e]))return!1}return!0};var D0=Oe.createRandomToken=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32,o,t,i="";for(o=0;o<s;o++)t=Math.random()*r|0,i+=t.toString(r);return i};Oe.newTag=function(){return D0(10)};Oe.newUUID=function(){var s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var o=Math.random()*16|0,t=r==="x"?o:o&3|8;return t.toString(16)});return s};Oe.hostType=function(s){if(s){if(s=I0.parse(s,"host"),s!==-1)return s.host_type}else return};var O0=Oe.escapeUser=function(s){return encodeURIComponent(decodeURIComponent(s)).replace(/%3A/ig,":").replace(/%2B/ig,"+").replace(/%3F/ig,"?").replace(/%2F/ig,"/")};Oe.normalizeTarget=function(s,r){if(s){if(s instanceof Gh)return s;if(typeof s=="string"){var o=s.split("@"),t,i;switch(o.length){case 1:if(!r)return;t=s,i=r;break;case 2:t=o[0],i=o[1];break;default:t=o.slice(0,o.length-1).join("@"),i=o[o.length-1]}t=t.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(t)&&(t=t.replace(/[-.()]/g,"")),s="".concat(vi.SIP,":").concat(O0(t),"@").concat(i);var l;return(l=Gh.parse(s))?l:void 0}else return}else return};Oe.headerize=function(s){var r={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},o=s.toLowerCase().replace(/_/g,"-").split("-"),t="",i=o.length,l;for(l=0;l<i;l++)l!==0&&(t+="-"),t+=o[l].charAt(0).toUpperCase()+o[l].substring(1);return r[t]&&(t=r[t]),t};Oe.sipErrorCause=function(s){for(var r in vi.SIP_ERROR_CAUSES)if(vi.SIP_ERROR_CAUSES[r].indexOf(s)!==-1)return vi.causes[r];return vi.causes.SIP_FAILURE_CODE};Oe.getRandomTestNetIP=function(){function s(r,o){return Math.floor(Math.random()*(o-r+1)+r)}return"192.0.2.".concat(s(1,254))};Oe.calculateMD5=function(s){function r(P,W){return P<<W|P>>>32-W}function o(P,W){var Q=P&2147483648,te=W&2147483648,Ae=P&1073741824,J=W&1073741824,B=(P&1073741823)+(W&1073741823);return Ae&J?B^2147483648^Q^te:Ae|J?B&1073741824?B^3221225472^Q^te:B^1073741824^Q^te:B^Q^te}function t(P,W,Q){return P&W|~P&Q}function i(P,W,Q){return P&Q|W&~Q}function l(P,W,Q){return P^W^Q}function e(P,W,Q){return W^(P|~Q)}function c(P,W,Q,te,Ae,J,B){return P=o(P,o(o(t(W,Q,te),Ae),B)),o(r(P,J),W)}function m(P,W,Q,te,Ae,J,B){return P=o(P,o(o(i(W,Q,te),Ae),B)),o(r(P,J),W)}function p(P,W,Q,te,Ae,J,B){return P=o(P,o(o(l(W,Q,te),Ae),B)),o(r(P,J),W)}function b(P,W,Q,te,Ae,J,B){return P=o(P,o(o(e(W,Q,te),Ae),B)),o(r(P,J),W)}function y(P){for(var W,Q=P.length,te=Q+8,Ae=(te-te%64)/64,J=(Ae+1)*16,B=new Array(J-1),vn=0,et=0;et<Q;)W=(et-et%4)/4,vn=et%4*8,B[W]=B[W]|P.charCodeAt(et)<<vn,et++;return W=(et-et%4)/4,vn=et%4*8,B[W]=B[W]|128<<vn,B[J-2]=Q<<3,B[J-1]=Q>>>29,B}function f(P){var W="",Q="",te,Ae;for(Ae=0;Ae<=3;Ae++)te=P>>>Ae*8&255,Q="0".concat(te.toString(16)),W=W+Q.substr(Q.length-2,2);return W}function S(P){for(var W="",Q=0;Q<P.length;Q++){var te=P.charCodeAt(Q);te<128?W+=String.fromCharCode(te):te>127&&te<2048?(W+=String.fromCharCode(te>>6|192),W+=String.fromCharCode(te&63|128)):(W+=String.fromCharCode(te>>12|224),W+=String.fromCharCode(te>>6&63|128),W+=String.fromCharCode(te&63|128))}return W}var v=[],C,q,K,_e,we,A,O,R,k,ie=7,Pe=12,ce=17,ve=22,ne=5,oe=9,bt=14,Ge=20,_t=4,Ct=11,zn=16,$=23,Pt=6,Bn=10,Et=15,_n=21;for(s=S(s),v=y(s),A=1732584193,O=4023233417,R=2562383102,k=271733878,C=0;C<v.length;C+=16)q=A,K=O,_e=R,we=k,A=c(A,O,R,k,v[C+0],ie,3614090360),k=c(k,A,O,R,v[C+1],Pe,3905402710),R=c(R,k,A,O,v[C+2],ce,606105819),O=c(O,R,k,A,v[C+3],ve,3250441966),A=c(A,O,R,k,v[C+4],ie,4118548399),k=c(k,A,O,R,v[C+5],Pe,1200080426),R=c(R,k,A,O,v[C+6],ce,2821735955),O=c(O,R,k,A,v[C+7],ve,4249261313),A=c(A,O,R,k,v[C+8],ie,1770035416),k=c(k,A,O,R,v[C+9],Pe,2336552879),R=c(R,k,A,O,v[C+10],ce,4294925233),O=c(O,R,k,A,v[C+11],ve,2304563134),A=c(A,O,R,k,v[C+12],ie,1804603682),k=c(k,A,O,R,v[C+13],Pe,4254626195),R=c(R,k,A,O,v[C+14],ce,2792965006),O=c(O,R,k,A,v[C+15],ve,1236535329),A=m(A,O,R,k,v[C+1],ne,4129170786),k=m(k,A,O,R,v[C+6],oe,3225465664),R=m(R,k,A,O,v[C+11],bt,643717713),O=m(O,R,k,A,v[C+0],Ge,3921069994),A=m(A,O,R,k,v[C+5],ne,3593408605),k=m(k,A,O,R,v[C+10],oe,38016083),R=m(R,k,A,O,v[C+15],bt,3634488961),O=m(O,R,k,A,v[C+4],Ge,3889429448),A=m(A,O,R,k,v[C+9],ne,568446438),k=m(k,A,O,R,v[C+14],oe,3275163606),R=m(R,k,A,O,v[C+3],bt,4107603335),O=m(O,R,k,A,v[C+8],Ge,1163531501),A=m(A,O,R,k,v[C+13],ne,2850285829),k=m(k,A,O,R,v[C+2],oe,4243563512),R=m(R,k,A,O,v[C+7],bt,1735328473),O=m(O,R,k,A,v[C+12],Ge,2368359562),A=p(A,O,R,k,v[C+5],_t,4294588738),k=p(k,A,O,R,v[C+8],Ct,2272392833),R=p(R,k,A,O,v[C+11],zn,1839030562),O=p(O,R,k,A,v[C+14],$,4259657740),A=p(A,O,R,k,v[C+1],_t,2763975236),k=p(k,A,O,R,v[C+4],Ct,1272893353),R=p(R,k,A,O,v[C+7],zn,4139469664),O=p(O,R,k,A,v[C+10],$,3200236656),A=p(A,O,R,k,v[C+13],_t,681279174),k=p(k,A,O,R,v[C+0],Ct,3936430074),R=p(R,k,A,O,v[C+3],zn,3572445317),O=p(O,R,k,A,v[C+6],$,76029189),A=p(A,O,R,k,v[C+9],_t,3654602809),k=p(k,A,O,R,v[C+12],Ct,3873151461),R=p(R,k,A,O,v[C+15],zn,530742520),O=p(O,R,k,A,v[C+2],$,3299628645),A=b(A,O,R,k,v[C+0],Pt,4096336452),k=b(k,A,O,R,v[C+7],Bn,1126891415),R=b(R,k,A,O,v[C+14],Et,2878612391),O=b(O,R,k,A,v[C+5],_n,4237533241),A=b(A,O,R,k,v[C+12],Pt,1700485571),k=b(k,A,O,R,v[C+3],Bn,2399980690),R=b(R,k,A,O,v[C+10],Et,4293915773),O=b(O,R,k,A,v[C+1],_n,2240044497),A=b(A,O,R,k,v[C+8],Pt,1873313359),k=b(k,A,O,R,v[C+15],Bn,4264355552),R=b(R,k,A,O,v[C+6],Et,2734768916),O=b(O,R,k,A,v[C+13],_n,1309151649),A=b(A,O,R,k,v[C+4],Pt,4149444226),k=b(k,A,O,R,v[C+11],Bn,3174756917),R=b(R,k,A,O,v[C+2],Et,718787259),O=b(O,R,k,A,v[C+9],_n,3951481745),A=o(A,q),O=o(O,K),R=o(R,_e),k=o(k,we);var Vn=f(A)+f(O)+f(R)+f(k);return Vn.toLowerCase()};Oe.closeMediaStream=function(s){if(s)try{var r;if(s.getTracks){r=s.getTracks();var o=Hl(r),t;try{for(o.s();!(t=o.n()).done;){var i=t.value;i.stop()}}catch(y){o.e(y)}finally{o.f()}}else{r=s.getAudioTracks();var l=Hl(r),e;try{for(l.s();!(e=l.n()).done;){var c=e.value;c.stop()}}catch(y){l.e(y)}finally{l.f()}r=s.getVideoTracks();var m=Hl(r),p;try{for(m.s();!(p=m.n()).done;){var b=p.value;b.stop()}}catch(y){m.e(y)}finally{m.f()}}}catch{(typeof s.stop=="function"||Js(s.stop)==="object")&&s.stop()}};Oe.cloneArray=function(s){return s&&s.slice()||[]};Oe.cloneObject=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return s&&Object.assign({},s)||r}});var Vt=Z((hS,ql)=>{"use strict";var hr=typeof Reflect=="object"?Reflect:null,Kh=hr&&typeof hr.apply=="function"?hr.apply:function(r,o,t){return Function.prototype.apply.call(r,o,t)},Qs;hr&&typeof hr.ownKeys=="function"?Qs=hr.ownKeys:Object.getOwnPropertySymbols?Qs=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Qs=function(r){return Object.getOwnPropertyNames(r)};function k0(s){console&&console.warn&&console.warn(s)}var Xh=Number.isNaN||function(r){return r!==r};function le(){le.init.call(this)}ql.exports=le;ql.exports.once=F0;le.EventEmitter=le;le.prototype._events=void 0;le.prototype._eventsCount=0;le.prototype._maxListeners=void 0;var Yh=10;function eo(s){if(typeof s!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}Object.defineProperty(le,"defaultMaxListeners",{enumerable:!0,get:function(){return Yh},set:function(s){if(typeof s!="number"||s<0||Xh(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");Yh=s}});le.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};le.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||Xh(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function Zh(s){return s._maxListeners===void 0?le.defaultMaxListeners:s._maxListeners}le.prototype.getMaxListeners=function(){return Zh(this)};le.prototype.emit=function(r){for(var o=[],t=1;t<arguments.length;t++)o.push(arguments[t]);var i=r==="error",l=this._events;if(l!==void 0)i=i&&l.error===void 0;else if(!i)return!1;if(i){var e;if(o.length>0&&(e=o[0]),e instanceof Error)throw e;var c=new Error("Unhandled error."+(e?" ("+e.message+")":""));throw c.context=e,c}var m=l[r];if(m===void 0)return!1;if(typeof m=="function")Kh(m,this,o);else for(var p=m.length,b=nm(m,p),t=0;t<p;++t)Kh(b[t],this,o);return!0};function Jh(s,r,o,t){var i,l,e;if(eo(o),l=s._events,l===void 0?(l=s._events=Object.create(null),s._eventsCount=0):(l.newListener!==void 0&&(s.emit("newListener",r,o.listener?o.listener:o),l=s._events),e=l[r]),e===void 0)e=l[r]=o,++s._eventsCount;else if(typeof e=="function"?e=l[r]=t?[o,e]:[e,o]:t?e.unshift(o):e.push(o),i=Zh(s),i>0&&e.length>i&&!e.warned){e.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+e.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=s,c.type=r,c.count=e.length,k0(c)}return s}le.prototype.addListener=function(r,o){return Jh(this,r,o,!1)};le.prototype.on=le.prototype.addListener;le.prototype.prependListener=function(r,o){return Jh(this,r,o,!0)};function N0(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Qh(s,r,o){var t={fired:!1,wrapFn:void 0,target:s,type:r,listener:o},i=N0.bind(t);return i.listener=o,t.wrapFn=i,i}le.prototype.once=function(r,o){return eo(o),this.on(r,Qh(this,r,o)),this};le.prototype.prependOnceListener=function(r,o){return eo(o),this.prependListener(r,Qh(this,r,o)),this};le.prototype.removeListener=function(r,o){var t,i,l,e,c;if(eo(o),i=this._events,i===void 0)return this;if(t=i[r],t===void 0)return this;if(t===o||t.listener===o)--this._eventsCount===0?this._events=Object.create(null):(delete i[r],i.removeListener&&this.emit("removeListener",r,t.listener||o));else if(typeof t!="function"){for(l=-1,e=t.length-1;e>=0;e--)if(t[e]===o||t[e].listener===o){c=t[e].listener,l=e;break}if(l<0)return this;l===0?t.shift():M0(t,l),t.length===1&&(i[r]=t[0]),i.removeListener!==void 0&&this.emit("removeListener",r,c||o)}return this};le.prototype.off=le.prototype.removeListener;le.prototype.removeAllListeners=function(r){var o,t,i;if(t=this._events,t===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete t[r]),this;if(arguments.length===0){var l=Object.keys(t),e;for(i=0;i<l.length;++i)e=l[i],e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(o=t[r],typeof o=="function")this.removeListener(r,o);else if(o!==void 0)for(i=o.length-1;i>=0;i--)this.removeListener(r,o[i]);return this};function em(s,r,o){var t=s._events;if(t===void 0)return[];var i=t[r];return i===void 0?[]:typeof i=="function"?o?[i.listener||i]:[i]:o?P0(i):nm(i,i.length)}le.prototype.listeners=function(r){return em(this,r,!0)};le.prototype.rawListeners=function(r){return em(this,r,!1)};le.listenerCount=function(s,r){return typeof s.listenerCount=="function"?s.listenerCount(r):tm.call(s,r)};le.prototype.listenerCount=tm;function tm(s){var r=this._events;if(r!==void 0){var o=r[s];if(typeof o=="function")return 1;if(o!==void 0)return o.length}return 0}le.prototype.eventNames=function(){return this._eventsCount>0?Qs(this._events):[]};function nm(s,r){for(var o=new Array(r),t=0;t<r;++t)o[t]=s[t];return o}function M0(s,r){for(;r+1<s.length;r++)s[r]=s[r+1];s.pop()}function P0(s){for(var r=new Array(s.length),o=0;o<r.length;++o)r[o]=s[o].listener||s[o];return r}function F0(s,r){return new Promise(function(o,t){function i(e){s.removeListener(r,l),t(e)}function l(){typeof s.removeListener=="function"&&s.removeListener("error",i),o([].slice.call(arguments))}rm(s,r,l,{once:!0}),r!=="error"&&L0(s,i,{once:!0})})}function L0(s,r,o){typeof s.on=="function"&&rm(s,"error",r,o)}function rm(s,r,o,t){if(typeof s.on=="function")t.once?s.once(r,o):s.on(r,o);else if(typeof s.addEventListener=="function")s.addEventListener(r,function i(l){t.once&&s.removeEventListener(r,i),o(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof s)}});var sm=Z((mS,im)=>{"use strict";var mr=1e3,pr=mr*60,gr=pr*60,Nn=gr*24,U0=Nn*7,j0=Nn*365.25;im.exports=function(s,r){r=r||{};var o=typeof s;if(o==="string"&&s.length>0)return H0(s);if(o==="number"&&isFinite(s))return r.long?z0(s):q0(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};function H0(s){if(s=String(s),!(s.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(r){var o=parseFloat(r[1]),t=(r[2]||"ms").toLowerCase();switch(t){case"years":case"year":case"yrs":case"yr":case"y":return o*j0;case"weeks":case"week":case"w":return o*U0;case"days":case"day":case"d":return o*Nn;case"hours":case"hour":case"hrs":case"hr":case"h":return o*gr;case"minutes":case"minute":case"mins":case"min":case"m":return o*pr;case"seconds":case"second":case"secs":case"sec":case"s":return o*mr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function q0(s){var r=Math.abs(s);return r>=Nn?Math.round(s/Nn)+"d":r>=gr?Math.round(s/gr)+"h":r>=pr?Math.round(s/pr)+"m":r>=mr?Math.round(s/mr)+"s":s+"ms"}function z0(s){var r=Math.abs(s);return r>=Nn?to(s,r,Nn,"day"):r>=gr?to(s,r,gr,"hour"):r>=pr?to(s,r,pr,"minute"):r>=mr?to(s,r,mr,"second"):s+" ms"}function to(s,r,o,t){var i=r>=o*1.5;return Math.round(s/o)+" "+t+(i?"s":"")}});var am=Z((pS,om)=>{"use strict";function B0(s){o.debug=o,o.default=o,o.coerce=m,o.disable=l,o.enable=i,o.enabled=e,o.humanize=sm(),o.destroy=p,Object.keys(s).forEach(b=>{o[b]=s[b]}),o.names=[],o.skips=[],o.formatters={};function r(b){let y=0;for(let f=0;f<b.length;f++)y=(y<<5)-y+b.charCodeAt(f),y|=0;return o.colors[Math.abs(y)%o.colors.length]}o.selectColor=r;function o(b){let y,f=null,S,v;function C(...q){if(!C.enabled)return;let K=C,_e=Number(new Date),we=_e-(y||_e);K.diff=we,K.prev=y,K.curr=_e,y=_e,q[0]=o.coerce(q[0]),typeof q[0]!="string"&&q.unshift("%O");let A=0;q[0]=q[0].replace(/%([a-zA-Z%])/g,(R,k)=>{if(R==="%%")return"%";A++;let ie=o.formatters[k];if(typeof ie=="function"){let Pe=q[A];R=ie.call(K,Pe),q.splice(A,1),A--}return R}),o.formatArgs.call(K,q),(K.log||o.log).apply(K,q)}return C.namespace=b,C.useColors=o.useColors(),C.color=o.selectColor(b),C.extend=t,C.destroy=o.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(S!==o.namespaces&&(S=o.namespaces,v=o.enabled(b)),v),set:q=>{f=q}}),typeof o.init=="function"&&o.init(C),C}function t(b,y){let f=o(this.namespace+(typeof y>"u"?":":y)+b);return f.log=this.log,f}function i(b){o.save(b),o.namespaces=b,o.names=[],o.skips=[];let y,f=(typeof b=="string"?b:"").split(/[\s,]+/),S=f.length;for(y=0;y<S;y++)f[y]&&(b=f[y].replace(/\*/g,".*?"),b[0]==="-"?o.skips.push(new RegExp("^"+b.slice(1)+"$")):o.names.push(new RegExp("^"+b+"$")))}function l(){let b=[...o.names.map(c),...o.skips.map(c).map(y=>"-"+y)].join(",");return o.enable(""),b}function e(b){if(b[b.length-1]==="*")return!0;let y,f;for(y=0,f=o.skips.length;y<f;y++)if(o.skips[y].test(b))return!1;for(y=0,f=o.names.length;y<f;y++)if(o.names[y].test(b))return!0;return!1}function c(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}function m(b){return b instanceof Error?b.stack||b.message:b}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}om.exports=B0});var ro=Z((lt,no)=>{"use strict";lt.formatArgs=$0;lt.save=W0;lt.load=G0;lt.useColors=V0;lt.storage=K0();lt.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();lt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function V0(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function $0(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+no.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;s.splice(1,0,r,"color: inherit");let o=0,t=0;s[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(o++,i==="%c"&&(t=o))}),s.splice(t,0,r)}lt.log=console.debug||console.log||(()=>{});function W0(s){try{s?lt.storage.setItem("debug",s):lt.storage.removeItem("debug")}catch{}}function G0(){let s;try{s=lt.storage.getItem("debug")}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=process.env.DEBUG),s}function K0(){try{return localStorage}catch{}}no.exports=am()(lt);var{formatters:Y0}=no.exports;Y0.j=function(s){try{return JSON.stringify(s)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var Ne=Z((gS,cm)=>{"use strict";function X0(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function lm(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function Z0(s,r,o){return r&&lm(s.prototype,r),o&&lm(s,o),s}var br=ro(),_r="JsSIP";cm.exports=function(){function s(r){X0(this,s),r?(this._debug=br.default("".concat(_r,":").concat(r)),this._warn=br.default("".concat(_r,":WARN:").concat(r)),this._error=br.default("".concat(_r,":ERROR:").concat(r))):(this._debug=br.default(_r),this._warn=br.default("".concat(_r,":WARN")),this._error=br.default("".concat(_r,":ERROR"))),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return Z0(s,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),s}()});var zl=Z((bS,dm)=>{"use strict";var um=dm.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(s){return s.encoding?"rtpmap:%d %s/%s/%s":s.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(s){return s.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(s){return s.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(s){return"extmap:%d"+(s.direction?"/%s":"%v")+(s["encrypt-uri"]?" %s":"%v")+" %s"+(s.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(s){return s.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(s){var r="candidate:%s %d %s %d %s %d typ %s";return r+=s.raddr!=null?" raddr %s rport %d":"%v%v",r+=s.tcptype!=null?" tcptype %s":"%v",s.generation!=null&&(r+=" generation %d"),r+=s["network-id"]!=null?" network-id %d":"%v",r+=s["network-cost"]!=null?" network-cost %d":"%v",r}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(s){var r="ssrc:%d";return s.attribute!=null&&(r+=" %s",s.value!=null&&(r+=":%s")),r}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(s){return s.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(s){return s.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(s){return"imageattr:%s %s %s"+(s.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(s){return"simulcast:%s %s"+(s.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(s){return"ts-refclk:%s"+(s.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(s){var r="mediaclk:";return r+=s.id!=null?"id=%s %s":"%v%s",r+=s.mediaClockValue!=null?"=%s":"",r+=s.rateNumerator!=null?" rate=%s":"",r+=s.rateDenominator!=null?"/%s":"",r}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(um).forEach(function(s){var r=um[s];r.forEach(function(o){o.reg||(o.reg=/(.*)/),o.format||(o.format="%s")})})});var mm=Z($t=>{"use strict";var vr=function(s){return String(Number(s))===s?Number(s):s},J0=function(s,r,o,t){if(t&&!o)r[t]=vr(s[1]);else for(var i=0;i<o.length;i+=1)s[i+1]!=null&&(r[o[i]]=vr(s[i+1]))},Q0=function(s,r,o){var t=s.name&&s.names;s.push&&!r[s.push]?r[s.push]=[]:t&&!r[s.name]&&(r[s.name]={});var i=s.push?{}:t?r[s.name]:r;J0(o.match(s.reg),i,s.names,s.name),s.push&&r[s.push].push(i)},fm=zl(),ey=RegExp.prototype.test.bind(/^([a-z])=(.*)/);$t.parse=function(s){var r={},o=[],t=r;return s.split(/(\r\n|\r|\n)/).filter(ey).forEach(function(i){var l=i[0],e=i.slice(2);l==="m"&&(o.push({rtp:[],fmtp:[]}),t=o[o.length-1]);for(var c=0;c<(fm[l]||[]).length;c+=1){var m=fm[l][c];if(m.reg.test(e))return Q0(m,t,e)}}),r.media=o,r};var hm=function(s,r){var o=r.split(/=(.+)/,2);return o.length===2?s[o[0]]=vr(o[1]):o.length===1&&r.length>1&&(s[o[0]]=void 0),s};$t.parseParams=function(s){return s.split(/;\s?/).reduce(hm,{})};$t.parseFmtpConfig=$t.parseParams;$t.parsePayloads=function(s){return s.toString().split(" ").map(Number)};$t.parseRemoteCandidates=function(s){for(var r=[],o=s.split(" ").map(vr),t=0;t<o.length;t+=3)r.push({component:o[t],ip:o[t+1],port:o[t+2]});return r};$t.parseImageAttributes=function(s){return s.split(" ").map(function(r){return r.substring(1,r.length-1).split(",").reduce(hm,{})})};$t.parseSimulcastStreamList=function(s){return s.split(";").map(function(r){return r.split(",").map(function(o){var t,i=!1;return o[0]!=="~"?t=vr(o):(t=vr(o.substring(1,o.length)),i=!0),{scid:t,paused:i}})})}});var gm=Z((vS,pm)=>{"use strict";var Bl=zl(),ty=/%[sdv%]/g,ny=function(s){var r=1,o=arguments,t=o.length;return s.replace(ty,function(i){if(r>=t)return i;var l=o[r];switch(r+=1,i){case"%%":return"%";case"%s":return String(l);case"%d":return Number(l);case"%v":return""}})},yi=function(s,r,o){var t=r.format instanceof Function?r.format(r.push?o:o[r.name]):r.format,i=[s+"="+t];if(r.names)for(var l=0;l<r.names.length;l+=1){var e=r.names[l];r.name?i.push(o[r.name][e]):i.push(o[r.names[l]])}else i.push(o[r.name]);return ny.apply(null,i)},ry=["v","o","s","i","u","e","p","c","b","t","r","z","a"],iy=["i","c","b","a"];pm.exports=function(s,r){r=r||{},s.version==null&&(s.version=0),s.name==null&&(s.name=" "),s.media.forEach(function(l){l.payloads==null&&(l.payloads="")});var o=r.outerOrder||ry,t=r.innerOrder||iy,i=[];return o.forEach(function(l){Bl[l].forEach(function(e){e.name in s&&s[e.name]!=null?i.push(yi(l,e,s)):e.push in s&&s[e.push]!=null&&s[e.push].forEach(function(c){i.push(yi(l,e,c))})})}),s.media.forEach(function(l){i.push(yi("m",Bl.m[0],l)),t.forEach(function(e){Bl[e].forEach(function(c){c.name in l&&l[c.name]!=null?i.push(yi(e,c,l)):c.push in l&&l[c.push]!=null&&l[c.push].forEach(function(m){i.push(yi(e,c,m))})})})}),i.join(`\r
`)+`\r
`}});var Vl=Z(Wt=>{"use strict";var Mn=mm(),sy=gm();Wt.write=sy;Wt.parse=Mn.parse;Wt.parseParams=Mn.parseParams;Wt.parseFmtpConfig=Mn.parseFmtpConfig;Wt.parsePayloads=Mn.parsePayloads;Wt.parseRemoteCandidates=Mn.parseRemoteCandidates;Wt.parseImageAttributes=Mn.parseImageAttributes;Wt.parseSimulcastStreamList=Mn.parseSimulcastStreamList});var kt=Z((TS,Cm)=>{"use strict";function io(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?io=function(o){return typeof o}:io=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},io(s)}function Gl(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&Wl(s,r)}function Wl(s,r){return Wl=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},Wl(s,r)}function Kl(s){var r=ly();return function(){var t=so(s),i;if(r){var l=so(this).constructor;i=Reflect.construct(t,arguments,l)}else i=t.apply(this,arguments);return oy(this,i)}}function oy(s,r){return r&&(io(r)==="object"||typeof r=="function")?r:ay(s)}function ay(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function ly(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function so(s){return so=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},so(s)}function mt(s,r){var o;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(o=cy(s))||r&&s&&typeof s.length=="number"){o&&(s=o);var t=0,i=function(){};return{s:i,n:function(){return t>=s.length?{done:!0}:{done:!1,value:s[t++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,e=!1,c;return{s:function(){o=s[Symbol.iterator]()},n:function(){var p=o.next();return l=p.done,p},e:function(p){e=!0,c=p},f:function(){try{!l&&o.return!=null&&o.return()}finally{if(e)throw c}}}}function cy(s,r){if(s){if(typeof s=="string")return bm(s,r);var o=Object.prototype.toString.call(s).slice(8,-1);if(o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set")return Array.from(s);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return bm(s,r)}}function bm(s,r){(r==null||r>s.length)&&(r=s.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=s[o];return t}function Ti(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function _m(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function oo(s,r,o){return r&&_m(s.prototype,r),o&&_m(s,o),s}var ym=Vl(),uy=Ne(),Ue=Ie(),ke=Le(),vm=Zs(),dy=Tt(),$l=new uy("SIPMessage"),Tm=function(){function s(r,o,t,i,l,e){if(Ti(this,s),!r||!o||!t)return null;i=i||{},this.ua=t,this.headers={},this.method=r,this.ruri=o,this.body=e,this.extraHeaders=ke.cloneArray(l),this.ua.configuration.extra_headers&&(this.extraHeaders=this.extraHeaders.concat(this.ua.configuration.extra_headers)),i.route_set?this.setHeader("route",i.route_set):t.configuration.use_preloaded_route&&this.setHeader("route","<".concat(t.transport.sip_uri,";lr>")),this.setHeader("via",""),this.setHeader("max-forwards",Ue.MAX_FORWARDS);var c=i.to_uri||o,m=i.to_tag?{tag:i.to_tag}:null,p=typeof i.to_display_name<"u"?i.to_display_name:null;this.to=new vm(c,p,m),this.setHeader("to",this.to.toString());var b=i.from_uri||t.configuration.uri,y={tag:i.from_tag||ke.newTag()},f;typeof i.from_display_name<"u"?f=i.from_display_name:t.configuration.display_name?f=t.configuration.display_name:f=null,this.from=new vm(b,f,y),this.setHeader("from",this.from.toString());var S=i.call_id||t.configuration.jssip_id+ke.createRandomToken(15);this.call_id=S,this.setHeader("call-id",S);var v=i.cseq||Math.floor(Math.random()*1e4);this.cseq=v,this.setHeader("cseq","".concat(v," ").concat(r))}return oo(s,[{key:"setHeader",value:function(o,t){for(var i=new RegExp("^\\s*".concat(o,"\\s*:"),"i"),l=0;l<this.extraHeaders.length;l++)i.test(this.extraHeaders[l])&&this.extraHeaders.splice(l,1);this.headers[ke.headerize(o)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(o){var t=this.headers[ke.headerize(o)];if(t){if(t[0])return t[0]}else{var i=new RegExp("^\\s*".concat(o,"\\s*:"),"i"),l=mt(this.extraHeaders),e;try{for(l.s();!(e=l.n()).done;){var c=e.value;if(i.test(c))return c.substring(c.indexOf(":")+1).trim()}}catch(m){l.e(m)}finally{l.f()}}}},{key:"getHeaders",value:function(o){var t=this.headers[ke.headerize(o)],i=[];if(t){var l=mt(t),e;try{for(l.s();!(e=l.n()).done;){var c=e.value;i.push(c)}}catch(f){l.e(f)}finally{l.f()}return i}else{var m=new RegExp("^\\s*".concat(o,"\\s*:"),"i"),p=mt(this.extraHeaders),b;try{for(p.s();!(b=p.n()).done;){var y=b.value;m.test(y)&&i.push(y.substring(y.indexOf(":")+1).trim())}}catch(f){p.e(f)}finally{p.f()}return i}}},{key:"hasHeader",value:function(o){if(this.headers[ke.headerize(o)])return!0;var t=new RegExp("^\\s*".concat(o,"\\s*:"),"i"),i=mt(this.extraHeaders),l;try{for(i.s();!(l=i.n()).done;){var e=l.value;if(t.test(e))return!0}}catch(c){i.e(c)}finally{i.f()}return!1}},{key:"parseSDP",value:function(o){return!o&&this.sdp?this.sdp:(this.sdp=ym.parse(this.body||""),this.sdp)}},{key:"toString",value:function(){var o="".concat(this.method," ").concat(this.ruri,` SIP/2.0\r
`);for(var t in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,t)){var i=mt(this.headers[t]),l;try{for(i.s();!(l=i.n()).done;){var e=l.value;o+="".concat(t,": ").concat(e,`\r
`)}}catch(S){i.e(S)}finally{i.f()}}var c=mt(this.extraHeaders),m;try{for(c.s();!(m=c.n()).done;){var p=m.value;o+="".concat(p.trim(),`\r
`)}}catch(S){c.e(S)}finally{c.f()}var b=[];switch(this.method){case Ue.REGISTER:b.push("path","gruu");break;case Ue.INVITE:this.ua.configuration.session_timers&&b.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&b.push("gruu"),b.push("ice","replaces");break;case Ue.UPDATE:this.ua.configuration.session_timers&&b.push("timer"),b.push("ice");break}b.push("outbound");var y=this.ua.configuration.user_agent||Ue.USER_AGENT;if(o+="Allow: ".concat(Ue.ALLOWED_METHODS,`\r
`),o+="Supported: ".concat(b,`\r
`),o+="User-Agent: ".concat(y,`\r
`),this.body){var f=ke.str_utf8_length(this.body);o+="Content-Length: ".concat(f,`\r
\r
`),o+=this.body}else o+=`Content-Length: 0\r
\r
`;return o}},{key:"clone",value:function(){var o=new s(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach(function(t){o.headers[t]=this.headers[t].slice()},this),o.body=this.body,o.extraHeaders=ke.cloneArray(this.extraHeaders),o.to=this.to,o.from=this.from,o.call_id=this.call_id,o.cseq=this.cseq,o}}]),s}(),fy=function(s){Gl(o,s);var r=Kl(o);function o(t,i,l,e,c){var m;return Ti(this,o),m=r.call(this,Ue.INVITE,t,i,l,e,c),m.transaction=null,m}return oo(o,[{key:"cancel",value:function(i){this.transaction.cancel(i)}},{key:"clone",value:function(){var i=new o(this.ruri,this.ua);return Object.keys(this.headers).forEach(function(l){i.headers[l]=this.headers[l].slice()},this),i.body=this.body,i.extraHeaders=ke.cloneArray(this.extraHeaders),i.to=this.to,i.from=this.from,i.call_id=this.call_id,i.cseq=this.cseq,i.transaction=this.transaction,i}}]),o}(Tm),wm=function(){function s(){Ti(this,s),this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}return oo(s,[{key:"addHeader",value:function(o,t){var i={raw:t};o=ke.headerize(o),this.headers[o]?this.headers[o].push(i):this.headers[o]=[i]}},{key:"getHeader",value:function(o){var t=this.headers[ke.headerize(o)];if(t){if(t[0])return t[0].raw}else return}},{key:"getHeaders",value:function(o){var t=this.headers[ke.headerize(o)],i=[];if(!t)return[];var l=mt(t),e;try{for(l.s();!(e=l.n()).done;){var c=e.value;i.push(c.raw)}}catch(m){l.e(m)}finally{l.f()}return i}},{key:"hasHeader",value:function(o){return!!this.headers[ke.headerize(o)]}},{key:"parseHeader",value:function(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(o=ke.headerize(o),this.headers[o]){if(t>=this.headers[o].length){$l.debug('not so many "'.concat(o,'" headers present'));return}}else{$l.debug('header "'.concat(o,'" not present'));return}var i=this.headers[o][t],l=i.raw;if(i.parsed)return i.parsed;var e=dy.parse(l,o.replace(/-/g,"_"));if(e===-1){this.headers[o].splice(t,1),$l.debug('error parsing "'.concat(o,'" header field with value "').concat(l,'"'));return}else return i.parsed=e,e}},{key:"s",value:function(o,t){return this.parseHeader(o,t)}},{key:"setHeader",value:function(o,t){var i={raw:t};this.headers[ke.headerize(o)]=[i]}},{key:"parseSDP",value:function(o){return!o&&this.sdp?this.sdp:(this.sdp=ym.parse(this.body||""),this.sdp)}},{key:"toString",value:function(){return this.data}}]),s}(),hy=function(s){Gl(o,s);var r=Kl(o);function o(t){var i;return Ti(this,o),i=r.call(this),i.ua=t,i.headers={},i.ruri=null,i.transport=null,i.server_transaction=null,i}return oo(o,[{key:"reply",value:function(i,l,e,c,m,p){var b=[],y=this.getHeader("To");if(i=i||null,l=l||null,!i||i<100||i>699)throw new TypeError("Invalid status_code: ".concat(i));if(l&&typeof l!="string"&&!(l instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(l));l=l||Ue.REASON_PHRASE[i]||"",e=ke.cloneArray(e),this.ua.configuration.extra_headers&&(e=e.concat(this.ua.configuration.extra_headers));var f="SIP/2.0 ".concat(i," ").concat(l,`\r
`);if(this.method===Ue.INVITE&&i>100&&i<=200){var S=this.getHeaders("record-route"),v=mt(S),C;try{for(v.s();!(C=v.n()).done;){var q=C.value;f+="Record-Route: ".concat(q,`\r
`)}}catch(Pe){v.e(Pe)}finally{v.f()}}var K=this.getHeaders("via"),_e=mt(K),we;try{for(_e.s();!(we=_e.n()).done;){var A=we.value;f+="Via: ".concat(A,`\r
`)}}catch(Pe){_e.e(Pe)}finally{_e.f()}!this.to_tag&&i>100?y+=";tag=".concat(ke.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(y+=";tag=".concat(this.to_tag)),f+="To: ".concat(y,`\r
`),f+="From: ".concat(this.getHeader("From"),`\r
`),f+="Call-ID: ".concat(this.call_id,`\r
`),f+="CSeq: ".concat(this.cseq," ").concat(this.method,`\r
`);var O=mt(e),R;try{for(O.s();!(R=O.n()).done;){var k=R.value;f+="".concat(k.trim(),`\r
`)}}catch(Pe){O.e(Pe)}finally{O.f()}switch(this.method){case Ue.INVITE:this.ua.configuration.session_timers&&b.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&b.push("gruu"),b.push("ice","replaces");break;case Ue.UPDATE:this.ua.configuration.session_timers&&b.push("timer"),c&&b.push("ice"),b.push("replaces")}if(b.push("outbound"),this.method===Ue.OPTIONS?(f+="Allow: ".concat(Ue.ALLOWED_METHODS,`\r
`),f+="Accept: ".concat(Ue.ACCEPTED_BODY_TYPES,`\r
`)):i===405?f+="Allow: ".concat(Ue.ALLOWED_METHODS,`\r
`):i===415&&(f+="Accept: ".concat(Ue.ACCEPTED_BODY_TYPES,`\r
`)),f+="Supported: ".concat(b,`\r
`),c){var ie=ke.str_utf8_length(c);f+=`Content-Type: application/sdp\r
`,f+="Content-Length: ".concat(ie,`\r
\r
`),f+=c}else f+="Content-Length: ".concat(0,`\r
\r
`);this.server_transaction.receiveResponse(i,f,m,p)}},{key:"reply_sl",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,e=this.getHeaders("via");if(!i||i<100||i>699)throw new TypeError("Invalid status_code: ".concat(i));if(l&&typeof l!="string"&&!(l instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(l));l=l||Ue.REASON_PHRASE[i]||"";var c="SIP/2.0 ".concat(i," ").concat(l,`\r
`),m=mt(e),p;try{for(m.s();!(p=m.n()).done;){var b=p.value;c+="Via: ".concat(b,`\r
`)}}catch(C){m.e(C)}finally{m.f()}var y=this.getHeader("To");if(!this.to_tag&&i>100?y+=";tag=".concat(ke.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(y+=";tag=".concat(this.to_tag)),c+="To: ".concat(y,`\r
`),c+="From: ".concat(this.getHeader("From"),`\r
`),c+="Call-ID: ".concat(this.call_id,`\r
`),c+="CSeq: ".concat(this.cseq," ").concat(this.method,`\r
`),this.ua.configuration.extra_headers){var f=mt(this.ua.configuration.extra_headers),S;try{for(f.s();!(S=f.n()).done;){var v=S.value;c+="".concat(v.trim(),`\r
`)}}catch(C){f.e(C)}finally{f.f()}}c+="Content-Length: ".concat(0,`\r
\r
`),this.transport.send(c)}}]),o}(wm),my=function(s){Gl(o,s);var r=Kl(o);function o(){var t;return Ti(this,o),t=r.call(this),t.headers={},t.status_code=null,t.reason_phrase=null,t}return o}(wm);Cm.exports={OutgoingRequest:Tm,InitialOutgoingInviteRequest:fy,IncomingRequest:hy,IncomingResponse:my}});var Am=Z((wS,Sm)=>{"use strict";function py(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Em(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function gy(s,r,o){return r&&Em(s.prototype,r),o&&Em(s,o),s}var by=Ne(),Gt=Le(),wt=new by("DigestAuthentication");Sm.exports=function(){function s(r){py(this,s),this._credentials=r,this._cnonce=null,this._nc=0,this._ncHex="00000000",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}return gy(s,[{key:"get",value:function(o){switch(o){case"realm":return this._realm;case"ha1":return this._ha1;default:wt.warn('get() | cannot get "%s" parameter',o);return}}},{key:"authenticate",value:function(o,t){var i=o.method,l=o.ruri,e=o.body,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(this._algorithm=t.algorithm,this._realm=t.realm,this._nonce=t.nonce,this._opaque=t.opaque,this._stale=t.stale,this._algorithm){if(this._algorithm!=="MD5")return wt.warn('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this._algorithm="MD5";if(!this._nonce)return wt.warn("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this._realm)return wt.warn("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return wt.warn("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this._credentials.realm!==this._realm)return wt.warn('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this._credentials.realm,this._realm),!1}if(t.qop)if(t.qop.indexOf("auth-int")>-1)this._qop="auth-int";else if(t.qop.indexOf("auth")>-1)this._qop="auth";else return wt.warn('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;else this._qop=null;this._method=i,this._uri=l,this._cnonce=c||Gt.createRandomToken(12),this._nc+=1;var m=Number(this._nc).toString(16);this._ncHex="00000000".substr(0,8-m.length)+m,this._nc===4294967296&&(this._nc=1,this._ncHex="00000001"),this._credentials.password?this._ha1=Gt.calculateMD5("".concat(this._credentials.username,":").concat(this._realm,":").concat(this._credentials.password)):this._ha1=this._credentials.ha1;var p,b;return this._qop==="auth"?(p="".concat(this._method,":").concat(this._uri),b=Gt.calculateMD5(p),wt.debug('authenticate() | using qop=auth [a2:"%s"]',p),this._response=Gt.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth:").concat(b))):this._qop==="auth-int"?(p="".concat(this._method,":").concat(this._uri,":").concat(Gt.calculateMD5(e||"")),b=Gt.calculateMD5(p),wt.debug('authenticate() | using qop=auth-int [a2:"%s"]',p),this._response=Gt.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth-int:").concat(b))):this._qop===null&&(p="".concat(this._method,":").concat(this._uri),b=Gt.calculateMD5(p),wt.debug('authenticate() | using qop=null [a2:"%s"]',p),this._response=Gt.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(b))),wt.debug("authenticate() | response generated"),!0}},{key:"toString",value:function(){var o=[];if(!this._response)throw new Error("response field does not exist, cannot generate Authorization header");return o.push("algorithm=".concat(this._algorithm)),o.push('username="'.concat(this._credentials.username,'"')),o.push('realm="'.concat(this._realm,'"')),o.push('nonce="'.concat(this._nonce,'"')),o.push('uri="'.concat(this._uri,'"')),o.push('response="'.concat(this._response,'"')),this._opaque&&o.push('opaque="'.concat(this._opaque,'"')),this._qop&&(o.push("qop=".concat(this._qop)),o.push('cnonce="'.concat(this._cnonce,'"')),o.push("nc=".concat(this._ncHex))),"Digest ".concat(o.join(", "))}}]),s}()});var Yl=Z((CS,Im)=>{"use strict";var Kt=500,_y=4e3,Rm=5e3;Im.exports={T1:Kt,T2:_y,T4:Rm,TIMER_B:64*Kt,TIMER_D:0*Kt,TIMER_F:64*Kt,TIMER_H:64*Kt,TIMER_I:0*Kt,TIMER_J:0*Kt,TIMER_K:0*Rm,TIMER_L:64*Kt,TIMER_M:64*Kt,PROVISIONAL_RESPONSE_INTERVAL:6e4}});var yr=Z((ES,Nm)=>{"use strict";function co(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?co=function(o){return typeof o}:co=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},co(s)}function Ci(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function xm(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function Ei(s,r,o){return r&&xm(s.prototype,r),o&&xm(s,o),s}function Si(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&Xl(s,r)}function Xl(s,r){return Xl=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},Xl(s,r)}function Ai(s){var r=yy();return function(){var t=uo(s),i;if(r){var l=uo(this).constructor;i=Reflect.construct(t,arguments,l)}else i=t.apply(this,arguments);return vy(this,i)}}function vy(s,r){return r&&(co(r)==="object"||typeof r=="function")?r:mn(s)}function mn(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function yy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function uo(s){return uo=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},uo(s)}var Ri=Vt().EventEmitter,Ii=Ne(),wi=Ie(),Dm=kt(),Nt=Yl(),Om=new Ii("NonInviteClientTransaction"),ao=new Ii("InviteClientTransaction"),Ty=new Ii("AckClientTransaction"),km=new Ii("NonInviteServerTransaction"),lo=new Ii("InviteServerTransaction"),N={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},wy=function(s){Si(o,s);var r=Ai(o);function o(t,i,l,e){var c;Ci(this,o),c=r.call(this),c.type=N.NON_INVITE_CLIENT,c.id="z9hG4bK".concat(Math.floor(Math.random()*1e7)),c.ua=t,c.transport=i,c.request=l,c.eventHandlers=e;var m="SIP/2.0/".concat(i.via_transport);return m+=" ".concat(t.configuration.via_host,";branch=").concat(c.id),c.request.setHeader("via",m),c.ua.newTransaction(mn(c)),c}return Ei(o,[{key:"stateChanged",value:function(i){this.state=i,this.emit("stateChanged")}},{key:"send",value:function(){var i=this;this.stateChanged(N.STATUS_TRYING),this.F=setTimeout(function(){i.timer_F()},Nt.TIMER_F),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){Om.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}},{key:"timer_F",value:function(){Om.debug("Timer F expired for transaction ".concat(this.id)),this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}},{key:"timer_K",value:function(){this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"receiveResponse",value:function(i){var l=this,e=i.status_code;if(e<200)switch(this.state){case N.STATUS_TRYING:case N.STATUS_PROCEEDING:this.stateChanged(N.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(i);break}else switch(this.state){case N.STATUS_TRYING:case N.STATUS_PROCEEDING:this.stateChanged(N.STATUS_COMPLETED),clearTimeout(this.F),e===408?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(i),this.K=setTimeout(function(){l.timer_K()},Nt.TIMER_K);break;case N.STATUS_COMPLETED:break}}},{key:"C",get:function(){return N}}]),o}(Ri),Cy=function(s){Si(o,s);var r=Ai(o);function o(t,i,l,e){var c;Ci(this,o),c=r.call(this),c.type=N.INVITE_CLIENT,c.id="z9hG4bK".concat(Math.floor(Math.random()*1e7)),c.ua=t,c.transport=i,c.request=l,c.eventHandlers=e,l.transaction=mn(c);var m="SIP/2.0/".concat(i.via_transport);return m+=" ".concat(t.configuration.via_host,";branch=").concat(c.id),c.request.setHeader("via",m),c.ua.newTransaction(mn(c)),c}return Ei(o,[{key:"stateChanged",value:function(i){this.state=i,this.emit("stateChanged")}},{key:"send",value:function(){var i=this;this.stateChanged(N.STATUS_CALLING),this.B=setTimeout(function(){i.timer_B()},Nt.TIMER_B),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==N.STATUS_ACCEPTED&&(ao.debug("transport error occurred, deleting transaction ".concat(this.id)),this.eventHandlers.onTransportError()),this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_M",value:function(){ao.debug("Timer M expired for transaction ".concat(this.id)),this.state===N.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"timer_B",value:function(){ao.debug("Timer B expired for transaction ".concat(this.id)),this.state===N.STATUS_CALLING&&(this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}},{key:"timer_D",value:function(){ao.debug("Timer D expired for transaction ".concat(this.id)),clearTimeout(this.B),this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"sendACK",value:function(i){var l=this,e=new Dm.OutgoingRequest(wi.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});e.setHeader("from",this.request.getHeader("from")),e.setHeader("via",this.request.getHeader("via")),e.setHeader("to",i.getHeader("to")),this.D=setTimeout(function(){l.timer_D()},Nt.TIMER_D),this.transport.send(e)}},{key:"cancel",value:function(i){if(this.state===N.STATUS_PROCEEDING){var l=new Dm.OutgoingRequest(wi.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});l.setHeader("from",this.request.getHeader("from")),l.setHeader("via",this.request.getHeader("via")),l.setHeader("to",this.request.getHeader("to")),i&&l.setHeader("reason",i),this.transport.send(l)}}},{key:"receiveResponse",value:function(i){var l=this,e=i.status_code;if(e>=100&&e<=199)switch(this.state){case N.STATUS_CALLING:this.stateChanged(N.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(i);break;case N.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(i);break}else if(e>=200&&e<=299)switch(this.state){case N.STATUS_CALLING:case N.STATUS_PROCEEDING:this.stateChanged(N.STATUS_ACCEPTED),this.M=setTimeout(function(){l.timer_M()},Nt.TIMER_M),this.eventHandlers.onReceiveResponse(i);break;case N.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(i);break}else if(e>=300&&e<=699)switch(this.state){case N.STATUS_CALLING:case N.STATUS_PROCEEDING:this.stateChanged(N.STATUS_COMPLETED),this.sendACK(i),this.eventHandlers.onReceiveResponse(i);break;case N.STATUS_COMPLETED:this.sendACK(i);break}}},{key:"C",get:function(){return N}}]),o}(Ri),Ey=function(s){Si(o,s);var r=Ai(o);function o(t,i,l,e){var c;Ci(this,o),c=r.call(this),c.id="z9hG4bK".concat(Math.floor(Math.random()*1e7)),c.transport=i,c.request=l,c.eventHandlers=e;var m="SIP/2.0/".concat(i.via_transport);return m+=" ".concat(t.configuration.via_host,";branch=").concat(c.id),c.request.setHeader("via",m),c}return Ei(o,[{key:"send",value:function(){this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){Ty.debug("transport error occurred for transaction ".concat(this.id)),this.eventHandlers.onTransportError()}},{key:"C",get:function(){return N}}]),o}(Ri),Sy=function(s){Si(o,s);var r=Ai(o);function o(t,i,l){var e;return Ci(this,o),e=r.call(this),e.type=N.NON_INVITE_SERVER,e.id=l.via_branch,e.ua=t,e.transport=i,e.request=l,e.last_response="",l.server_transaction=mn(e),e.state=N.STATUS_TRYING,t.newTransaction(mn(e)),e}return Ei(o,[{key:"stateChanged",value:function(i){this.state=i,this.emit("stateChanged")}},{key:"timer_J",value:function(){km.debug("Timer J expired for transaction ".concat(this.id)),this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,km.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.J),this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"receiveResponse",value:function(i,l,e,c){var m=this;if(i===100)switch(this.state){case N.STATUS_TRYING:this.stateChanged(N.STATUS_PROCEEDING),this.transport.send(l)||this.onTransportError();break;case N.STATUS_PROCEEDING:this.last_response=l,this.transport.send(l)?e&&e():(this.onTransportError(),c&&c());break}else if(i>=200&&i<=699)switch(this.state){case N.STATUS_TRYING:case N.STATUS_PROCEEDING:this.stateChanged(N.STATUS_COMPLETED),this.last_response=l,this.J=setTimeout(function(){m.timer_J()},Nt.TIMER_J),this.transport.send(l)?e&&e():(this.onTransportError(),c&&c());break;case N.STATUS_COMPLETED:break}}},{key:"C",get:function(){return N}}]),o}(Ri),Ay=function(s){Si(o,s);var r=Ai(o);function o(t,i,l){var e;return Ci(this,o),e=r.call(this),e.type=N.INVITE_SERVER,e.id=l.via_branch,e.ua=t,e.transport=i,e.request=l,e.last_response="",l.server_transaction=mn(e),e.state=N.STATUS_PROCEEDING,t.newTransaction(mn(e)),e.resendProvisionalTimer=null,l.reply(100),e}return Ei(o,[{key:"stateChanged",value:function(i){this.state=i,this.emit("stateChanged")}},{key:"timer_H",value:function(){lo.debug("Timer H expired for transaction ".concat(this.id)),this.state===N.STATUS_COMPLETED&&lo.debug("ACK not received, dialog will be terminated"),this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_I",value:function(){this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_L",value:function(){lo.debug("Timer L expired for transaction ".concat(this.id)),this.state===N.STATUS_ACCEPTED&&(this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,lo.debug("transport error occurred, deleting transaction ".concat(this.id)),this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(N.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"resend_provisional",value:function(){this.transport.send(this.last_response)||this.onTransportError()}},{key:"receiveResponse",value:function(i,l,e,c){var m=this;if(i>=100&&i<=199)switch(this.state){case N.STATUS_PROCEEDING:this.transport.send(l)||this.onTransportError(),this.last_response=l;break}if(i>100&&i<=199&&this.state===N.STATUS_PROCEEDING)this.resendProvisionalTimer===null&&(this.resendProvisionalTimer=setInterval(function(){m.resend_provisional()},Nt.PROVISIONAL_RESPONSE_INTERVAL));else if(i>=200&&i<=299)switch(this.state){case N.STATUS_PROCEEDING:this.stateChanged(N.STATUS_ACCEPTED),this.last_response=l,this.L=setTimeout(function(){m.timer_L()},Nt.TIMER_L),this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case N.STATUS_ACCEPTED:this.transport.send(l)?e&&e():(this.onTransportError(),c&&c());break}else if(i>=300&&i<=699)switch(this.state){case N.STATUS_PROCEEDING:this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(l)?(this.stateChanged(N.STATUS_COMPLETED),this.H=setTimeout(function(){m.timer_H()},Nt.TIMER_H),e&&e()):(this.onTransportError(),c&&c());break}}},{key:"C",get:function(){return N}}]),o}(Ri);function Ry(s,r){var o=s._transactions,t;switch(r.method){case wi.INVITE:if(t=o.ist[r.via_branch],t){switch(t.state){case N.STATUS_PROCEEDING:t.transport.send(t.last_response);break;case N.STATUS_ACCEPTED:break}return!0}break;case wi.ACK:if(t=o.ist[r.via_branch],t){if(t.state===N.STATUS_ACCEPTED)return!1;if(t.state===N.STATUS_COMPLETED)return t.state=N.STATUS_CONFIRMED,t.I=setTimeout(function(){t.timer_I()},Nt.TIMER_I),!0}else return!1;break;case wi.CANCEL:return t=o.ist[r.via_branch],t?(r.reply_sl(200),t.state!==N.STATUS_PROCEEDING):(r.reply_sl(481),!0);default:if(t=o.nist[r.via_branch],t){switch(t.state){case N.STATUS_TRYING:break;case N.STATUS_PROCEEDING:case N.STATUS_COMPLETED:t.transport.send(t.last_response);break}return!0}break}}Nm.exports={C:N,NonInviteClientTransaction:wy,InviteClientTransaction:Cy,AckClientTransaction:Ey,NonInviteServerTransaction:Sy,InviteServerTransaction:Ay,checkTransaction:Ry}});var Tr=Z((SS,Fm)=>{"use strict";function Iy(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Mm(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function xy(s,r,o){return r&&Mm(s.prototype,r),o&&Mm(s,o),s}var Dy=Ne(),Pm=Ie(),Oy=Am(),Zl=yr(),ky=new Dy("RequestSender"),Jl={onRequestTimeout:function(){},onTransportError:function(){},onReceiveResponse:function(){},onAuthenticated:function(){}};Fm.exports=function(){function s(r,o,t){Iy(this,s),this._ua=r,this._eventHandlers=t,this._method=o.method,this._request=o,this._auth=null,this._challenged=!1,this._staled=!1;for(var i in Jl)Object.prototype.hasOwnProperty.call(Jl,i)&&(this._eventHandlers[i]||(this._eventHandlers[i]=Jl[i]));r.status===r.C.STATUS_USER_CLOSED&&(this._method!==Pm.BYE||this._method!==Pm.ACK)&&this._eventHandlers.onTransportError()}return xy(s,[{key:"send",value:function(){var o=this,t={onRequestTimeout:function(){o._eventHandlers.onRequestTimeout()},onTransportError:function(){o._eventHandlers.onTransportError()},onReceiveResponse:function(l){o._receiveResponse(l)}};switch(this._method){case"INVITE":this.clientTransaction=new Zl.InviteClientTransaction(this._ua,this._ua.transport,this._request,t);break;case"ACK":this.clientTransaction=new Zl.AckClientTransaction(this._ua,this._ua.transport,this._request,t);break;default:this.clientTransaction=new Zl.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,t)}this._ua._configuration.authorization_jwt&&this._request.setHeader("Authorization",this._ua._configuration.authorization_jwt),this.clientTransaction.send()}},{key:"_receiveResponse",value:function(o){var t,i,l=o.status_code;if((l===401||l===407)&&(this._ua.configuration.password!==null||this._ua.configuration.ha1!==null)){if(o.status_code===401?(t=o.parseHeader("www-authenticate"),i="authorization"):(t=o.parseHeader("proxy-authenticate"),i="proxy-authorization"),!t){ky.debug("".concat(o.status_code," with wrong or missing challenge, cannot authenticate")),this._eventHandlers.onReceiveResponse(o);return}if(!this._challenged||!this._staled&&t.stale===!0){if(this._auth||(this._auth=new Oy({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),!this._auth.authenticate(this._request,t)){this._eventHandlers.onReceiveResponse(o);return}this._challenged=!0,this._ua.set("realm",this._auth.get("realm")),this._ua.set("ha1",this._auth.get("ha1")),t.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader("cseq","".concat(this._request.cseq," ").concat(this._method)),this._request.setHeader(i,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()}else this._eventHandlers.onReceiveResponse(o)}else this._eventHandlers.onReceiveResponse(o)}}]),s}()});var qm=Z((AS,Hm)=>{"use strict";function Ny(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Lm(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function My(s,r,o){return r&&Lm(s.prototype,r),o&&Lm(s,o),s}var Py=Ne(),Ql=Le(),Pn=Ie(),Um=kt(),jm=Tr(),xi=new Py("Registrator"),fo=10;Hm.exports=function(){function s(r,o){Ny(this,s),this._reg_id=1,this._ua=r,this._transport=o,this._registrar=r.configuration.registrar_server,this._expires=r.configuration.register_expires,this._call_id=Ql.createRandomToken(22),this._cseq=0,this._to_uri=r.configuration.uri,this._registrationTimer=null,this._registering=!1,this._registered=!1,this._contact=this._ua.contact.toString(),this._contact+=";+sip.ice",this._extraHeaders=[],this._extraContactParams="",this._sipInstance='"<urn:uuid:'.concat(this._ua.configuration.instance_id,'>"'),this._contact+=";reg-id=".concat(this._reg_id),this._contact+=";+sip.instance=".concat(this._sipInstance)}return My(s,[{key:"setExtraHeaders",value:function(o){Array.isArray(o)||(o=[]),this._extraHeaders=o.slice()}},{key:"setExtraContactParams",value:function(o){o instanceof Object||(o={}),this._extraContactParams="";for(var t in o)if(Object.prototype.hasOwnProperty.call(o,t)){var i=o[t];this._extraContactParams+=";".concat(t),i&&(this._extraContactParams+="=".concat(i))}}},{key:"register",value:function(){var o=this;if(this._registering){xi.debug("Register request in progress...");return}var t=this._extraHeaders.slice();t.push("Contact: ".concat(this._contact,";expires=").concat(this._expires).concat(this._extraContactParams)),t.push("Expires: ".concat(this._expires));var i=new Um.OutgoingRequest(Pn.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},t),l=new jm(this._ua,i,{onRequestTimeout:function(){o._registrationFailure(null,Pn.causes.REQUEST_TIMEOUT)},onTransportError:function(){o._registrationFailure(null,Pn.causes.CONNECTION_ERROR)},onAuthenticated:function(){o._cseq+=1},onReceiveResponse:function(c){if(c.cseq===o._cseq)switch(o._registrationTimer!==null&&(clearTimeout(o._registrationTimer),o._registrationTimer=null),!0){case/^1[0-9]{2}$/.test(c.status_code):break;case/^2[0-9]{2}$/.test(c.status_code):{if(o._registering=!1,!c.hasHeader("Contact")){xi.debug("no Contact header in response to REGISTER, response ignored");break}var m=c.headers.Contact.reduce(function(S,v){return S.concat(v.parsed)},[]),p=m.find(function(S){return o._sipInstance===S.getParam("+sip.instance")&&o._reg_id===parseInt(S.getParam("reg-id"))});if(p||(p=m.find(function(S){return S.uri.user===o._ua.contact.uri.user})),!p){xi.debug("no Contact header pointing to us, response ignored");break}var b=p.getParam("expires");!b&&c.hasHeader("expires")&&(b=c.getHeader("expires")),b||(b=o._expires),b=Number(b),b<fo&&(b=fo);var y=b>64?b*1e3/2+Math.floor((b/2-32)*1e3*Math.random()):b*1e3-5e3;o._registrationTimer=setTimeout(function(){o._registrationTimer=null,o._ua.listeners("registrationExpiring").length===0?o.register():o._ua.emit("registrationExpiring")},y),p.hasParam("temp-gruu")&&(o._ua.contact.temp_gruu=p.getParam("temp-gruu").replace(/"/g,"")),p.hasParam("pub-gruu")&&(o._ua.contact.pub_gruu=p.getParam("pub-gruu").replace(/"/g,"")),o._registered||(o._registered=!0,o._ua.registered({response:c}));break}case/^423$/.test(c.status_code):{c.hasHeader("min-expires")?(o._expires=Number(c.getHeader("min-expires")),o._expires<fo&&(o._expires=fo),o.register()):(xi.debug("423 response received for REGISTER without Min-Expires"),o._registrationFailure(c,Pn.causes.SIP_FAILURE_CODE));break}default:{var f=Ql.sipErrorCause(c.status_code);o._registrationFailure(c,f)}}}});this._registering=!0,l.send()}},{key:"unregister",value:function(){var o=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this._registered){xi.debug("already unregistered");return}this._registered=!1,this._registrationTimer!==null&&(clearTimeout(this._registrationTimer),this._registrationTimer=null);var i=this._extraHeaders.slice();t.all?i.push("Contact: *".concat(this._extraContactParams)):i.push("Contact: ".concat(this._contact,";expires=0").concat(this._extraContactParams)),i.push("Expires: 0");var l=new Um.OutgoingRequest(Pn.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},i),e=new jm(this._ua,l,{onRequestTimeout:function(){o._unregistered(null,Pn.causes.REQUEST_TIMEOUT)},onTransportError:function(){o._unregistered(null,Pn.causes.CONNECTION_ERROR)},onAuthenticated:function(){o._cseq+=1},onReceiveResponse:function(m){switch(!0){case/^1[0-9]{2}$/.test(m.status_code):break;case/^2[0-9]{2}$/.test(m.status_code):o._unregistered(m);break;default:{var p=Ql.sipErrorCause(m.status_code);o._unregistered(m,p)}}}});e.send()}},{key:"close",value:function(){this._registered&&this.unregister()}},{key:"onTransportClosed",value:function(){this._registering=!1,this._registrationTimer!==null&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),this._registered&&(this._registered=!1,this._ua.unregistered({}))}},{key:"_registrationFailure",value:function(o,t){this._registering=!1,this._ua.registrationFailed({response:o||null,cause:t}),this._registered&&(this._registered=!1,this._ua.unregistered({response:o||null,cause:t}))}},{key:"_unregistered",value:function(o,t){this._registering=!1,this._registered=!1,this._ua.unregistered({response:o||null,cause:t||null})}},{key:"registered",get:function(){return this._registered}}]),s}()});var Vm=Z((RS,Bm)=>{"use strict";function Fy(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function zm(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function Ly(s,r,o){return r&&zm(s.prototype,r),o&&zm(s,o),s}var ec=Ie(),ho=yr(),Uy=Tr(),tc={onRequestTimeout:function(){},onTransportError:function(){},onSuccessResponse:function(){},onErrorResponse:function(){},onAuthenticated:function(){},onDialogError:function(){}};Bm.exports=function(){function s(r,o,t){Fy(this,s),this._dialog=r,this._ua=r._ua,this._request=o,this._eventHandlers=t,this._reattempt=!1,this._reattemptTimer=null;for(var i in tc)Object.prototype.hasOwnProperty.call(tc,i)&&(this._eventHandlers[i]||(this._eventHandlers[i]=tc[i]))}return Ly(s,[{key:"send",value:function(){var o=this,t=new Uy(this._ua,this._request,{onRequestTimeout:function(){o._eventHandlers.onRequestTimeout()},onTransportError:function(){o._eventHandlers.onTransportError()},onAuthenticated:function(e){o._eventHandlers.onAuthenticated(e)},onReceiveResponse:function(e){o._receiveResponse(e)}});if(t.send(),(this._request.method===ec.INVITE||this._request.method===ec.UPDATE&&this._request.body)&&t.clientTransaction.state!==ho.C.STATUS_TERMINATED){this._dialog.uac_pending_reply=!0;var i=function l(){(t.clientTransaction.state===ho.C.STATUS_ACCEPTED||t.clientTransaction.state===ho.C.STATUS_COMPLETED||t.clientTransaction.state===ho.C.STATUS_TERMINATED)&&(t.clientTransaction.removeListener("stateChanged",l),o._dialog.uac_pending_reply=!1)};t.clientTransaction.on("stateChanged",i)}}},{key:"_receiveResponse",value:function(o){var t=this;o.status_code===408||o.status_code===481?this._eventHandlers.onDialogError(o):o.method===ec.INVITE&&o.status_code===491?this._reattempt?o.status_code>=200&&o.status_code<300?this._eventHandlers.onSuccessResponse(o):o.status_code>=300&&this._eventHandlers.onErrorResponse(o):(this._request.cseq=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout(function(){t._dialog.isTerminated()||(t._reattempt=!0,t.send())},1e3)):o.status_code>=200&&o.status_code<300?this._eventHandlers.onSuccessResponse(o):o.status_code>=300&&this._eventHandlers.onErrorResponse(o)}},{key:"request",get:function(){return this._request}}]),s}()});var Ym=Z((IS,Km)=>{"use strict";function jy(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function $m(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function Wm(s,r,o){return r&&$m(s.prototype,r),o&&$m(s,o),s}var Hy=Ne(),Gm=kt(),pn=Ie(),Di=yr(),qy=Vm(),nc=Le(),rc=new Hy("Dialog"),gn={STATUS_EARLY:1,STATUS_CONFIRMED:2,STATUS_TERMINATED:3};Km.exports=function(){Wm(s,null,[{key:"C",get:function(){return gn}}]);function s(r,o,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:gn.STATUS_CONFIRMED;if(jy(this,s),this._owner=r,this._ua=r._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!o.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};o instanceof Gm.IncomingResponse&&(i=o.status_code<200?gn.STATUS_EARLY:gn.STATUS_CONFIRMED);var l=o.parseHeader("contact");t==="UAS"?(this._id={call_id:o.call_id,local_tag:o.to_tag,remote_tag:o.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=i,this._remote_seqnum=o.cseq,this._local_uri=o.parseHeader("to").uri,this._remote_uri=o.parseHeader("from").uri,this._remote_target=l.uri,this._route_set=o.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum):t==="UAC"&&(this._id={call_id:o.call_id,local_tag:o.from_tag,remote_tag:o.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=i,this._local_seqnum=o.cseq,this._local_uri=o.parseHeader("from").uri,this._remote_uri=o.parseHeader("to").uri,this._remote_target=l.uri,this._route_set=o.getHeaders("record-route").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),rc.debug("new ".concat(t," dialog created with status ").concat(this._state===gn.STATUS_EARLY?"EARLY":"CONFIRMED"))}return Wm(s,[{key:"isTerminated",value:function(){return this._status===gn.STATUS_TERMINATED}},{key:"update",value:function(o,t){this._state=gn.STATUS_CONFIRMED,rc.debug("dialog ".concat(this._id.toString(),"  changed to CONFIRMED state")),t==="UAC"&&(this._route_set=o.getHeaders("record-route").reverse())}},{key:"terminate",value:function(){rc.debug("dialog ".concat(this._id.toString()," deleted")),this._ua.destroyDialog(this),this._state=gn.STATUS_TERMINATED}},{key:"sendRequest",value:function(o){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=nc.cloneArray(i.extraHeaders),e=nc.cloneObject(i.eventHandlers),c=i.body||null,m=this._createRequest(o,l,c);e.onAuthenticated=function(){t._local_seqnum+=1};var p=new qy(this,m,e);return p.send(),m}},{key:"receiveRequest",value:function(o){this._checkInDialogRequest(o)&&(o.method===pn.ACK&&this._ack_seqnum!==null?this._ack_seqnum=null:o.method===pn.INVITE&&(this._ack_seqnum=o.cseq),this._owner.receiveRequest(o))}},{key:"_createRequest",value:function(o,t,i){t=nc.cloneArray(t),this._local_seqnum||(this._local_seqnum=Math.floor(Math.random()*1e4));var l=o===pn.CANCEL||o===pn.ACK?this._local_seqnum:this._local_seqnum+=1,e=new Gm.OutgoingRequest(o,this._remote_target,this._ua,{cseq:l,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},t,i);return e}},{key:"_checkInDialogRequest",value:function(o){var t=this;if(!this._remote_seqnum)this._remote_seqnum=o.cseq;else if(o.cseq<this._remote_seqnum)if(o.method===pn.ACK){if(this._ack_seqnum===null||o.cseq!==this._ack_seqnum)return!1}else return o.reply(500),!1;else o.cseq>this._remote_seqnum&&(this._remote_seqnum=o.cseq);if(o.method===pn.INVITE||o.method===pn.UPDATE&&o.body){if(this._uac_pending_reply===!0)o.reply(491);else if(this._uas_pending_reply===!0){var i=(Math.random()*10|0)+1;return o.reply(500,null,["Retry-After:".concat(i)]),!1}else{this._uas_pending_reply=!0;var l=function e(){(o.server_transaction.state===Di.C.STATUS_ACCEPTED||o.server_transaction.state===Di.C.STATUS_COMPLETED||o.server_transaction.state===Di.C.STATUS_TERMINATED)&&(o.server_transaction.removeListener("stateChanged",e),t._uas_pending_reply=!1)};o.server_transaction.on("stateChanged",l)}o.hasHeader("contact")&&o.server_transaction.on("stateChanged",function(){o.server_transaction.state===Di.C.STATUS_ACCEPTED&&(t._remote_target=o.parseHeader("contact").uri)})}else o.method===pn.NOTIFY&&o.hasHeader("contact")&&o.server_transaction.on("stateChanged",function(){o.server_transaction.state===Di.C.STATUS_COMPLETED&&(t._remote_target=o.parseHeader("contact").uri)});return!0}},{key:"id",get:function(){return this._id}},{key:"local_seqnum",get:function(){return this._local_seqnum},set:function(o){this._local_seqnum=o}},{key:"owner",get:function(){return this._owner}},{key:"uac_pending_reply",get:function(){return this._uac_pending_reply},set:function(o){this._uac_pending_reply=o}},{key:"uas_pending_reply",get:function(){return this._uas_pending_reply}}]),s}()});var Qm=Z((xS,sc)=>{"use strict";function mo(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mo=function(o){return typeof o}:mo=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},mo(s)}function zy(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Xm(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function By(s,r,o){return r&&Xm(s.prototype,r),o&&Xm(s,o),s}function Vy(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&ic(s,r)}function ic(s,r){return ic=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},ic(s,r)}function $y(s){var r=Ky();return function(){var t=po(s),i;if(r){var l=po(this).constructor;i=Reflect.construct(t,arguments,l)}else i=t.apply(this,arguments);return Wy(this,i)}}function Wy(s,r){return r&&(mo(r)==="object"||typeof r=="function")?r:Gy(s)}function Gy(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Ky(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function po(s){return po=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},po(s)}var Yy=Vt().EventEmitter,Xy=Ne(),Zy=Ie(),Jy=zt(),Zm=Le(),Qy=new Xy("RTCSession:DTMF"),Jm={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};sc.exports=function(s){Vy(o,s);var r=$y(o);function o(t){var i;return zy(this,o),i=r.call(this),i._session=t,i._direction=null,i._tone=null,i._duration=null,i._request=null,i}return By(o,[{key:"send",value:function(i){var l=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i===void 0)throw new TypeError("Not enough arguments");if(this._direction="outgoing",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new Jy.InvalidStateError(this._session.status);var c=Zm.cloneArray(e.extraHeaders);if(this.eventHandlers=Zm.cloneObject(e.eventHandlers),typeof i=="string")i=i.toUpperCase();else if(typeof i=="number")i=i.toString();else throw new TypeError("Invalid tone: ".concat(i));if(i.match(/^[0-9A-DR#*]$/))this._tone=i;else throw new TypeError("Invalid tone: ".concat(i));this._duration=e.duration,c.push("Content-Type: application/dtmf-relay");var m="Signal=".concat(this._tone,`\r
`);m+="Duration=".concat(this._duration),this._session.newDTMF({originator:"local",dtmf:this,request:this._request}),this._session.sendRequest(Zy.INFO,{extraHeaders:c,eventHandlers:{onSuccessResponse:function(b){l.emit("succeeded",{originator:"remote",response:b})},onErrorResponse:function(b){l.eventHandlers.onFailed&&l.eventHandlers.onFailed(),l.emit("failed",{originator:"remote",response:b})},onRequestTimeout:function(){l._session.onRequestTimeout()},onTransportError:function(){l._session.onTransportError()},onDialogError:function(){l._session.onDialogError()}},body:m})}},{key:"init_incoming",value:function(i){var l=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,e=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;if(this._direction="incoming",this._request=i,i.reply(200),i.body){var c=i.body.split(`
`);c.length>=1&&l.test(c[0])&&(this._tone=c[0].replace(l,"$2")),c.length>=2&&e.test(c[1])&&(this._duration=parseInt(c[1].replace(e,"$2"),10))}this._duration||(this._duration=Jm.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:"remote",dtmf:this,request:i}):Qy.debug("invalid INFO DTMF received, discarded")}},{key:"tone",get:function(){return this._tone}},{key:"duration",get:function(){return this._duration}}]),o}(Yy);sc.exports.C=Jm});var np=Z((DS,tp)=>{"use strict";function go(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?go=function(o){return typeof o}:go=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},go(s)}function eT(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function ep(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function tT(s,r,o){return r&&ep(s.prototype,r),o&&ep(s,o),s}function nT(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&oc(s,r)}function oc(s,r){return oc=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},oc(s,r)}function rT(s){var r=oT();return function(){var t=bo(s),i;if(r){var l=bo(this).constructor;i=Reflect.construct(t,arguments,l)}else i=t.apply(this,arguments);return iT(this,i)}}function iT(s,r){return r&&(go(r)==="object"||typeof r=="function")?r:sT(s)}function sT(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function oT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function bo(s){return bo=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},bo(s)}var aT=Vt().EventEmitter,lT=Ie(),cT=zt(),uT=Le();tp.exports=function(s){nT(o,s);var r=rT(o);function o(t){var i;return eT(this,o),i=r.call(this),i._session=t,i._direction=null,i._contentType=null,i._body=null,i}return tT(o,[{key:"send",value:function(i,l){var e=this,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this._direction="outgoing",i===void 0)throw new TypeError("Not enough arguments");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new cT.InvalidStateError(this._session.status);this._contentType=i,this._body=l;var m=uT.cloneArray(c.extraHeaders);m.push("Content-Type: ".concat(i)),this._session.newInfo({originator:"local",info:this,request:this.request}),this._session.sendRequest(lT.INFO,{extraHeaders:m,eventHandlers:{onSuccessResponse:function(b){e.emit("succeeded",{originator:"remote",response:b})},onErrorResponse:function(b){e.emit("failed",{originator:"remote",response:b})},onTransportError:function(){e._session.onTransportError()},onRequestTimeout:function(){e._session.onRequestTimeout()},onDialogError:function(){e._session.onDialogError()}},body:l})}},{key:"init_incoming",value:function(i){this._direction="incoming",this.request=i,i.reply(200),this._contentType=i.hasHeader("Content-Type")?i.getHeader("Content-Type").toLowerCase():void 0,this._body=i.body,this._session.newInfo({originator:"remote",info:this,request:i})}},{key:"contentType",get:function(){return this._contentType}},{key:"body",get:function(){return this._body}}]),o}(aT)});var op=Z((OS,sp)=>{"use strict";function dT(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function rp(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function fT(s,r,o){return r&&rp(s.prototype,r),o&&rp(s,o),s}var hT=Ne(),ip=Ie(),mT=new hT("RTCSession:ReferNotifier"),ac={event_type:"refer",body_type:"message/sipfrag;version=2.0",expires:300};sp.exports=function(){function s(r,o,t){dT(this,s),this._session=r,this._id=o,this._expires=t||ac.expires,this._active=!0,this.notify(100)}return fT(s,[{key:"notify",value:function(o,t){if(mT.debug("notify()"),this._active!==!1){t=t||ip.REASON_PHRASE[o]||"";var i;o>=200?i="terminated;reason=noresource":i="active;expires=".concat(this._expires),this._session.sendRequest(ip.NOTIFY,{extraHeaders:["Event: ".concat(ac.event_type,";id=").concat(this._id),"Subscription-State: ".concat(i),"Content-Type: ".concat(ac.body_type)],body:"SIP/2.0 ".concat(o," ").concat(t),eventHandlers:{onErrorResponse:function(){this._active=!1}}})}}}]),s}()});var up=Z((kS,cp)=>{"use strict";function _o(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_o=function(o){return typeof o}:_o=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_o(s)}function pT(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function ap(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function gT(s,r,o){return r&&ap(s.prototype,r),o&&ap(s,o),s}function bT(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&lc(s,r)}function lc(s,r){return lc=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},lc(s,r)}function _T(s){var r=TT();return function(){var t=vo(s),i;if(r){var l=vo(this).constructor;i=Reflect.construct(t,arguments,l)}else i=t.apply(this,arguments);return vT(this,i)}}function vT(s,r){return r&&(_o(r)==="object"||typeof r=="function")?r:yT(s)}function yT(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function TT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function vo(s){return vo=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},vo(s)}var wT=Vt().EventEmitter,CT=Ne(),Oi=Ie(),ET=Tt(),lp=Le(),Fn=new CT("RTCSession:ReferSubscriber");cp.exports=function(s){bT(o,s);var r=_T(o);function o(t){var i;return pT(this,o),i=r.call(this),i._id=null,i._session=t,i}return gT(o,[{key:"sendRefer",value:function(i){var l=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Fn.debug("sendRefer()");var c=lp.cloneArray(e.extraHeaders),m=lp.cloneObject(e.eventHandlers);for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&this.on(p,m[p]);var b=null;e.replaces&&(b=e.replaces._request.call_id,b+=";to-tag=".concat(e.replaces._to_tag),b+=";from-tag=".concat(e.replaces._from_tag),b=encodeURIComponent(b));var y="Refer-To: <".concat(i).concat(b?"?Replaces=".concat(b):"",">");if(c.push(y),!c.some(function(v){return v.toLowerCase().startsWith("referred-by:")})){var f="Referred-By: <".concat(this._session._ua._configuration.uri._scheme,":").concat(this._session._ua._configuration.uri._user,"@").concat(this._session._ua._configuration.uri._host,">");c.push(f)}c.push("Contact: ".concat(this._session.contact));var S=this._session.sendRequest(Oi.REFER,{extraHeaders:c,eventHandlers:{onSuccessResponse:function(C){l._requestSucceeded(C)},onErrorResponse:function(C){l._requestFailed(C,Oi.causes.REJECTED)},onTransportError:function(){l._requestFailed(null,Oi.causes.CONNECTION_ERROR)},onRequestTimeout:function(){l._requestFailed(null,Oi.causes.REQUEST_TIMEOUT)},onDialogError:function(){l._requestFailed(null,Oi.causes.DIALOG_ERROR)}}});this._id=S.cseq}},{key:"receiveNotify",value:function(i){if(Fn.debug("receiveNotify()"),!!i.body){var l=ET.parse(i.body.trim().split(`\r
`,1)[0],"Status_Line");if(l===-1){Fn.debug('receiveNotify() | error parsing NOTIFY body: "'.concat(i.body,'"'));return}switch(!0){case/^100$/.test(l.status_code):this.emit("trying",{request:i,status_line:l});break;case/^1[0-9]{2}$/.test(l.status_code):this.emit("progress",{request:i,status_line:l});break;case/^2[0-9]{2}$/.test(l.status_code):this.emit("accepted",{request:i,status_line:l});break;default:this.emit("failed",{request:i,status_line:l});break}}}},{key:"_requestSucceeded",value:function(i){Fn.debug("REFER succeeded"),Fn.debug('emit "requestSucceeded"'),this.emit("requestSucceeded",{response:i})}},{key:"_requestFailed",value:function(i,l){Fn.debug("REFER failed"),Fn.debug('emit "requestFailed"'),this.emit("requestFailed",{response:i||null,cause:l})}},{key:"id",get:function(){return this._id}}]),o}(wT)});var vp=Z((NS,_p)=>{"use strict";function wo(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wo=function(o){return typeof o}:wo=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},wo(s)}function Yt(s,r){var o;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(o=ST(s))||r&&s&&typeof s.length=="number"){o&&(s=o);var t=0,i=function(){};return{s:i,n:function(){return t>=s.length?{done:!0}:{done:!1,value:s[t++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,e=!1,c;return{s:function(){o=s[Symbol.iterator]()},n:function(){var p=o.next();return l=p.done,p},e:function(p){e=!0,c=p},f:function(){try{!l&&o.return!=null&&o.return()}finally{if(e)throw c}}}}function ST(s,r){if(s){if(typeof s=="string")return dp(s,r);var o=Object.prototype.toString.call(s).slice(8,-1);if(o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set")return Array.from(s);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return dp(s,r)}}function dp(s,r){(r==null||r>s.length)&&(r=s.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=s[o];return t}function AT(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function fp(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function hp(s,r,o){return r&&fp(s.prototype,r),o&&fp(s,o),s}function RT(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&cc(s,r)}function cc(s,r){return cc=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},cc(s,r)}function IT(s){var r=OT();return function(){var t=Co(s),i;if(r){var l=Co(this).constructor;i=Reflect.construct(t,arguments,l)}else i=t.apply(this,arguments);return xT(this,i)}}function xT(s,r){return r&&(wo(r)==="object"||typeof r=="function")?r:DT(s)}function DT(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function OT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Co(s){return Co=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Co(s)}var kT=Vt().EventEmitter,mp=Vl(),NT=Ne(),M=Ie(),Ln=zt(),pp=yr(),Te=Le(),ki=Yl(),MT=kt(),yo=Ym(),PT=Tr(),ct=Qm(),gp=np(),FT=op(),LT=up(),bp=Bt(),I=new NT("RTCSession"),D={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},To=["audio","video"];_p.exports=function(s){RT(o,s);var r=IT(o);hp(o,null,[{key:"C",get:function(){return D}}]);function o(t){var i;return AT(this,o),I.debug("new"),i=r.call(this),i._id=null,i._ua=t,i._status=D.STATUS_NULL,i._dialog=null,i._earlyDialogs={},i._contact=null,i._from_tag=null,i._to_tag=null,i._connection=null,i._connectionPromiseQueue=Promise.resolve(),i._request=null,i._is_canceled=!1,i._cancel_reason="",i._is_confirmed=!1,i._late_sdp=!1,i._rtcOfferConstraints=null,i._rtcAnswerConstraints=null,i._localMediaStream=null,i._localMediaStreamLocallyGenerated=!1,i._rtcReady=!0,i._iceReady=!1,i._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},i._direction=null,i._local_identity=null,i._remote_identity=null,i._start_time=null,i._end_time=null,i._tones=null,i._audioMuted=!1,i._videoMuted=!1,i._localHold=!1,i._remoteHold=!1,i._sessionTimers={enabled:i._ua.configuration.session_timers,refreshMethod:i._ua.configuration.session_timers_refresh_method,defaultExpires:M.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},i._referSubscribers={},i._data={},i}return hp(o,[{key:"isInProgress",value:function(){switch(this._status){case D.STATUS_NULL:case D.STATUS_INVITE_SENT:case D.STATUS_1XX_RECEIVED:case D.STATUS_INVITE_RECEIVED:case D.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}},{key:"isEstablished",value:function(){switch(this._status){case D.STATUS_ANSWERED:case D.STATUS_WAITING_FOR_ACK:case D.STATUS_CONFIRMED:return!0;default:return!1}}},{key:"isEnded",value:function(){switch(this._status){case D.STATUS_CANCELED:case D.STATUS_TERMINATED:return!0;default:return!1}}},{key:"isMuted",value:function(){return{audio:this._audioMuted,video:this._videoMuted}}},{key:"isOnHold",value:function(){return{local:this._localHold,remote:this._remoteHold}}},{key:"connect",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;I.debug("connect()");var c=i,m=Te.cloneObject(l.eventHandlers),p=Te.cloneArray(l.extraHeaders),b=Te.cloneObject(l.mediaConstraints,{audio:!0,video:!0}),y=l.mediaStream||null,f=Te.cloneObject(l.pcConfig,{iceServers:[]}),S=l.rtcConstraints||null,v=l.rtcOfferConstraints||null;if(this._rtcOfferConstraints=v,this._rtcAnswerConstraints=l.rtcAnswerConstraints||null,this._data=l.data||this._data,i===void 0)throw new TypeError("Not enough arguments");if(this._status!==D.STATUS_NULL)throw new Ln.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new Ln.NotSupportedError("WebRTC not supported");if(i=this._ua.normalizeTarget(i),!i)throw new TypeError("Invalid target: ".concat(c));this._sessionTimers.enabled&&Te.isDecimal(l.sessionTimersExpires)&&(l.sessionTimersExpires>=M.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=l.sessionTimersExpires:this._sessionTimers.defaultExpires=M.SESSION_EXPIRES);for(var C in m)Object.prototype.hasOwnProperty.call(m,C)&&this.on(C,m[C]);this._from_tag=Te.newTag();var q=l.anonymous||!1,K={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:q,outbound:!0}),q?(K.from_display_name="Anonymous",K.from_uri=new bp("sip","anonymous","anonymous.invalid"),p.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString())),p.push("Privacy: id")):l.fromUserName&&(K.from_uri=new bp("sip",l.fromUserName,this._ua.configuration.uri.host),p.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),l.fromDisplayName&&(K.from_display_name=l.fromDisplayName),p.push("Contact: ".concat(this._contact)),p.push("Content-Type: application/sdp"),this._sessionTimers.enabled&&p.push("Session-Expires: ".concat(this._sessionTimers.defaultExpires).concat(this._ua.configuration.session_timers_force_refresher?";refresher=uac":"")),this._request=new MT.InitialOutgoingInviteRequest(i,this._ua,K,p),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(f,S),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,e&&e(this),this._newRTCSession("local",this._request),this._sendInitialRequest(b,v,y)}},{key:"init_incoming",value:function(i,l){var e=this;I.debug("init_incoming()");var c,m=i.hasHeader("Content-Type")?i.getHeader("Content-Type").toLowerCase():void 0;if(i.body&&m!=="application/sdp"){i.reply(415);return}if(this._status=D.STATUS_INVITE_RECEIVED,this._from_tag=i.from_tag,this._id=i.call_id+this._from_tag,this._request=i,this._contact=this._ua.contact.toString(),i.hasHeader("expires")&&(c=i.getHeader("expires")*1e3),i.to_tag=Te.newTag(),!this._createDialog(i,"UAS",!0)){i.reply(500,"Missing Contact header field");return}i.body?this._late_sdp=!1:this._late_sdp=!0,this._status=D.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout(function(){i.reply(408),e._failed("local",null,M.causes.NO_ANSWER)},this._ua.configuration.no_answer_timeout),c&&(this._timers.expiresTimer=setTimeout(function(){e._status===D.STATUS_WAITING_FOR_ANSWER&&(i.reply(487),e._failed("system",null,M.causes.EXPIRES))},c)),this._direction="incoming",this._local_identity=i.to,this._remote_identity=i.from,l&&l(this),this._newRTCSession("remote",i),this._status!==D.STATUS_TERMINATED&&(i.reply(180,null,["Contact: ".concat(this._contact)]),this._progress("local",null))}},{key:"answer",value:function(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};I.debug("answer()");var e=this._request,c=Te.cloneArray(l.extraHeaders),m=Te.cloneObject(l.mediaConstraints),p=l.mediaStream||null,b=Te.cloneObject(l.pcConfig,{iceServers:[]}),y=l.rtcConstraints||null,f=l.rtcAnswerConstraints||null,S=Te.cloneObject(l.rtcOfferConstraints),v,C=!1,q=!1,K=!1,_e=!1;if(this._rtcAnswerConstraints=f,this._rtcOfferConstraints=l.rtcOfferConstraints||null,this._data=l.data||this._data,this._direction!=="incoming")throw new Ln.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==D.STATUS_WAITING_FOR_ANSWER)throw new Ln.InvalidStateError(this._status);if(this._sessionTimers.enabled&&Te.isDecimal(l.sessionTimersExpires)&&(l.sessionTimersExpires>=M.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=l.sessionTimersExpires:this._sessionTimers.defaultExpires=M.SESSION_EXPIRES),this._status=D.STATUS_ANSWERED,!this._createDialog(e,"UAS")){e.reply(500,"Error creating dialog");return}clearTimeout(this._timers.userNoAnswerTimer),c.unshift("Contact: ".concat(this._contact));var we=e.parseSDP();Array.isArray(we.media)||(we.media=[we.media]);var A=Yt(we.media),O;try{for(A.s();!(O=A.n()).done;){var R=O.value;R.type==="audio"&&(C=!0,(!R.direction||R.direction==="sendrecv")&&(K=!0)),R.type==="video"&&(q=!0,(!R.direction||R.direction==="sendrecv")&&(_e=!0))}}catch(oe){A.e(oe)}finally{A.f()}if(p&&m.audio===!1){v=p.getAudioTracks();var k=Yt(v),ie;try{for(k.s();!(ie=k.n()).done;){var Pe=ie.value;p.removeTrack(Pe)}}catch(oe){k.e(oe)}finally{k.f()}}if(p&&m.video===!1){v=p.getVideoTracks();var ce=Yt(v),ve;try{for(ce.s();!(ve=ce.n()).done;){var ne=ve.value;p.removeTrack(ne)}}catch(oe){ce.e(oe)}finally{ce.f()}}!p&&m.audio===void 0&&(m.audio=K),!p&&m.video===void 0&&(m.video=_e),!p&&!C&&!S.offerToReceiveAudio&&(m.audio=!1),!p&&!q&&!S.offerToReceiveVideo&&(m.video=!1),this._createRTCConnection(b,y),Promise.resolve().then(function(){if(p)return p;if(m.audio||m.video)return i._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(m).catch(function(oe){throw i._status===D.STATUS_TERMINATED?new Error("terminated"):(e.reply(480),i._failed("local",null,M.causes.USER_DENIED_MEDIA_ACCESS),I.warn('emit "getusermediafailed" [error:%o]',oe),i.emit("getusermediafailed",oe),new Error("getUserMedia() failed"))})}).then(function(oe){if(i._status===D.STATUS_TERMINATED)throw new Error("terminated");i._localMediaStream=oe,oe&&oe.getTracks().forEach(function(bt){i._connection.addTrack(bt,oe)})}).then(function(){if(!i._late_sdp){var oe={originator:"remote",type:"offer",sdp:e.body};I.debug('emit "sdp"'),i.emit("sdp",oe);var bt=new RTCSessionDescription({type:"offer",sdp:oe.sdp});return i._connectionPromiseQueue=i._connectionPromiseQueue.then(function(){return i._connection.setRemoteDescription(bt)}).catch(function(Ge){throw e.reply(488),i._failed("system",null,M.causes.WEBRTC_ERROR),I.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',Ge),i.emit("peerconnection:setremotedescriptionfailed",Ge),new Error("peerconnection.setRemoteDescription() failed")}),i._connectionPromiseQueue}}).then(function(){if(i._status===D.STATUS_TERMINATED)throw new Error("terminated");return i._connecting(e),i._late_sdp?i._createLocalDescription("offer",i._rtcOfferConstraints).catch(function(){throw e.reply(500),new Error("_createLocalDescription() failed")}):i._createLocalDescription("answer",f).catch(function(){throw e.reply(500),new Error("_createLocalDescription() failed")})}).then(function(oe){if(i._status===D.STATUS_TERMINATED)throw new Error("terminated");i._handleSessionTimersInIncomingRequest(e,c),e.reply(200,null,c,oe,function(){i._status=D.STATUS_WAITING_FOR_ACK,i._setInvite2xxTimer(e,oe),i._setACKTimer(),i._accepted("local")},function(){i._failed("system",null,M.causes.CONNECTION_ERROR)})}).catch(function(oe){i._status!==D.STATUS_TERMINATED&&I.warn(oe)})}},{key:"terminate",value:function(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};I.debug("terminate()");var e=l.cause||M.causes.BYE,c=Te.cloneArray(l.extraHeaders),m=l.body,p,b=l.status_code,y=l.reason_phrase;if(this._status===D.STATUS_TERMINATED)throw new Ln.InvalidStateError(this._status);switch(this._status){case D.STATUS_NULL:case D.STATUS_INVITE_SENT:case D.STATUS_1XX_RECEIVED:if(I.debug("canceling session"),b&&(b<200||b>=700))throw new TypeError("Invalid status_code: ".concat(b));b&&(y=y||M.REASON_PHRASE[b]||"",p="SIP ;cause=".concat(b,' ;text="').concat(y,'"')),this._status===D.STATUS_NULL||this._status===D.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=p):this._status===D.STATUS_1XX_RECEIVED&&this._request.cancel(p),this._status=D.STATUS_CANCELED,this._failed("local",null,M.causes.CANCELED);break;case D.STATUS_WAITING_FOR_ANSWER:case D.STATUS_ANSWERED:if(I.debug("rejecting session"),b=b||480,b<300||b>=700)throw new TypeError("Invalid status_code: ".concat(b));this._request.reply(b,y,c,m),this._failed("local",null,M.causes.REJECTED);break;case D.STATUS_WAITING_FOR_ACK:case D.STATUS_CONFIRMED:if(I.debug("terminating session"),y=l.reason_phrase||M.REASON_PHRASE[b]||"",b&&(b<200||b>=700))throw new TypeError("Invalid status_code: ".concat(b));if(b&&c.push("Reason: SIP ;cause=".concat(b,'; text="').concat(y,'"')),this._status===D.STATUS_WAITING_FOR_ACK&&this._direction==="incoming"&&this._request.server_transaction.state!==pp.C.STATUS_TERMINATED){var f=this._dialog;this.receiveRequest=function(S){var v=S.method;v===M.ACK&&(i.sendRequest(M.BYE,{extraHeaders:c,body:m}),f.terminate())},this._request.server_transaction.on("stateChanged",function(){i._request.server_transaction.state===pp.C.STATUS_TERMINATED&&(i.sendRequest(M.BYE,{extraHeaders:c,body:m}),f.terminate())}),this._ended("local",null,e),this._dialog=f,this._ua.newDialog(f)}else this.sendRequest(M.BYE,{extraHeaders:c,body:m}),this._ended("local",null,e)}}},{key:"sendDTMF",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};I.debug("sendDTMF() | tones: %s",i);var e=0,c=l.duration||null,m=l.interToneGap||null,p=l.transportType||M.DTMF_TRANSPORT.INFO;if(i===void 0)throw new TypeError("Not enough arguments");if(this._status!==D.STATUS_CONFIRMED&&this._status!==D.STATUS_WAITING_FOR_ACK&&this._status!==D.STATUS_1XX_RECEIVED)throw new Ln.InvalidStateError(this._status);if(p!==M.DTMF_TRANSPORT.INFO&&p!==M.DTMF_TRANSPORT.RFC2833)throw new TypeError("invalid transportType: ".concat(p));if(typeof i=="number"&&(i=i.toString()),!i||typeof i!="string"||!i.match(/^[0-9A-DR#*,]+$/i))throw new TypeError("Invalid tones: ".concat(i));if(c&&!Te.isDecimal(c))throw new TypeError("Invalid tone duration: ".concat(c));if(c?c<ct.C.MIN_DURATION?(I.debug('"duration" value is lower than the minimum allowed, setting it to '.concat(ct.C.MIN_DURATION," milliseconds")),c=ct.C.MIN_DURATION):c>ct.C.MAX_DURATION?(I.debug('"duration" value is greater than the maximum allowed, setting it to '.concat(ct.C.MAX_DURATION," milliseconds")),c=ct.C.MAX_DURATION):c=Math.abs(c):c=ct.C.DEFAULT_DURATION,l.duration=c,m&&!Te.isDecimal(m))throw new TypeError("Invalid interToneGap: ".concat(m));if(m?m<ct.C.MIN_INTER_TONE_GAP?(I.debug('"interToneGap" value is lower than the minimum allowed, setting it to '.concat(ct.C.MIN_INTER_TONE_GAP," milliseconds")),m=ct.C.MIN_INTER_TONE_GAP):m=Math.abs(m):m=ct.C.DEFAULT_INTER_TONE_GAP,p===M.DTMF_TRANSPORT.RFC2833){var b=this._getDTMFRTPSender();b&&(i=b.toneBuffer+i,b.insertDTMF(i,c,m));return}if(this._tones){this._tones+=i;return}this._tones=i,y.call(this);function y(){var f=this,S;if(this._status===D.STATUS_TERMINATED||!this._tones||e>=this._tones.length){this._tones=null;return}var v=this._tones[e];if(e+=1,v===",")S=2e3;else{var C=new ct(this);l.eventHandlers={onFailed:function(){f._tones=null}},C.send(v,l),S=c+m}setTimeout(y.bind(this),S)}}},{key:"sendInfo",value:function(i,l){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(I.debug("sendInfo()"),this._status!==D.STATUS_CONFIRMED&&this._status!==D.STATUS_WAITING_FOR_ACK&&this._status!==D.STATUS_1XX_RECEIVED)throw new Ln.InvalidStateError(this._status);var c=new gp(this);c.send(i,l,e)}},{key:"mute",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{audio:!0,video:!1};I.debug("mute()");var l=!1,e=!1;this._audioMuted===!1&&i.audio&&(l=!0,this._audioMuted=!0,this._toggleMuteAudio(!0)),this._videoMuted===!1&&i.video&&(e=!0,this._videoMuted=!0,this._toggleMuteVideo(!0)),(l===!0||e===!0)&&this._onmute({audio:l,video:e})}},{key:"unmute",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{audio:!0,video:!0};I.debug("unmute()");var l=!1,e=!1;this._audioMuted===!0&&i.audio&&(l=!0,this._audioMuted=!1,this._localHold===!1&&this._toggleMuteAudio(!1)),this._videoMuted===!0&&i.video&&(e=!0,this._videoMuted=!1,this._localHold===!1&&this._toggleMuteVideo(!1)),(l===!0||e===!0)&&this._onunmute({audio:l,video:e})}},{key:"hold",value:function(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(I.debug("hold()"),this._status!==D.STATUS_WAITING_FOR_ACK&&this._status!==D.STATUS_CONFIRMED||this._localHold===!0||!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");var c={succeeded:function(){e&&e()},failed:function(){i.terminate({cause:M.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return l.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:c,extraHeaders:l.extraHeaders}):this._sendReinvite({eventHandlers:c,extraHeaders:l.extraHeaders}),!0}},{key:"unhold",value:function(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(I.debug("unhold()"),this._status!==D.STATUS_WAITING_FOR_ACK&&this._status!==D.STATUS_CONFIRMED||this._localHold===!1||!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");var c={succeeded:function(){e&&e()},failed:function(){i.terminate({cause:M.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return l.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:c,extraHeaders:l.extraHeaders}):this._sendReinvite({eventHandlers:c,extraHeaders:l.extraHeaders}),!0}},{key:"renegotiate",value:function(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;I.debug("renegotiate()");var c=l.rtcOfferConstraints||null;if(this._status!==D.STATUS_WAITING_FOR_ACK&&this._status!==D.STATUS_CONFIRMED||!this._isReadyToReOffer())return!1;var m={succeeded:function(){e&&e()},failed:function(){i.terminate({cause:M.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}};return this._setLocalMediaStatus(),l.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:m,rtcOfferConstraints:c,extraHeaders:l.extraHeaders}):this._sendReinvite({eventHandlers:m,rtcOfferConstraints:c,extraHeaders:l.extraHeaders}),!0}},{key:"refer",value:function(i,l){var e=this;I.debug("refer()");var c=i;if(this._status!==D.STATUS_WAITING_FOR_ACK&&this._status!==D.STATUS_CONFIRMED)return!1;if(i=this._ua.normalizeTarget(i),!i)throw new TypeError("Invalid target: ".concat(c));var m=new LT(this);m.sendRefer(i,l);var p=m.id;return this._referSubscribers[p]=m,m.on("requestFailed",function(){delete e._referSubscribers[p]}),m.on("accepted",function(){delete e._referSubscribers[p]}),m.on("failed",function(){delete e._referSubscribers[p]}),m}},{key:"sendRequest",value:function(i,l){return I.debug("sendRequest()"),this._dialog.sendRequest(i,l)}},{key:"receiveRequest",value:function(i){var l=this;if(I.debug("receiveRequest()"),i.method===M.CANCEL)(this._status===D.STATUS_WAITING_FOR_ANSWER||this._status===D.STATUS_ANSWERED)&&(this._status=D.STATUS_CANCELED,this._request.reply(487),this._failed("remote",i,M.causes.CANCELED));else switch(i.method){case M.ACK:if(this._status!==D.STATUS_WAITING_FOR_ACK)return;if(this._status=D.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!i.body){this.terminate({cause:M.causes.MISSING_SDP,status_code:400});break}var e={originator:"remote",type:"answer",sdp:i.body};I.debug('emit "sdp"'),this.emit("sdp",e);var c=new RTCSessionDescription({type:"answer",sdp:e.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return l._connection.setRemoteDescription(c)}).then(function(){l._is_confirmed||l._confirmed("remote",i)}).catch(function(p){l.terminate({cause:M.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),I.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',p),l.emit("peerconnection:setremotedescriptionfailed",p)})}else this._is_confirmed||this._confirmed("remote",i);break;case M.BYE:this._status===D.STATUS_CONFIRMED||this._status===D.STATUS_WAITING_FOR_ACK?(i.reply(200),this._ended("remote",i,M.causes.BYE)):this._status===D.STATUS_INVITE_RECEIVED||this._status===D.STATUS_WAITING_FOR_ANSWER?(i.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",i,M.causes.BYE)):i.reply(403,"Wrong Status");break;case M.INVITE:this._status===D.STATUS_CONFIRMED?i.hasHeader("replaces")?this._receiveReplaces(i):this._receiveReinvite(i):i.reply(403,"Wrong Status");break;case M.INFO:if(this._status===D.STATUS_1XX_RECEIVED||this._status===D.STATUS_WAITING_FOR_ANSWER||this._status===D.STATUS_ANSWERED||this._status===D.STATUS_WAITING_FOR_ACK||this._status===D.STATUS_CONFIRMED){var m=i.hasHeader("Content-Type")?i.getHeader("Content-Type").toLowerCase():void 0;m&&m.match(/^application\/dtmf-relay/i)?new ct(this).init_incoming(i):m!==void 0?new gp(this).init_incoming(i):i.reply(415)}else i.reply(403,"Wrong Status");break;case M.UPDATE:this._status===D.STATUS_CONFIRMED?this._receiveUpdate(i):i.reply(403,"Wrong Status");break;case M.REFER:this._status===D.STATUS_CONFIRMED?this._receiveRefer(i):i.reply(403,"Wrong Status");break;case M.NOTIFY:this._status===D.STATUS_CONFIRMED?this._receiveNotify(i):i.reply(403,"Wrong Status");break;default:i.reply(501)}}},{key:"onTransportError",value:function(){I.warn("onTransportError()"),this._status!==D.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:M.causes.CONNECTION_ERROR,cause:M.causes.CONNECTION_ERROR})}},{key:"onRequestTimeout",value:function(){I.warn("onRequestTimeout()"),this._status!==D.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:M.causes.REQUEST_TIMEOUT,cause:M.causes.REQUEST_TIMEOUT})}},{key:"onDialogError",value:function(){I.warn("onDialogError()"),this._status!==D.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:M.causes.DIALOG_ERROR,cause:M.causes.DIALOG_ERROR})}},{key:"newDTMF",value:function(i){I.debug("newDTMF()"),this.emit("newDTMF",i)}},{key:"newInfo",value:function(i){I.debug("newInfo()"),this.emit("newInfo",i)}},{key:"_isReadyToReOffer",value:function(){return this._rtcReady?this._dialog?this._dialog.uac_pending_reply===!0||this._dialog.uas_pending_reply===!0?(I.debug("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):!0:(I.debug("_isReadyToReOffer() | session not established yet"),!1):(I.debug("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}},{key:"_close",value:function(){if(I.debug("close()"),this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(I.debug("close() | closing local MediaStream"),Te.closeMediaStream(this._localMediaStream)),this._status!==D.STATUS_TERMINATED){if(this._status=D.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(c){I.warn("close() | error closing the RTCPeerConnection: %o",c)}for(var i in this._timers)Object.prototype.hasOwnProperty.call(this._timers,i)&&clearTimeout(this._timers[i]);clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog);for(var l in this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,l)&&(this._earlyDialogs[l].terminate(),delete this._earlyDialogs[l]);for(var e in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,e)&&delete this._referSubscribers[e];this._ua.destroyRTCSession(this)}}},{key:"_setInvite2xxTimer",value:function(i,l){var e=ki.T1;function c(){this._status===D.STATUS_WAITING_FOR_ACK&&(i.reply(200,null,["Contact: ".concat(this._contact)],l),e<ki.T2&&(e=e*2,e>ki.T2&&(e=ki.T2)),this._timers.invite2xxTimer=setTimeout(c.bind(this),e))}this._timers.invite2xxTimer=setTimeout(c.bind(this),e)}},{key:"_setACKTimer",value:function(){var i=this;this._timers.ackTimer=setTimeout(function(){i._status===D.STATUS_WAITING_FOR_ACK&&(I.debug("no ACK received, terminating the session"),clearTimeout(i._timers.invite2xxTimer),i.sendRequest(M.BYE),i._ended("remote",null,M.causes.NO_ACK))},ki.TIMER_H)}},{key:"_createRTCConnection",value:function(i,l){var e=this;this._connection=new RTCPeerConnection(i,l),this._connection.addEventListener("iceconnectionstatechange",function(){var c=e._connection.iceConnectionState;c==="failed"&&e.terminate({cause:M.causes.RTP_TIMEOUT,status_code:408,reason_phrase:M.causes.RTP_TIMEOUT})}),I.debug('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}},{key:"_createLocalDescription",value:function(i,l){var e=this;if(I.debug("createLocalDescription()"),i!=="offer"&&i!=="answer")throw new Error('createLocalDescription() | invalid type "'.concat(i,'"'));var c=this._connection;return this._rtcReady=!1,Promise.resolve().then(function(){return i==="offer"?c.createOffer(l).catch(function(m){return I.warn('emit "peerconnection:createofferfailed" [error:%o]',m),e.emit("peerconnection:createofferfailed",m),Promise.reject(m)}):c.createAnswer(l).catch(function(m){return I.warn('emit "peerconnection:createanswerfailed" [error:%o]',m),e.emit("peerconnection:createanswerfailed",m),Promise.reject(m)})}).then(function(m){return c.setLocalDescription(m).catch(function(p){return e._rtcReady=!0,I.warn('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',p),e.emit("peerconnection:setlocaldescriptionfailed",p),Promise.reject(p)})}).then(function(){var m=l&&l.iceRestart;if(c.iceGatheringState==="complete"&&!m||c.iceGatheringState==="gathering"&&e._iceReady){e._rtcReady=!0;var p={originator:"local",type:i,sdp:c.localDescription.sdp};return I.debug('emit "sdp"'),e.emit("sdp",p),Promise.resolve(p.sdp)}return new Promise(function(b){var y=!1,f,S;e._iceReady=!1;var v=function(){if(!y){c.removeEventListener("icecandidate",f),c.removeEventListener("icegatheringstatechange",S),y=!0,e._rtcReady=!0,e._iceReady=!0;var q={originator:"local",type:i,sdp:c.localDescription.sdp};I.debug('emit "sdp"'),e.emit("sdp",q),b(q.sdp)}};c.addEventListener("icecandidate",f=function(q){var K=q.candidate;K?e.emit("icecandidate",{candidate:K,ready:v}):v()}),c.addEventListener("icegatheringstatechange",S=function(){c.iceGatheringState==="complete"&&v()})})})}},{key:"_createDialog",value:function(i,l,e){var c=l==="UAS"?i.to_tag:i.from_tag,m=l==="UAS"?i.from_tag:i.to_tag,p=i.call_id+c+m,b=this._earlyDialogs[p];if(e)return b?!0:(b=new yo(this,i,l,yo.C.STATUS_EARLY),b.error?(I.debug(b.error),this._failed("remote",i,M.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[p]=b,!0));if(this._from_tag=i.from_tag,this._to_tag=i.to_tag,b)return b.update(i,l),this._dialog=b,delete this._earlyDialogs[p],!0;var y=new yo(this,i,l);return y.error?(I.debug(y.error),this._failed("remote",i,M.causes.INTERNAL_ERROR),!1):(this._dialog=y,!0)}},{key:"_receiveReinvite",value:function(i){var l=this;I.debug("receiveReinvite()");var e=i.hasHeader("Content-Type")?i.getHeader("Content-Type").toLowerCase():void 0,c={request:i,callback:void 0,reject:p.bind(this)},m=!1;function p(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};m=!0;var f=y.status_code||403,S=y.reason_phrase||"",v=Te.cloneArray(y.extraHeaders);if(this._status!==D.STATUS_CONFIRMED)return!1;if(f<300||f>=700)throw new TypeError("Invalid status_code: ".concat(f));i.reply(f,S,v)}if(this.emit("reinvite",c),m)return;if(this._late_sdp=!1,!i.body){this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return l._createLocalDescription("offer",l._rtcOfferConstraints)}).then(function(y){b.call(l,y)}).catch(function(){i.reply(500)});return}if(e!=="application/sdp"){I.debug("invalid Content-Type"),i.reply(415);return}this._processInDialogSdpOffer(i).then(function(y){l._status!==D.STATUS_TERMINATED&&b.call(l,y)}).catch(function(y){I.warn(y)});function b(y){var f=this,S=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(i,S),this._late_sdp&&(y=this._mangleOffer(y)),i.reply(200,null,S,y,function(){f._status=D.STATUS_WAITING_FOR_ACK,f._setInvite2xxTimer(i,y),f._setACKTimer()}),typeof c.callback=="function"&&c.callback()}}},{key:"_receiveUpdate",value:function(i){var l=this;I.debug("receiveUpdate()");var e=i.hasHeader("Content-Type")?i.getHeader("Content-Type").toLowerCase():void 0,c={request:i,callback:void 0,reject:p.bind(this)},m=!1;function p(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};m=!0;var f=y.status_code||403,S=y.reason_phrase||"",v=Te.cloneArray(y.extraHeaders);if(this._status!==D.STATUS_CONFIRMED)return!1;if(f<300||f>=700)throw new TypeError("Invalid status_code: ".concat(f));i.reply(f,S,v)}if(this.emit("update",c),m)return;if(!i.body){b.call(this,null);return}if(e!=="application/sdp"){I.debug("invalid Content-Type"),i.reply(415);return}this._processInDialogSdpOffer(i).then(function(y){l._status!==D.STATUS_TERMINATED&&b.call(l,y)}).catch(function(y){I.warn(y)});function b(y){var f=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(i,f),i.reply(200,null,f,y),typeof c.callback=="function"&&c.callback()}}},{key:"_processInDialogSdpOffer",value:function(i){var l=this;I.debug("_processInDialogSdpOffer()");var e=i.parseSDP(),c=!1,m=Yt(e.media),p;try{for(m.s();!(p=m.n()).done;){var b=p.value;if(To.indexOf(b.type)!==-1){var y=b.direction||e.direction||"sendrecv";if(y==="sendonly"||y==="inactive")c=!0;else{c=!1;break}}}}catch(v){m.e(v)}finally{m.f()}var f={originator:"remote",type:"offer",sdp:i.body};I.debug('emit "sdp"'),this.emit("sdp",f);var S=new RTCSessionDescription({type:"offer",sdp:f.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){if(l._status===D.STATUS_TERMINATED)throw new Error("terminated");return l._connection.setRemoteDescription(S).catch(function(v){throw i.reply(488),I.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',v),l.emit("peerconnection:setremotedescriptionfailed",v),v})}).then(function(){if(l._status===D.STATUS_TERMINATED)throw new Error("terminated");l._remoteHold===!0&&c===!1?(l._remoteHold=!1,l._onunhold("remote")):l._remoteHold===!1&&c===!0&&(l._remoteHold=!0,l._onhold("remote"))}).then(function(){if(l._status===D.STATUS_TERMINATED)throw new Error("terminated");return l._createLocalDescription("answer",l._rtcAnswerConstraints).catch(function(v){throw i.reply(500),I.warn('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',v),v})}).catch(function(v){I.warn("_processInDialogSdpOffer() failed [error: %o]",v)}),this._connectionPromiseQueue}},{key:"_receiveRefer",value:function(i){var l=this;if(I.debug("receiveRefer()"),!i.refer_to){I.debug("no Refer-To header field present in REFER"),i.reply(400);return}if(i.refer_to.uri.scheme!==M.SIP){I.debug("Refer-To header field points to a non-SIP URI scheme"),i.reply(416);return}i.reply(202);var e=new FT(this,i.cseq);I.debug('emit "refer"'),this.emit("refer",{request:i,accept:function(b,y){c.call(l,b,y)},reject:function(){m.call(l)}});function c(p){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(p=typeof p=="function"?p:null,this._status!==D.STATUS_WAITING_FOR_ACK&&this._status!==D.STATUS_CONFIRMED)return!1;var y=new o(this._ua);if(y.on("progress",function(S){var v=S.response;e.notify(v.status_code,v.reason_phrase)}),y.on("accepted",function(S){var v=S.response;e.notify(v.status_code,v.reason_phrase)}),y.on("_failed",function(S){var v=S.message,C=S.cause;v?e.notify(v.status_code,v.reason_phrase):e.notify(487,C)}),i.refer_to.uri.hasHeader("replaces")){var f=decodeURIComponent(i.refer_to.uri.getHeader("replaces"));b.extraHeaders=Te.cloneArray(b.extraHeaders),b.extraHeaders.push("Replaces: ".concat(f))}y.connect(i.refer_to.uri.toAor(),b,p)}function m(){e.notify(603)}}},{key:"_receiveNotify",value:function(i){switch(I.debug("receiveNotify()"),i.event||i.reply(400),i.event.event){case"refer":{var l,e;if(i.event.params&&i.event.params.id)l=i.event.params.id,e=this._referSubscribers[l];else if(Object.keys(this._referSubscribers).length===1)e=this._referSubscribers[Object.keys(this._referSubscribers)[0]];else{i.reply(400,"Missing event id parameter");return}if(!e){i.reply(481,"Subscription does not exist");return}e.receiveNotify(i),i.reply(200);break}default:i.reply(489)}}},{key:"_receiveReplaces",value:function(i){var l=this;I.debug("receiveReplaces()");function e(m){var p=this;if(this._status!==D.STATUS_WAITING_FOR_ACK&&this._status!==D.STATUS_CONFIRMED)return!1;var b=new o(this._ua);b.on("confirmed",function(){p.terminate()}),b.init_incoming(i,m)}function c(){I.debug("Replaced INVITE rejected by the user"),i.reply(486)}this.emit("replaces",{request:i,accept:function(p){e.call(l,p)},reject:function(){c.call(l)}})}},{key:"_sendInitialRequest",value:function(i,l,e){var c=this,m=new PT(this._ua,this._request,{onRequestTimeout:function(){c.onRequestTimeout()},onTransportError:function(){c.onTransportError()},onAuthenticated:function(b){c._request=b},onReceiveResponse:function(b){c._receiveInviteResponse(b)}});Promise.resolve().then(function(){if(e)return e;if(i.audio||i.video)return c._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(i).catch(function(p){throw c._status===D.STATUS_TERMINATED?new Error("terminated"):(c._failed("local",null,M.causes.USER_DENIED_MEDIA_ACCESS),I.warn('emit "getusermediafailed" [error:%o]',p),c.emit("getusermediafailed",p),p)})}).then(function(p){if(c._status===D.STATUS_TERMINATED)throw new Error("terminated");return c._localMediaStream=p,p&&p.getTracks().forEach(function(b){c._connection.addTrack(b,p)}),c._connecting(c._request),c._createLocalDescription("offer",l).catch(function(b){throw c._failed("local",null,M.causes.WEBRTC_ERROR),b})}).then(function(p){if(c._is_canceled||c._status===D.STATUS_TERMINATED)throw new Error("terminated");c._request.body=p,c._status=D.STATUS_INVITE_SENT,I.debug('emit "sending" [request:%o]',c._request),c.emit("sending",{request:c._request}),m.send()}).catch(function(p){c._status!==D.STATUS_TERMINATED&&I.warn(p)})}},{key:"_getDTMFRTPSender",value:function(){var i=this._connection.getSenders().find(function(l){return l.track&&l.track.kind==="audio"});if(!(i&&i.dtmf)){I.warn("sendDTMF() | no local audio track to send DTMF with");return}return i.dtmf}},{key:"_receiveInviteResponse",value:function(i){var l=this;if(I.debug("receiveInviteResponse()"),this._dialog&&i.status_code>=200&&i.status_code<=299)if(this._dialog.id.call_id===i.call_id&&this._dialog.id.local_tag===i.from_tag&&this._dialog.id.remote_tag===i.to_tag){this.sendRequest(M.ACK);return}else{var e=new yo(this,i,"UAC");if(e.error!==void 0){I.debug(e.error);return}this.sendRequest(M.ACK),this.sendRequest(M.BYE);return}if(this._is_canceled){i.status_code>=100&&i.status_code<200?this._request.cancel(this._cancel_reason):i.status_code>=200&&i.status_code<299&&this._acceptAndTerminate(i);return}if(!(this._status!==D.STATUS_INVITE_SENT&&this._status!==D.STATUS_1XX_RECEIVED))switch(!0){case/^100$/.test(i.status_code):this._status=D.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(i.status_code):{if(!i.to_tag){I.debug("1xx response received without to tag");break}if(i.hasHeader("contact")&&!this._createDialog(i,"UAC",!0))break;if(this._status=D.STATUS_1XX_RECEIVED,!i.body){this._progress("remote",i);break}var c={originator:"remote",type:"answer",sdp:i.body};I.debug('emit "sdp"'),this.emit("sdp",c);var m=new RTCSessionDescription({type:"answer",sdp:c.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return l._connection.setRemoteDescription(m)}).then(function(){return l._progress("remote",i)}).catch(function(f){I.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',f),l.emit("peerconnection:setremotedescriptionfailed",f)});break}case/^2[0-9]{2}$/.test(i.status_code):{if(this._status=D.STATUS_CONFIRMED,!i.body){this._acceptAndTerminate(i,400,M.causes.MISSING_SDP),this._failed("remote",i,M.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(i,"UAC"))break;var p={originator:"remote",type:"answer",sdp:i.body};I.debug('emit "sdp"'),this.emit("sdp",p);var b=new RTCSessionDescription({type:"answer",sdp:p.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){if(l._connection.signalingState==="stable")return l._connection.createOffer(l._rtcOfferConstraints).then(function(f){return l._connection.setLocalDescription(f)}).catch(function(f){l._acceptAndTerminate(i,500,f.toString()),l._failed("local",i,M.causes.WEBRTC_ERROR)})}).then(function(){l._connection.setRemoteDescription(b).then(function(){l._handleSessionTimersInIncomingResponse(i),l._accepted("remote",i),l.sendRequest(M.ACK),l._confirmed("local",null)}).catch(function(f){l._acceptAndTerminate(i,488,"Not Acceptable Here"),l._failed("remote",i,M.causes.BAD_MEDIA_DESCRIPTION),I.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',f),l.emit("peerconnection:setremotedescriptionfailed",f)})});break}default:{var y=Te.sipErrorCause(i.status_code);this._failed("remote",i,y)}}}},{key:"_sendReinvite",value:function(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};I.debug("sendReinvite()");var e=Te.cloneArray(l.extraHeaders),c=Te.cloneObject(l.eventHandlers),m=l.rtcOfferConstraints||this._rtcOfferConstraints||null,p=!1;e.push("Contact: ".concat(this._contact)),e.push("Content-Type: application/sdp"),this._sessionTimers.running&&e.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return i._createLocalDescription("offer",m)}).then(function(f){f=i._mangleOffer(f);var S={originator:"local",type:"offer",sdp:f};I.debug('emit "sdp"'),i.emit("sdp",S),i.sendRequest(M.INVITE,{extraHeaders:e,body:f,eventHandlers:{onSuccessResponse:function(C){b.call(i,C),p=!0},onErrorResponse:function(C){y.call(i,C)},onTransportError:function(){i.onTransportError()},onRequestTimeout:function(){i.onRequestTimeout()},onDialogError:function(){i.onDialogError()}}})}).catch(function(){y()});function b(f){var S=this;if(this._status!==D.STATUS_TERMINATED&&(this.sendRequest(M.ACK),!p)){if(this._handleSessionTimersInIncomingResponse(f),f.body){if(!f.hasHeader("Content-Type")||f.getHeader("Content-Type").toLowerCase()!=="application/sdp"){y.call(this);return}}else{y.call(this);return}var v={originator:"remote",type:"answer",sdp:f.body};I.debug('emit "sdp"'),this.emit("sdp",v);var C=new RTCSessionDescription({type:"answer",sdp:v.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return S._connection.setRemoteDescription(C)}).then(function(){c.succeeded&&c.succeeded(f)}).catch(function(q){y.call(S),I.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',q),S.emit("peerconnection:setremotedescriptionfailed",q)})}}function y(f){c.failed&&c.failed(f)}}},{key:"_sendUpdate",value:function(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};I.debug("sendUpdate()");var e=Te.cloneArray(l.extraHeaders),c=Te.cloneObject(l.eventHandlers),m=l.rtcOfferConstraints||this._rtcOfferConstraints||null,p=l.sdpOffer||!1,b=!1;e.push("Contact: ".concat(this._contact)),this._sessionTimers.running&&e.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),p?(e.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return i._createLocalDescription("offer",m)}).then(function(S){S=i._mangleOffer(S);var v={originator:"local",type:"offer",sdp:S};I.debug('emit "sdp"'),i.emit("sdp",v),i.sendRequest(M.UPDATE,{extraHeaders:e,body:S,eventHandlers:{onSuccessResponse:function(q){y.call(i,q),b=!0},onErrorResponse:function(q){f.call(i,q)},onTransportError:function(){i.onTransportError()},onRequestTimeout:function(){i.onRequestTimeout()},onDialogError:function(){i.onDialogError()}}})}).catch(function(){f.call(i)})):this.sendRequest(M.UPDATE,{extraHeaders:e,eventHandlers:{onSuccessResponse:function(v){y.call(i,v)},onErrorResponse:function(v){f.call(i,v)},onTransportError:function(){i.onTransportError()},onRequestTimeout:function(){i.onRequestTimeout()},onDialogError:function(){i.onDialogError()}}});function y(S){var v=this;if(this._status!==D.STATUS_TERMINATED&&!b)if(this._handleSessionTimersInIncomingResponse(S),p){if(S.body){if(!S.hasHeader("Content-Type")||S.getHeader("Content-Type").toLowerCase()!=="application/sdp"){f.call(this);return}}else{f.call(this);return}var C={originator:"remote",type:"answer",sdp:S.body};I.debug('emit "sdp"'),this.emit("sdp",C);var q=new RTCSessionDescription({type:"answer",sdp:C.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return v._connection.setRemoteDescription(q)}).then(function(){c.succeeded&&c.succeeded(S)}).catch(function(K){f.call(v),I.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',K),v.emit("peerconnection:setremotedescriptionfailed",K)})}else c.succeeded&&c.succeeded(S)}function f(S){c.failed&&c.failed(S)}}},{key:"_acceptAndTerminate",value:function(i,l,e){I.debug("acceptAndTerminate()");var c=[];l&&(e=e||M.REASON_PHRASE[l]||"",c.push("Reason: SIP ;cause=".concat(l,'; text="').concat(e,'"'))),(this._dialog||this._createDialog(i,"UAC"))&&(this.sendRequest(M.ACK),this.sendRequest(M.BYE,{extraHeaders:c})),this._status=D.STATUS_TERMINATED}},{key:"_mangleOffer",value:function(i){if(!this._localHold&&!this._remoteHold)return i;if(i=mp.parse(i),this._localHold&&!this._remoteHold){I.debug("mangleOffer() | me on hold, mangling offer");var l=Yt(i.media),e;try{for(l.s();!(e=l.n()).done;){var c=e.value;To.indexOf(c.type)!==-1&&(c.direction?c.direction==="sendrecv"?c.direction="sendonly":c.direction==="recvonly"&&(c.direction="inactive"):c.direction="sendonly")}}catch(v){l.e(v)}finally{l.f()}}else if(this._localHold&&this._remoteHold){I.debug("mangleOffer() | both on hold, mangling offer");var m=Yt(i.media),p;try{for(m.s();!(p=m.n()).done;){var b=p.value;To.indexOf(b.type)!==-1&&(b.direction="inactive")}}catch(v){m.e(v)}finally{m.f()}}else if(this._remoteHold){I.debug("mangleOffer() | remote on hold, mangling offer");var y=Yt(i.media),f;try{for(y.s();!(f=y.n()).done;){var S=f.value;To.indexOf(S.type)!==-1&&(S.direction?S.direction==="sendrecv"?S.direction="recvonly":S.direction==="recvonly"&&(S.direction="inactive"):S.direction="recvonly")}}catch(v){y.e(v)}finally{y.f()}}return mp.write(i)}},{key:"_setLocalMediaStatus",value:function(){var i=!0,l=!0;(this._localHold||this._remoteHold)&&(i=!1,l=!1),this._audioMuted&&(i=!1),this._videoMuted&&(l=!1),this._toggleMuteAudio(!i),this._toggleMuteVideo(!l)}},{key:"_handleSessionTimersInIncomingRequest",value:function(i,l){if(this._sessionTimers.enabled){var e;i.session_expires&&i.session_expires>=M.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=i.session_expires,e=i.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,e="uas"),l.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(e)),this._sessionTimers.refresher=e==="uas",this._runSessionTimer()}}},{key:"_handleSessionTimersInIncomingResponse",value:function(i){if(this._sessionTimers.enabled){var l;i.session_expires&&i.session_expires>=M.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=i.session_expires,l=i.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,l="uac"),this._sessionTimers.refresher=l==="uac",this._runSessionTimer()}}},{key:"_runSessionTimer",value:function(){var i=this,l=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout(function(){i._status!==D.STATUS_TERMINATED&&i._isReadyToReOffer()&&(I.debug("runSessionTimer() | sending session refresh request"),i._sessionTimers.refreshMethod===M.UPDATE?i._sendUpdate():i._sendReinvite())},l*500):this._sessionTimers.timer=setTimeout(function(){i._status!==D.STATUS_TERMINATED&&(I.warn("runSessionTimer() | timer expired, terminating the session"),i.terminate({cause:M.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))},l*1100)}},{key:"_toggleMuteAudio",value:function(i){var l=this._connection.getSenders().filter(function(p){return p.track&&p.track.kind==="audio"}),e=Yt(l),c;try{for(e.s();!(c=e.n()).done;){var m=c.value;m.track.enabled=!i}}catch(p){e.e(p)}finally{e.f()}}},{key:"_toggleMuteVideo",value:function(i){var l=this._connection.getSenders().filter(function(p){return p.track&&p.track.kind==="video"}),e=Yt(l),c;try{for(e.s();!(c=e.n()).done;){var m=c.value;m.track.enabled=!i}}catch(p){e.e(p)}finally{e.f()}}},{key:"_newRTCSession",value:function(i,l){I.debug("newRTCSession()"),this._ua.newRTCSession(this,{originator:i,session:this,request:l})}},{key:"_connecting",value:function(i){I.debug("session connecting"),I.debug('emit "connecting"'),this.emit("connecting",{request:i})}},{key:"_progress",value:function(i,l){I.debug("session progress"),I.debug('emit "progress"'),this.emit("progress",{originator:i,response:l||null})}},{key:"_accepted",value:function(i,l){I.debug("session accepted"),this._start_time=new Date,I.debug('emit "accepted"'),this.emit("accepted",{originator:i,response:l||null})}},{key:"_confirmed",value:function(i,l){I.debug("session confirmed"),this._is_confirmed=!0,I.debug('emit "confirmed"'),this.emit("confirmed",{originator:i,ack:l||null})}},{key:"_ended",value:function(i,l,e){I.debug("session ended"),this._end_time=new Date,this._close(),I.debug('emit "ended"'),this.emit("ended",{originator:i,message:l||null,cause:e})}},{key:"_failed",value:function(i,l,e){I.debug("session failed"),I.debug('emit "_failed"'),this.emit("_failed",{originator:i,message:l||null,cause:e}),this._close(),I.debug('emit "failed"'),this.emit("failed",{originator:i,message:l||null,cause:e})}},{key:"_onhold",value:function(i){I.debug("session onhold"),this._setLocalMediaStatus(),I.debug('emit "hold"'),this.emit("hold",{originator:i})}},{key:"_onunhold",value:function(i){I.debug("session onunhold"),this._setLocalMediaStatus(),I.debug('emit "unhold"'),this.emit("unhold",{originator:i})}},{key:"_onmute",value:function(i){var l=i.audio,e=i.video;I.debug("session onmute"),this._setLocalMediaStatus(),I.debug('emit "muted"'),this.emit("muted",{audio:l,video:e})}},{key:"_onunmute",value:function(i){var l=i.audio,e=i.video;I.debug("session onunmute"),this._setLocalMediaStatus(),I.debug('emit "unmuted"'),this.emit("unmuted",{audio:l,video:e})}},{key:"C",get:function(){return D}},{key:"causes",get:function(){return M.causes}},{key:"id",get:function(){return this._id}},{key:"connection",get:function(){return this._connection}},{key:"contact",get:function(){return this._contact}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"start_time",get:function(){return this._start_time}},{key:"end_time",get:function(){return this._end_time}},{key:"data",get:function(){return this._data},set:function(i){this._data=i}},{key:"status",get:function(){return this._status}}]),o}(kT)});var Cp=Z((MS,wp)=>{"use strict";function So(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?So=function(o){return typeof o}:So=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},So(s)}function UT(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function yp(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function jT(s,r,o){return r&&yp(s.prototype,r),o&&yp(s,o),s}function HT(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&dc(s,r)}function dc(s,r){return dc=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},dc(s,r)}function qT(s){var r=VT();return function(){var t=Ao(s),i;if(r){var l=Ao(this).constructor;i=Reflect.construct(t,arguments,l)}else i=t.apply(this,arguments);return zT(this,i)}}function zT(s,r){return r&&(So(r)==="object"||typeof r=="function")?r:BT(s)}function BT(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function VT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ao(s){return Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ao(s)}var $T=Vt().EventEmitter,WT=Ne(),uc=Ie(),GT=kt(),Ni=Le(),KT=Tr(),Tp=zt(),YT=Bt(),Eo=new WT("Message");wp.exports=function(s){HT(o,s);var r=qT(o);function o(t){var i;return UT(this,o),i=r.call(this),i._ua=t,i._request=null,i._closed=!1,i._direction=null,i._local_identity=null,i._remote_identity=null,i._is_replied=!1,i._data={},i}return jT(o,[{key:"send",value:function(i,l){var e=this,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=i;if(i===void 0||l===void 0)throw new TypeError("Not enough arguments");if(i=this._ua.normalizeTarget(i),!i)throw new TypeError("Invalid target: ".concat(m));var p=Ni.cloneArray(c.extraHeaders),b=Ni.cloneObject(c.eventHandlers),y=c.contentType||"text/plain",f={};c.fromUserName&&(f.from_uri=new YT("sip",c.fromUserName,this._ua.configuration.uri.host),p.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),c.fromDisplayName&&(f.from_display_name=c.fromDisplayName);for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&this.on(S,b[S]);p.push("Content-Type: ".concat(y)),this._request=new GT.OutgoingRequest(uc.MESSAGE,i,this._ua,f,p),l&&(this._request.body=l);var v=new KT(this._ua,this._request,{onRequestTimeout:function(){e._onRequestTimeout()},onTransportError:function(){e._onTransportError()},onReceiveResponse:function(q){e._receiveResponse(q)}});this._newMessage("local",this._request),v.send()}},{key:"init_incoming",value:function(i){this._request=i,this._newMessage("remote",i),this._is_replied||(this._is_replied=!0,i.reply(200)),this._close()}},{key:"accept",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=Ni.cloneArray(i.extraHeaders),e=i.body;if(this._direction!=="incoming")throw new Tp.NotSupportedError('"accept" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");this._is_replied=!0,this._request.reply(200,null,l,e)}},{key:"reject",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=i.status_code||480,e=i.reason_phrase,c=Ni.cloneArray(i.extraHeaders),m=i.body;if(this._direction!=="incoming")throw new Tp.NotSupportedError('"reject" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");if(l<300||l>=700)throw new TypeError("Invalid status_code: ".concat(l));this._is_replied=!0,this._request.reply(l,e,c,m)}},{key:"_receiveResponse",value:function(i){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(i.status_code):break;case/^2[0-9]{2}$/.test(i.status_code):this._succeeded("remote",i);break;default:{var l=Ni.sipErrorCause(i.status_code);this._failed("remote",i,l);break}}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,uc.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,uc.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newMessage",value:function(i,l){i==="remote"?(this._direction="incoming",this._local_identity=l.to,this._remote_identity=l.from):i==="local"&&(this._direction="outgoing",this._local_identity=l.from,this._remote_identity=l.to),this._ua.newMessage(this,{originator:i,message:this,request:l})}},{key:"_failed",value:function(i,l,e){Eo.debug("MESSAGE failed"),this._close(),Eo.debug('emit "failed"'),this.emit("failed",{originator:i,response:l||null,cause:e})}},{key:"_succeeded",value:function(i,l){Eo.debug("MESSAGE succeeded"),this._close(),Eo.debug('emit "succeeded"'),this.emit("succeeded",{originator:i,response:l})}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}}]),o}($T)});var Rp=Z((PS,Ap)=>{"use strict";function Io(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Io=function(o){return typeof o}:Io=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Io(s)}function XT(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Ep(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function ZT(s,r,o){return r&&Ep(s.prototype,r),o&&Ep(s,o),s}function JT(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&hc(s,r)}function hc(s,r){return hc=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},hc(s,r)}function QT(s){var r=nw();return function(){var t=xo(s),i;if(r){var l=xo(this).constructor;i=Reflect.construct(t,arguments,l)}else i=t.apply(this,arguments);return ew(this,i)}}function ew(s,r){return r&&(Io(r)==="object"||typeof r=="function")?r:tw(s)}function tw(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function nw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function xo(s){return xo=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},xo(s)}var rw=Vt().EventEmitter,iw=Ne(),fc=Ie(),sw=kt(),Mi=Le(),ow=Tr(),Sp=zt(),Ro=new iw("Options");Ap.exports=function(s){JT(o,s);var r=QT(o);function o(t){var i;return XT(this,o),i=r.call(this),i._ua=t,i._request=null,i._closed=!1,i._direction=null,i._local_identity=null,i._remote_identity=null,i._is_replied=!1,i._data={},i}return ZT(o,[{key:"send",value:function(i,l){var e=this,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=i;if(i===void 0)throw new TypeError("A target is required for OPTIONS");if(i=this._ua.normalizeTarget(i),!i)throw new TypeError("Invalid target: ".concat(m));var p=Mi.cloneArray(c.extraHeaders),b=Mi.cloneObject(c.eventHandlers),y=c.contentType||"application/sdp";for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&this.on(f,b[f]);p.push("Content-Type: ".concat(y)),this._request=new sw.OutgoingRequest(fc.OPTIONS,i,this._ua,null,p),l&&(this._request.body=l);var S=new ow(this._ua,this._request,{onRequestTimeout:function(){e._onRequestTimeout()},onTransportError:function(){e._onTransportError()},onReceiveResponse:function(C){e._receiveResponse(C)}});this._newOptions("local",this._request),S.send()}},{key:"init_incoming",value:function(i){this._request=i,this._newOptions("remote",i),this._is_replied||(this._is_replied=!0,i.reply(200)),this._close()}},{key:"accept",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=Mi.cloneArray(i.extraHeaders),e=i.body;if(this._direction!=="incoming")throw new Sp.NotSupportedError('"accept" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");this._is_replied=!0,this._request.reply(200,null,l,e)}},{key:"reject",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=i.status_code||480,e=i.reason_phrase,c=Mi.cloneArray(i.extraHeaders),m=i.body;if(this._direction!=="incoming")throw new Sp.NotSupportedError('"reject" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");if(l<300||l>=700)throw new TypeError("Invalid status_code: ".concat(l));this._is_replied=!0,this._request.reply(l,e,c,m)}},{key:"_receiveResponse",value:function(i){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(i.status_code):break;case/^2[0-9]{2}$/.test(i.status_code):this._succeeded("remote",i);break;default:{var l=Mi.sipErrorCause(i.status_code);this._failed("remote",i,l);break}}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,fc.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,fc.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newOptions",value:function(i,l){i==="remote"?(this._direction="incoming",this._local_identity=l.to,this._remote_identity=l.from):i==="local"&&(this._direction="outgoing",this._local_identity=l.from,this._remote_identity=l.to),this._ua.newOptions(this,{originator:i,message:this,request:l})}},{key:"_failed",value:function(i,l,e){Ro.debug("OPTIONS failed"),this._close(),Ro.debug('emit "failed"'),this.emit("failed",{originator:i,response:l||null,cause:e})}},{key:"_succeeded",value:function(i,l){Ro.debug("OPTIONS succeeded"),this._close(),Ro.debug('emit "succeeded"'),this.emit("succeeded",{originator:i,response:l})}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}}]),o}(rw)});var pc=Z(Ip=>{"use strict";var aw=Ne(),mc=Le(),lw=Tt(),Pi=new aw("Socket");Ip.isSocket=function(s){if(Array.isArray(s))return!1;if(typeof s>"u")return Pi.warn("undefined JsSIP.Socket instance"),!1;try{if(!mc.isString(s.url))throw Pi.warn("missing or invalid JsSIP.Socket url property"),new Error("Missing or invalid JsSIP.Socket url property");if(!mc.isString(s.via_transport))throw Pi.warn("missing or invalid JsSIP.Socket via_transport property"),new Error("Missing or invalid JsSIP.Socket via_transport property");if(lw.parse(s.sip_uri,"SIP_URI")===-1)throw Pi.warn("missing or invalid JsSIP.Socket sip_uri property"),new Error("missing or invalid JsSIP.Socket sip_uri property")}catch{return!1}try{["connect","disconnect","send"].forEach(function(r){if(!mc.isFunction(s[r]))throw Pi.warn("missing or invalid JsSIP.Socket method: ".concat(r)),new Error("Missing or invalid JsSIP.Socket method: ".concat(r))})}catch{return!1}return!0}});var kp=Z((LS,Op)=>{"use strict";function cw(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function xp(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function uw(s,r,o){return r&&xp(s.prototype,r),o&&xp(s,o),s}var dw=Ne(),fw=pc(),Dp=Ie(),$e=new dw("Transport"),pt={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:Dp.CONNECTION_RECOVERY_MIN_INTERVAL,max_interval:Dp.CONNECTION_RECOVERY_MAX_INTERVAL}};Op.exports=function(){function s(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pt.recovery_options;cw(this,s),$e.debug("new()"),this.status=pt.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=o,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1;try{this.textDecoder=new TextDecoder("utf8")}catch(t){$e.warn("cannot use TextDecoder: ".concat(t))}if(typeof r>"u")throw new TypeError("Invalid argument. undefined 'sockets' argument");r instanceof Array||(r=[r]),r.forEach(function(t){if(!fw.isSocket(t.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(t.weight&&!Number(t.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:t.socket,weight:t.weight||0,status:pt.SOCKET_STATUS_READY})},this),this._getSocket()}return uw(s,[{key:"connect",value:function(){if($e.debug("connect()"),this.isConnected()){$e.debug("Transport is already connected");return}else if(this.isConnecting()){$e.debug("Transport is connecting");return}this.close_requested=!1,this.status=pt.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),this.close_requested||(this.socket.onconnect=this._onConnect.bind(this),this.socket.ondisconnect=this._onDisconnect.bind(this),this.socket.ondata=this._onData.bind(this),this.socket.connect())}},{key:"disconnect",value:function(){$e.debug("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=pt.STATUS_DISCONNECTED,this.recovery_timer!==null&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect({socket:this.socket,error:!1})}},{key:"send",value:function(o){if($e.debug("send()"),!this.isConnected())return $e.warn("unable to send message, transport is not connected"),!1;var t=o.toString();return $e.debug(`sending message:

`.concat(t,`
`)),this.socket.send(t)}},{key:"isConnected",value:function(){return this.status===pt.STATUS_CONNECTED}},{key:"isConnecting",value:function(){return this.status===pt.STATUS_CONNECTING}},{key:"_reconnect",value:function(){var o=this;this.recover_attempts+=1;var t=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1);t<this.recovery_options.min_interval?t=this.recovery_options.min_interval:t>this.recovery_options.max_interval&&(t=this.recovery_options.max_interval),$e.debug("reconnection attempt: ".concat(this.recover_attempts,". next connection attempt in ").concat(t," seconds")),this.recovery_timer=setTimeout(function(){!o.close_requested&&!(o.isConnected()||o.isConnecting())&&(o._getSocket(),o.connect())},t*1e3)}},{key:"_getSocket",value:function(){var o=[];if(this.sockets.forEach(function(i){i.status!==pt.SOCKET_STATUS_ERROR&&(o.length===0?o.push(i):i.weight>o[0].weight?o=[i]:i.weight===o[0].weight&&o.push(i))}),o.length===0){this.sockets.forEach(function(i){i.status=pt.SOCKET_STATUS_READY}),this._getSocket();return}var t=Math.floor(Math.random()*o.length);this.socket=o[t].socket}},{key:"_onConnect",value:function(){this.recover_attempts=0,this.status=pt.STATUS_CONNECTED,this.recovery_timer!==null&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}},{key:"_onDisconnect",value:function(o,t,i){this.status=pt.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:o,code:t,reason:i}),!this.close_requested&&(this.sockets.forEach(function(l){this.socket===l.socket&&(l.status=pt.SOCKET_STATUS_ERROR)},this),this._reconnect(o))}},{key:"_onData",value:function(o){if(o===`\r
\r
`){$e.debug("received message with double-CRLF Keep Alive request");try{this.socket.send(`\r
`)}catch(t){$e.warn("error sending Keep Alive response: ".concat(t))}return}if(o===`\r
`){$e.debug("received message with CRLF Keep Alive response");return}else if(typeof o!="string"){try{this.textDecoder?o=this.textDecoder.decode(o):o=String.fromCharCode.apply(null,new Uint8Array(o))}catch{$e.debug("received binary message failed to be converted into string, message discarded");return}$e.debug(`received binary message:

`.concat(o,`
`))}else $e.debug(`received text message:

`.concat(o,`
`));this.ondata({transport:this,message:o})}},{key:"via_transport",get:function(){return this.socket.via_transport}},{key:"url",get:function(){return this.socket.url}},{key:"sip_uri",get:function(){return this.socket.sip_uri}}]),s}()});var Fp=Z(Pp=>{"use strict";function Np(s,r){var o;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(o=hw(s))||r&&s&&typeof s.length=="number"){o&&(s=o);var t=0,i=function(){};return{s:i,n:function(){return t>=s.length?{done:!0}:{done:!1,value:s[t++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,e=!1,c;return{s:function(){o=s[Symbol.iterator]()},n:function(){var p=o.next();return l=p.done,p},e:function(p){e=!0,c=p},f:function(){try{!l&&o.return!=null&&o.return()}finally{if(e)throw c}}}}function hw(s,r){if(s){if(typeof s=="string")return Mp(s,r);var o=Object.prototype.toString.call(s).slice(8,-1);if(o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set")return Array.from(s);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Mp(s,r)}}function Mp(s,r){(r==null||r>s.length)&&(r=s.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=s[o];return t}var mw=Ne(),gc=Tt(),bc=kt(),Do=new mw("Parser");Pp.parseMessage=function(s,r){var o,t,i=s.indexOf(`\r
`);if(i===-1){Do.warn("parseMessage() | no CRLF found, not a SIP message");return}var l=s.substring(0,i),e=gc.parse(l,"Request_Response");if(e===-1){Do.warn('parseMessage() | error parsing first line of SIP message: "'.concat(l,'"'));return}else e.status_code?(o=new bc.IncomingResponse,o.status_code=e.status_code,o.reason_phrase=e.reason_phrase):(o=new bc.IncomingRequest(r),o.method=e.method,o.ruri=e.uri);o.data=s;for(var c=i+2;;){if(i=pw(s,c),i===-2){t=c+2;break}else if(i===-1){Do.warn("parseMessage() | malformed message");return}if(e=gw(o,s,c,i),e!==!0){Do.warn("parseMessage() |",e.error);return}c=i+2}if(o.hasHeader("content-length")){var m=o.getHeader("content-length");o.body=s.substr(t,m)}else o.body=s.substring(t);return o};function pw(s,r){var o=r,t=0,i=0;if(s.substring(o,o+2).match(/(^\r\n)/))return-2;for(;t===0;){if(i=s.indexOf(`\r
`,o),i===-1)return i;!s.substring(i+2,i+4).match(/(^\r\n)/)&&s.charAt(i+2).match(/(^\s+)/)?o=i+2:t=i}return t}function gw(s,r,o,t){var i,l=r.indexOf(":",o),e=r.substring(o,l).trim(),c=r.substring(l+1,t).trim();switch(e.toLowerCase()){case"via":case"v":s.addHeader("via",c),s.getHeaders("via").length===1?(i=s.parseHeader("Via"),i&&(s.via=i,s.via_branch=i.branch)):i=0;break;case"from":case"f":s.setHeader("from",c),i=s.parseHeader("from"),i&&(s.from=i,s.from_tag=i.getParam("tag"));break;case"to":case"t":s.setHeader("to",c),i=s.parseHeader("to"),i&&(s.to=i,s.to_tag=i.getParam("tag"));break;case"record-route":if(i=gc.parse(c,"Record_Route"),i===-1)i=void 0;else{var m=Np(i),p;try{for(m.s();!(p=m.n()).done;){var b=p.value;s.addHeader("record-route",c.substring(b.possition,b.offset)),s.headers["Record-Route"][s.getHeaders("record-route").length-1].parsed=b.parsed}}catch(v){m.e(v)}finally{m.f()}}break;case"call-id":case"i":s.setHeader("call-id",c),i=s.parseHeader("call-id"),i&&(s.call_id=c);break;case"contact":case"m":if(i=gc.parse(c,"Contact"),i===-1)i=void 0;else{var y=Np(i),f;try{for(y.s();!(f=y.n()).done;){var S=f.value;s.addHeader("contact",c.substring(S.possition,S.offset)),s.headers.Contact[s.getHeaders("contact").length-1].parsed=S.parsed}}catch(v){y.e(v)}finally{y.f()}}break;case"content-length":case"l":s.setHeader("content-length",c),i=s.parseHeader("content-length");break;case"content-type":case"c":s.setHeader("content-type",c),i=s.parseHeader("content-type");break;case"cseq":s.setHeader("cseq",c),i=s.parseHeader("cseq"),i&&(s.cseq=i.value),s instanceof bc.IncomingResponse&&(s.method=i.method);break;case"max-forwards":s.setHeader("max-forwards",c),i=s.parseHeader("max-forwards");break;case"www-authenticate":s.setHeader("www-authenticate",c),i=s.parseHeader("www-authenticate");break;case"proxy-authenticate":s.setHeader("proxy-authenticate",c),i=s.parseHeader("proxy-authenticate");break;case"session-expires":case"x":s.setHeader("session-expires",c),i=s.parseHeader("session-expires"),i&&(s.session_expires=i.expires,s.session_expires_refresher=i.refresher);break;case"refer-to":case"r":s.setHeader("refer-to",c),i=s.parseHeader("refer-to"),i&&(s.refer_to=i);break;case"replaces":s.setHeader("replaces",c),i=s.parseHeader("replaces"),i&&(s.replaces=i);break;case"event":case"o":s.setHeader("event",c),i=s.parseHeader("event"),i&&(s.event=i);break;default:s.addHeader(e,c),i=0}return i===void 0?{error:'error parsing header "'.concat(e,'"')}:!0}});var zp=Z((jS,qp)=>{"use strict";function Oo(s,r){var o;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(o=bw(s))||r&&s&&typeof s.length=="number"){o&&(s=o);var t=0,i=function(){};return{s:i,n:function(){return t>=s.length?{done:!0}:{done:!1,value:s[t++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,e=!1,c;return{s:function(){o=s[Symbol.iterator]()},n:function(){var p=o.next();return l=p.done,p},e:function(p){e=!0,c=p},f:function(){try{!l&&o.return!=null&&o.return()}finally{if(e)throw c}}}}function bw(s,r){if(s){if(typeof s=="string")return Lp(s,r);var o=Object.prototype.toString.call(s).slice(8,-1);if(o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set")return Array.from(s);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Lp(s,r)}}function Lp(s,r){(r==null||r>s.length)&&(r=s.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=s[o];return t}var _w=Ne(),jp=Ie(),Up=kt(),_c=Le(),vc=new _w("sanityCheck"),vw=[Iw],yw=[ww,Cw,Ew,Sw],Tw=[Aw,Rw],fe,Mt,Hp;qp.exports=function(s,r,o){fe=s,Mt=r,Hp=o;var t=Oo(vw),i;try{for(t.s();!(i=t.n()).done;){var l=i.value;if(l()===!1)return!1}}catch(f){t.e(f)}finally{t.f()}if(fe instanceof Up.IncomingRequest){var e=Oo(yw),c;try{for(e.s();!(c=e.n()).done;){var m=c.value;if(m()===!1)return!1}}catch(f){e.e(f)}finally{e.f()}}else if(fe instanceof Up.IncomingResponse){var p=Oo(Tw),b;try{for(p.s();!(b=p.n()).done;){var y=b.value;if(y()===!1)return!1}}catch(f){p.e(f)}finally{p.f()}}return!0};function ww(){if(fe.s("to").uri.scheme!=="sip")return Fi(416),!1}function Cw(){if(!fe.to_tag&&fe.call_id.substr(0,5)===Mt.configuration.jssip_id)return Fi(482),!1}function Ew(){var s=_c.str_utf8_length(fe.body),r=fe.getHeader("content-length");if(s<r)return Fi(400),!1}function Sw(){var s=fe.from_tag,r=fe.call_id,o=fe.cseq,t;if(!fe.to_tag)if(fe.method===jp.INVITE){if(Mt._transactions.ist[fe.via_branch])return!1;for(var i in Mt._transactions.ist)if(Object.prototype.hasOwnProperty.call(Mt._transactions.ist,i)&&(t=Mt._transactions.ist[i],t.request.from_tag===s&&t.request.call_id===r&&t.request.cseq===o))return Fi(482),!1}else{if(Mt._transactions.nist[fe.via_branch])return!1;for(var l in Mt._transactions.nist)if(Object.prototype.hasOwnProperty.call(Mt._transactions.nist,l)&&(t=Mt._transactions.nist[l],t.request.from_tag===s&&t.request.call_id===r&&t.request.cseq===o))return Fi(482),!1}}function Aw(){if(fe.getHeaders("via").length>1)return vc.debug("more than one Via header field present in the response, dropping the response"),!1}function Rw(){var s=_c.str_utf8_length(fe.body),r=fe.getHeader("content-length");if(s<r)return vc.debug("message body length is lower than the value in Content-Length header field, dropping the response"),!1}function Iw(){for(var s=["from","to","call_id","cseq","via"],r=0,o=s;r<o.length;r++){var t=o[r];if(!fe.hasHeader(t))return vc.debug("missing mandatory header field : ".concat(t,", dropping the response")),!1}}function Fi(s){var r=fe.getHeaders("via"),o,t="SIP/2.0 ".concat(s," ").concat(jp.REASON_PHRASE[s],`\r
`),i=Oo(r),l;try{for(i.s();!(l=i.n()).done;){var e=l.value;t+="Via: ".concat(e,`\r
`)}}catch(c){i.e(c)}finally{i.f()}o=fe.getHeader("To"),fe.to_tag||(o+=";tag=".concat(_c.newTag())),t+="To: ".concat(o,`\r
`),t+="From: ".concat(fe.getHeader("From"),`\r
`),t+="Call-ID: ".concat(fe.call_id,`\r
`),t+="CSeq: ".concat(fe.cseq," ").concat(fe.method,`\r
`),t+=`\r
`,Hp.send(t)}});var Wp=Z(Cc=>{"use strict";function Bp(s,r){var o;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(o=xw(s))||r&&s&&typeof s.length=="number"){o&&(s=o);var t=0,i=function(){};return{s:i,n:function(){return t>=s.length?{done:!0}:{done:!1,value:s[t++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,e=!1,c;return{s:function(){o=s[Symbol.iterator]()},n:function(){var p=o.next();return l=p.done,p},e:function(p){e=!0,c=p},f:function(){try{!l&&o.return!=null&&o.return()}finally{if(e)throw c}}}}function xw(s,r){if(s){if(typeof s=="string")return Vp(s,r);var o=Object.prototype.toString.call(s).slice(8,-1);if(o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set")return Array.from(s);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Vp(s,r)}}function Vp(s,r){(r==null||r>s.length)&&(r=s.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=s[o];return t}var wr=Le(),Un=Ie(),yc=Tt(),$p=Bt(),Tc=pc(),wc=zt();Cc.settings={authorization_user:null,password:null,realm:null,ha1:null,authorization_jwt:null,display_name:null,uri:null,contact_uri:null,instance_id:null,use_preloaded_route:!1,session_timers:!0,session_timers_refresh_method:Un.UPDATE,session_timers_force_refresher:!1,no_answer_timeout:60,register:!0,register_expires:600,registrar_server:null,sockets:null,connection_recovery_max_interval:Un.CONNECTION_RECOVERY_MAX_INTERVAL,connection_recovery_min_interval:Un.CONNECTION_RECOVERY_MIN_INTERVAL,extra_headers:null,via_host:"".concat(wr.createRandomToken(12),".invalid")};var ko={mandatory:{sockets:function(r){var o=[];if(Tc.isSocket(r))o.push({socket:r});else if(Array.isArray(r)&&r.length){var t=Bp(r),i;try{for(t.s();!(i=t.n()).done;){var l=i.value;Object.prototype.hasOwnProperty.call(l,"socket")&&Tc.isSocket(l.socket)?o.push(l):Tc.isSocket(l)&&o.push({socket:l})}}catch(e){t.e(e)}finally{t.f()}}else return;return o},uri:function(r){/^sip:/i.test(r)||(r="".concat(Un.SIP,":").concat(r));var o=$p.parse(r);if(o)return o.user?o:void 0}},optional:{authorization_user:function(r){if(yc.parse('"'.concat(r,'"'),"quoted_string")!==-1)return r},authorization_jwt:function(r){if(typeof r=="string")return r},user_agent:function(r){if(typeof r=="string")return r},connection_recovery_max_interval:function(r){if(wr.isDecimal(r)){var o=Number(r);if(o>0)return o}},connection_recovery_min_interval:function(r){if(wr.isDecimal(r)){var o=Number(r);if(o>0)return o}},contact_uri:function(r){if(typeof r=="string"){var o=yc.parse(r,"SIP_URI");if(o!==-1)return o}},display_name:function(r){return r},instance_id:function(r){if(/^uuid:/i.test(r)&&(r=r.substr(5)),yc.parse(r,"uuid")!==-1)return r},no_answer_timeout:function(r){if(wr.isDecimal(r)){var o=Number(r);if(o>0)return o}},session_timers:function(r){if(typeof r=="boolean")return r},session_timers_refresh_method:function(r){if(typeof r=="string"&&(r=r.toUpperCase(),r===Un.INVITE||r===Un.UPDATE))return r},session_timers_force_refresher:function(r){if(typeof r=="boolean")return r},password:function(r){return String(r)},realm:function(r){return String(r)},ha1:function(r){return String(r)},register:function(r){if(typeof r=="boolean")return r},register_expires:function(r){if(wr.isDecimal(r)){var o=Number(r);if(o>0)return o}},registrar_server:function(r){/^sip:/i.test(r)||(r="".concat(Un.SIP,":").concat(r));var o=$p.parse(r);if(o)return o.user?void 0:o},use_preloaded_route:function(r){if(typeof r=="boolean")return r},extra_headers:function(r){var o=[];if(Array.isArray(r)&&r.length){var t=Bp(r),i;try{for(t.s();!(i=t.n()).done;){var l=i.value;typeof l=="string"&&o.push(l)}}catch(e){t.e(e)}finally{t.f()}}else return;return o}}};Cc.load=function(s,r){for(var o in ko.mandatory)if(r.hasOwnProperty(o)){var t=r[o],i=ko.mandatory[o](t);if(i!==void 0)s[o]=i;else throw new wc.ConfigurationError(o,t)}else throw new wc.ConfigurationError(o);for(var l in ko.optional)if(r.hasOwnProperty(l)){var e=r[l];if(wr.isEmpty(e))continue;var c=ko.optional[l](e);if(c!==void 0)s[l]=c;else throw new wc.ConfigurationError(l,e)}}});var eg=Z((qS,Qp)=>{"use strict";function Mo(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mo=function(o){return typeof o}:Mo=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Mo(s)}function Dw(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Gp(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function Kp(s,r,o){return r&&Gp(s.prototype,r),o&&Gp(s,o),s}function Ow(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&Rc(s,r)}function Rc(s,r){return Rc=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},Rc(s,r)}function kw(s){var r=Mw();return function(){var t=Po(s),i;if(r){var l=Po(this).constructor;i=Reflect.construct(t,arguments,l)}else i=t.apply(this,arguments);return Nw(this,i)}}function Nw(s,r){return r&&(Mo(r)==="object"||typeof r=="function")?r:Jp(s)}function Jp(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Mw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Po(s){return Po=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Po(s)}var Pw=Vt().EventEmitter,Fw=Ne(),je=Ie(),Lw=qm(),Yp=vp(),Xp=Cp(),Zp=Rp(),Ec=yr(),Uw=kp(),No=Le(),jw=zt(),Hw=Bt(),qw=Fp(),Sc=kt(),zw=zp(),Ac=Wp(),be=new Fw("UA"),He={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2};Qp.exports=function(s){Ow(o,s);var r=kw(o);Kp(o,null,[{key:"C",get:function(){return He}}]);function o(t){var i;if(Dw(this,o),be.debug("new() [configuration:%o]",t),i=r.call(this),i._cache={credentials:{}},i._configuration=Object.assign({},Ac.settings),i._dynConfiguration={},i._dialogs={},i._applicants={},i._sessions={},i._transport=null,i._contact=null,i._status=He.STATUS_INIT,i._error=null,i._transactions={nist:{},nict:{},ist:{},ict:{}},i._data={},i._closeTimer=null,t===void 0)throw new TypeError("Not enough arguments");try{i._loadConfig(t)}catch(l){throw i._status=He.STATUS_NOT_READY,i._error=He.CONFIGURATION_ERROR,l}return i._registrator=new Lw(Jp(i)),i}return Kp(o,[{key:"start",value:function(){be.debug("start()"),this._status===He.STATUS_INIT?this._transport.connect():this._status===He.STATUS_USER_CLOSED?(be.debug("restarting UA"),this._closeTimer!==null&&(clearTimeout(this._closeTimer),this._closeTimer=null,this._transport.disconnect()),this._status=He.STATUS_INIT,this._transport.connect()):this._status===He.STATUS_READY?be.debug("UA is in READY status, not restarted"):be.debug("ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this._dynConfiguration.register=this._configuration.register}},{key:"register",value:function(){be.debug("register()"),this._dynConfiguration.register=!0,this._registrator.register()}},{key:"unregister",value:function(i){be.debug("unregister()"),this._dynConfiguration.register=!1,this._registrator.unregister(i)}},{key:"registrator",value:function(){return this._registrator}},{key:"isRegistered",value:function(){return this._registrator.registered}},{key:"isConnected",value:function(){return this._transport.isConnected()}},{key:"call",value:function(i,l){be.debug("call()");var e=new Yp(this);return e.connect(i,l),e}},{key:"sendMessage",value:function(i,l,e){be.debug("sendMessage()");var c=new Xp(this);return c.send(i,l,e),c}},{key:"sendOptions",value:function(i,l,e){be.debug("sendOptions()");var c=new Zp(this);return c.send(i,l,e),c}},{key:"terminateSessions",value:function(i){be.debug("terminateSessions()");for(var l in this._sessions)this._sessions[l].isEnded()||this._sessions[l].terminate(i)}},{key:"stop",value:function(){var i=this;if(be.debug("stop()"),this._dynConfiguration={},this._status===He.STATUS_USER_CLOSED){be.debug("UA already closed");return}this._registrator.close();var l=Object.keys(this._sessions).length;for(var e in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,e)){be.debug("closing session ".concat(e));try{this._sessions[e].terminate()}catch{}}for(var c in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,c))try{this._applicants[c].close()}catch{}this._status=He.STATUS_USER_CLOSED;var m=Object.keys(this._transactions.nict).length+Object.keys(this._transactions.nist).length+Object.keys(this._transactions.ict).length+Object.keys(this._transactions.ist).length;m===0&&l===0?this._transport.disconnect():this._closeTimer=setTimeout(function(){i._closeTimer=null,i._transport.disconnect()},2e3)}},{key:"normalizeTarget",value:function(i){return No.normalizeTarget(i,this._configuration.hostport_params)}},{key:"get",value:function(i){switch(i){case"authorization_user":return this._configuration.authorization_user;case"realm":return this._configuration.realm;case"ha1":return this._configuration.ha1;case"authorization_jwt":return this._configuration.authorization_jwt;default:be.warn('get() | cannot get "%s" parameter in runtime',i);return}}},{key:"set",value:function(i,l){switch(i){case"authorization_user":{this._configuration.authorization_user=String(l);break}case"password":{this._configuration.password=String(l);break}case"realm":{this._configuration.realm=String(l);break}case"ha1":{this._configuration.ha1=String(l),this._configuration.password=null;break}case"authorization_jwt":{this._configuration.authorization_jwt=String(l);break}case"display_name":{this._configuration.display_name=l;break}case"extra_headers":{this._configuration.extra_headers=l;break}default:return be.warn('set() | cannot set "%s" parameter in runtime',i),!1}return!0}},{key:"newTransaction",value:function(i){this._transactions[i.type][i.id]=i,this.emit("newTransaction",{transaction:i})}},{key:"destroyTransaction",value:function(i){delete this._transactions[i.type][i.id],this.emit("transactionDestroyed",{transaction:i})}},{key:"newDialog",value:function(i){this._dialogs[i.id]=i}},{key:"destroyDialog",value:function(i){delete this._dialogs[i.id]}},{key:"newMessage",value:function(i,l){this._applicants[i]=i,this.emit("newMessage",l)}},{key:"newOptions",value:function(i,l){this._applicants[i]=i,this.emit("newOptions",l)}},{key:"destroyMessage",value:function(i){delete this._applicants[i]}},{key:"newRTCSession",value:function(i,l){this._sessions[i.id]=i,this.emit("newRTCSession",l)}},{key:"destroyRTCSession",value:function(i){delete this._sessions[i.id]}},{key:"registered",value:function(i){this.emit("registered",i)}},{key:"unregistered",value:function(i){this.emit("unregistered",i)}},{key:"registrationFailed",value:function(i){this.emit("registrationFailed",i)}},{key:"receiveRequest",value:function(i){var l=i.method;if(i.ruri.user!==this._configuration.uri.user&&i.ruri.user!==this._contact.uri.user){be.debug("Request-URI does not point to us"),i.method!==je.ACK&&i.reply_sl(404);return}if(i.ruri.scheme===je.SIPS){i.reply_sl(416);return}if(!Ec.checkTransaction(this,i)){if(l===je.INVITE?new Ec.InviteServerTransaction(this,this._transport,i):l!==je.ACK&&l!==je.CANCEL&&new Ec.NonInviteServerTransaction(this,this._transport,i),l===je.OPTIONS){if(this.listeners("newOptions").length===0){i.reply(200);return}var e=new Zp(this);e.init_incoming(i)}else if(l===je.MESSAGE){if(this.listeners("newMessage").length===0){i.reply(405);return}var c=new Xp(this);c.init_incoming(i)}else if(l===je.INVITE&&!i.to_tag&&this.listeners("newRTCSession").length===0){i.reply(405);return}var m,p;if(i.to_tag)m=this._findDialog(i.call_id,i.from_tag,i.to_tag),m?m.receiveRequest(i):l===je.NOTIFY?(p=this._findSession(i),p?p.receiveRequest(i):(be.debug("received NOTIFY request for a non existent subscription"),i.reply(481,"Subscription does not exist"))):l!==je.ACK&&i.reply(481);else switch(l){case je.INVITE:if(window.RTCPeerConnection)if(i.hasHeader("replaces")){var b=i.replaces;m=this._findDialog(b.call_id,b.from_tag,b.to_tag),m?(p=m.owner,p.isEnded()?i.reply(603):p.receiveRequest(i)):i.reply(481)}else p=new Yp(this),p.init_incoming(i);else be.warn("INVITE received but WebRTC is not supported"),i.reply(488);break;case je.BYE:i.reply(481);break;case je.CANCEL:p=this._findSession(i),p?p.receiveRequest(i):be.debug("received CANCEL request for a non existent session");break;case je.ACK:break;case je.NOTIFY:this.emit("sipEvent",{event:i.event,request:i}),i.reply(200);break;default:i.reply(405);break}}}},{key:"_findSession",value:function(i){var l=i.call_id,e=i.from_tag,c=i.to_tag,m=l+e,p=this._sessions[m],b=l+c,y=this._sessions[b];return p||y||null}},{key:"_findDialog",value:function(i,l,e){var c=i+l+e,m=this._dialogs[c];return m||(c=i+e+l,m=this._dialogs[c],m||null)}},{key:"_loadConfig",value:function(i){try{Ac.load(this._configuration,i)}catch(b){throw b}this._configuration.display_name===0&&(this._configuration.display_name="0"),this._configuration.instance_id||(this._configuration.instance_id=No.newUUID()),this._configuration.jssip_id=No.createRandomToken(5);var l=this._configuration.uri.clone();l.user=null,this._configuration.hostport_params=l.toString().replace(/^sip:/i,"");try{this._transport=new Uw(this._configuration.sockets,{max_interval:this._configuration.connection_recovery_max_interval,min_interval:this._configuration.connection_recovery_min_interval}),this._transport.onconnecting=Bw.bind(this),this._transport.onconnect=Vw.bind(this),this._transport.ondisconnect=$w.bind(this),this._transport.ondata=Ww.bind(this)}catch(b){throw be.warn(b),new jw.ConfigurationError("sockets",this._configuration.sockets)}if(delete this._configuration.sockets,this._configuration.authorization_user||(this._configuration.authorization_user=this._configuration.uri.user),!this._configuration.registrar_server){var e=this._configuration.uri.clone();e.user=null,e.clearParams(),e.clearHeaders(),this._configuration.registrar_server=e}this._configuration.no_answer_timeout*=1e3,this._configuration.contact_uri?this._configuration.via_host=this._configuration.contact_uri.host:this._configuration.contact_uri=new Hw("sip",No.createRandomToken(8),this._configuration.via_host,null,{transport:"ws"}),this._contact={pub_gruu:null,temp_gruu:null,uri:this._configuration.contact_uri,toString:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=y.anonymous||null,S=y.outbound||null,v="<";return f?v+=this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":v+=this.pub_gruu||this.uri.toString(),S&&(f?!this.temp_gruu:!this.pub_gruu)&&(v+=";ob"),v+=">",v}};var c=["authorization_user","password","realm","ha1","authorization_jwt","display_name","register","extra_headers"];for(var m in this._configuration)Object.prototype.hasOwnProperty.call(this._configuration,m)&&(c.indexOf(m)!==-1?Object.defineProperty(this._configuration,m,{writable:!0,configurable:!1}):Object.defineProperty(this._configuration,m,{writable:!1,configurable:!1}));be.debug("configuration parameters after validation:");for(var p in this._configuration)if(Object.prototype.hasOwnProperty.call(Ac.settings,p))switch(p){case"uri":case"registrar_server":be.debug("- ".concat(p,": ").concat(this._configuration[p]));break;case"password":case"ha1":case"authorization_jwt":be.debug("- ".concat(p,": NOT SHOWN"));break;default:be.debug("- ".concat(p,": ").concat(JSON.stringify(this._configuration[p])))}}},{key:"C",get:function(){return He}},{key:"status",get:function(){return this._status}},{key:"contact",get:function(){return this._contact}},{key:"configuration",get:function(){return this._configuration}},{key:"transport",get:function(){return this._transport}}]),o}(Pw);function Bw(s){this.emit("connecting",s)}function Vw(s){this._status!==He.STATUS_USER_CLOSED&&(this._status=He.STATUS_READY,this._error=null,this.emit("connected",s),this._dynConfiguration.register&&this._registrator.register())}function $w(s){for(var r=["nict","ict","nist","ist"],o=0,t=r;o<t.length;o++){var i=t[o];for(var l in this._transactions[i])Object.prototype.hasOwnProperty.call(this._transactions[i],l)&&this._transactions[i][l].onTransportError()}this.emit("disconnected",s),this._registrator.onTransportClosed(),this._status!==He.STATUS_USER_CLOSED&&(this._status=He.STATUS_NOT_READY,this._error=He.NETWORK_ERROR)}function Ww(s){var r=s.transport,o=s.message;if(o=qw.parseMessage(o,this),!!o&&!(this._status===He.STATUS_USER_CLOSED&&o instanceof Sc.IncomingRequest)&&zw(o,this,r)){if(o instanceof Sc.IncomingRequest)o.transport=r,this.receiveRequest(o);else if(o instanceof Sc.IncomingResponse){var t;switch(o.method){case je.INVITE:t=this._transactions.ict[o.via_branch],t&&t.receiveResponse(o);break;case je.ACK:break;default:t=this._transactions.nict[o.via_branch],t&&t.receiveResponse(o);break}}}}});var rg=Z((zS,ng)=>{"use strict";function Gw(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function tg(s,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function Kw(s,r,o){return r&&tg(s.prototype,r),o&&tg(s,o),s}var Yw=Ne(),Xw=Tt(),Xe=new Yw("WebSocketInterface");ng.exports=function(){function s(r){Gw(this,s),Xe.debug('new() [url:"%s"]',r),this._url=r,this._sip_uri=null,this._via_transport=null,this._ws=null;var o=Xw.parse(r,"absoluteURI");if(o===-1)throw Xe.warn("invalid WebSocket URI: ".concat(r)),new TypeError("Invalid argument: ".concat(r));if(o.scheme!=="wss"&&o.scheme!=="ws")throw Xe.warn("invalid WebSocket URI scheme: ".concat(o.scheme)),new TypeError("Invalid argument: ".concat(r));this._sip_uri="sip:".concat(o.host).concat(o.port?":".concat(o.port):"",";transport=ws"),this._via_transport=o.scheme.toUpperCase()}return Kw(s,[{key:"connect",value:function(){if(Xe.debug("connect()"),this.isConnected()){Xe.debug("WebSocket ".concat(this._url," is already connected"));return}else if(this.isConnecting()){Xe.debug("WebSocket ".concat(this._url," is connecting"));return}this._ws&&this.disconnect(),Xe.debug("connecting to WebSocket ".concat(this._url));try{this._ws=new WebSocket(this._url,"sip"),this._ws.binaryType="arraybuffer",this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onmessage=this._onMessage.bind(this),this._ws.onerror=this._onError.bind(this)}catch(o){this._onError(o)}}},{key:"disconnect",value:function(){Xe.debug("disconnect()"),this._ws&&(this._ws.onopen=function(){},this._ws.onclose=function(){},this._ws.onmessage=function(){},this._ws.onerror=function(){},this._ws.close(),this._ws=null)}},{key:"send",value:function(o){return Xe.debug("send()"),this.isConnected()?(this._ws.send(o),!0):(Xe.warn("unable to send message, WebSocket is not open"),!1)}},{key:"isConnected",value:function(){return this._ws&&this._ws.readyState===this._ws.OPEN}},{key:"isConnecting",value:function(){return this._ws&&this._ws.readyState===this._ws.CONNECTING}},{key:"_onOpen",value:function(){Xe.debug("WebSocket ".concat(this._url," connected")),this.onconnect()}},{key:"_onClose",value:function(o){var t=o.wasClean,i=o.code,l=o.reason;Xe.debug("WebSocket ".concat(this._url," closed")),t===!1&&Xe.debug("WebSocket abrupt disconnection"),this.ondisconnect(!t,i,l)}},{key:"_onMessage",value:function(o){var t=o.data;Xe.debug("received WebSocket message"),this.ondata(t)}},{key:"_onError",value:function(o){Xe.warn("WebSocket ".concat(this._url," error: "),o)}},{key:"via_transport",get:function(){return this._via_transport},set:function(o){this._via_transport=o.toUpperCase()}},{key:"sip_uri",get:function(){return this._sip_uri}},{key:"url",get:function(){return this._url}}]),s}()});var sg=Z((BS,ig)=>{"use strict";var Ic=jl(),Zw=Ie(),Jw=zt(),Qw=Le(),eC=eg(),tC=Bt(),nC=Zs(),rC=Tt(),iC=rg(),sC=ro()("JsSIP");sC("version %s",Ic.version);ig.exports={C:Zw,Exceptions:Jw,Utils:Qw,UA:eC,URI:tC,NameAddrHeader:nC,WebSocketInterface:iC,Grammar:rC,debug:ro(),get name(){return Ic.title},get version(){return Ic.version}}});var ja=class{};var tr=class s{constructor(r){this.normalizedNames=new Map,this.lazyUpdate=null,r?typeof r=="string"?this.lazyInit=()=>{this.headers=new Map,r.split(`
`).forEach(o=>{let t=o.indexOf(":");if(t>0){let i=o.slice(0,t),l=i.toLowerCase(),e=o.slice(t+1).trim();this.maybeSetNormalizedName(i,l),this.headers.has(l)?this.headers.get(l).push(e):this.headers.set(l,[e])}})}:typeof Headers<"u"&&r instanceof Headers?(this.headers=new Map,r.forEach((o,t)=>{this.setHeaderEntries(t,o)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(r).forEach(([o,t])=>{this.setHeaderEntries(o,t)})}:this.headers=new Map}has(r){return this.init(),this.headers.has(r.toLowerCase())}get(r){this.init();let o=this.headers.get(r.toLowerCase());return o&&o.length>0?o[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(r){return this.init(),this.headers.get(r.toLowerCase())||null}append(r,o){return this.clone({name:r,value:o,op:"a"})}set(r,o){return this.clone({name:r,value:o,op:"s"})}delete(r,o){return this.clone({name:r,value:o,op:"d"})}maybeSetNormalizedName(r,o){this.normalizedNames.has(o)||this.normalizedNames.set(o,r)}init(){this.lazyInit&&(this.lazyInit instanceof s?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(r=>this.applyUpdate(r)),this.lazyUpdate=null))}copyFrom(r){r.init(),Array.from(r.headers.keys()).forEach(o=>{this.headers.set(o,r.headers.get(o)),this.normalizedNames.set(o,r.normalizedNames.get(o))})}clone(r){let o=new s;return o.lazyInit=this.lazyInit&&this.lazyInit instanceof s?this.lazyInit:this,o.lazyUpdate=(this.lazyUpdate||[]).concat([r]),o}applyUpdate(r){let o=r.name.toLowerCase();switch(r.op){case"a":case"s":let t=r.value;if(typeof t=="string"&&(t=[t]),t.length===0)return;this.maybeSetNormalizedName(r.name,o);let i=(r.op==="a"?this.headers.get(o):void 0)||[];i.push(...t),this.headers.set(o,i);break;case"d":let l=r.value;if(!l)this.headers.delete(o),this.normalizedNames.delete(o);else{let e=this.headers.get(o);if(!e)return;e=e.filter(c=>l.indexOf(c)===-1),e.length===0?(this.headers.delete(o),this.normalizedNames.delete(o)):this.headers.set(o,e)}break}}setHeaderEntries(r,o){let t=(Array.isArray(o)?o:[o]).map(l=>l.toString()),i=r.toLowerCase();this.headers.set(i,t),this.maybeSetNormalizedName(r,i)}forEach(r){this.init(),Array.from(this.normalizedNames.keys()).forEach(o=>r(this.normalizedNames.get(o),this.headers.get(o)))}};var Ha=class{encodeKey(r){return Rf(r)}encodeValue(r){return Rf(r)}decodeKey(r){return decodeURIComponent(r)}decodeValue(r){return decodeURIComponent(r)}};function Mb(s,r){let o=new Map;return s.length>0&&s.replace(/^\?/,"").split("&").forEach(i=>{let l=i.indexOf("="),[e,c]=l==-1?[r.decodeKey(i),""]:[r.decodeKey(i.slice(0,l)),r.decodeValue(i.slice(l+1))],m=o.get(e)||[];m.push(c),o.set(e,m)}),o}var Pb=/%(\d[a-f0-9])/gi,Fb={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Rf(s){return encodeURIComponent(s).replace(Pb,(r,o)=>Fb[o]??r)}function Cs(s){return`${s}`}var ln=class s{constructor(r={}){if(this.updates=null,this.cloneFrom=null,this.encoder=r.encoder||new Ha,r.fromString){if(r.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Mb(r.fromString,this.encoder)}else r.fromObject?(this.map=new Map,Object.keys(r.fromObject).forEach(o=>{let t=r.fromObject[o],i=Array.isArray(t)?t.map(Cs):[Cs(t)];this.map.set(o,i)})):this.map=null}has(r){return this.init(),this.map.has(r)}get(r){this.init();let o=this.map.get(r);return o?o[0]:null}getAll(r){return this.init(),this.map.get(r)||null}keys(){return this.init(),Array.from(this.map.keys())}append(r,o){return this.clone({param:r,value:o,op:"a"})}appendAll(r){let o=[];return Object.keys(r).forEach(t=>{let i=r[t];Array.isArray(i)?i.forEach(l=>{o.push({param:t,value:l,op:"a"})}):o.push({param:t,value:i,op:"a"})}),this.clone(o)}set(r,o){return this.clone({param:r,value:o,op:"s"})}delete(r,o){return this.clone({param:r,value:o,op:"d"})}toString(){return this.init(),this.keys().map(r=>{let o=this.encoder.encodeKey(r);return this.map.get(r).map(t=>o+"="+this.encoder.encodeValue(t)).join("&")}).filter(r=>r!=="").join("&")}clone(r){let o=new s({encoder:this.encoder});return o.cloneFrom=this.cloneFrom||this,o.updates=(this.updates||[]).concat(r),o}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(r=>this.map.set(r,this.cloneFrom.map.get(r))),this.updates.forEach(r=>{switch(r.op){case"a":case"s":let o=(r.op==="a"?this.map.get(r.param):void 0)||[];o.push(Cs(r.value)),this.map.set(r.param,o);break;case"d":if(r.value!==void 0){let t=this.map.get(r.param)||[],i=t.indexOf(Cs(r.value));i!==-1&&t.splice(i,1),t.length>0?this.map.set(r.param,t):this.map.delete(r.param)}else{this.map.delete(r.param);break}}}),this.cloneFrom=this.updates=null)}};var qa=class{constructor(){this.map=new Map}set(r,o){return this.map.set(r,o),this}get(r){return this.map.has(r)||this.map.set(r,r.defaultValue()),this.map.get(r)}delete(r){return this.map.delete(r),this}has(r){return this.map.has(r)}keys(){return this.map.keys()}};function Lb(s){switch(s){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function If(s){return typeof ArrayBuffer<"u"&&s instanceof ArrayBuffer}function xf(s){return typeof Blob<"u"&&s instanceof Blob}function Df(s){return typeof FormData<"u"&&s instanceof FormData}function Ub(s){return typeof URLSearchParams<"u"&&s instanceof URLSearchParams}var Wr=class s{constructor(r,o,t,i){this.url=o,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=r.toUpperCase();let l;if(Lb(this.method)||i?(this.body=t!==void 0?t:null,l=i):l=t,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params),this.transferCache=l.transferCache),this.headers??=new tr,this.context??=new qa,!this.params)this.params=new ln,this.urlWithParams=o;else{let e=this.params.toString();if(e.length===0)this.urlWithParams=o;else{let c=o.indexOf("?"),m=c===-1?"?":c<o.length-1?"&":"";this.urlWithParams=o+m+e}}}serializeBody(){return this.body===null?null:If(this.body)||xf(this.body)||Df(this.body)||Ub(this.body)||typeof this.body=="string"?this.body:this.body instanceof ln?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Df(this.body)?null:xf(this.body)?this.body.type||null:If(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ln?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(r={}){let o=r.method||this.method,t=r.url||this.url,i=r.responseType||this.responseType,l=r.body!==void 0?r.body:this.body,e=r.withCredentials!==void 0?r.withCredentials:this.withCredentials,c=r.reportProgress!==void 0?r.reportProgress:this.reportProgress,m=r.headers||this.headers,p=r.params||this.params,b=r.context??this.context;return r.setHeaders!==void 0&&(m=Object.keys(r.setHeaders).reduce((y,f)=>y.set(f,r.setHeaders[f]),m)),r.setParams&&(p=Object.keys(r.setParams).reduce((y,f)=>y.set(f,r.setParams[f]),p)),new s(o,t,l,{params:p,headers:m,context:b,reportProgress:c,responseType:i,withCredentials:e})}},Of=function(s){return s[s.Sent=0]="Sent",s[s.UploadProgress=1]="UploadProgress",s[s.ResponseHeader=2]="ResponseHeader",s[s.DownloadProgress=3]="DownloadProgress",s[s.Response=4]="Response",s[s.User=5]="User",s}(Of||{}),za=class{constructor(r,o=kf.Ok,t="OK"){this.headers=r.headers||new tr,this.status=r.status!==void 0?r.status:o,this.statusText=r.statusText||t,this.url=r.url||null,this.ok=this.status>=200&&this.status<300}};var Ba=class s extends za{constructor(r={}){super(r),this.type=Of.Response,this.body=r.body!==void 0?r.body:null}clone(r={}){return new s({body:r.body!==void 0?r.body:this.body,headers:r.headers||this.headers,status:r.status!==void 0?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0})}};var kf=function(s){return s[s.Continue=100]="Continue",s[s.SwitchingProtocols=101]="SwitchingProtocols",s[s.Processing=102]="Processing",s[s.EarlyHints=103]="EarlyHints",s[s.Ok=200]="Ok",s[s.Created=201]="Created",s[s.Accepted=202]="Accepted",s[s.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",s[s.NoContent=204]="NoContent",s[s.ResetContent=205]="ResetContent",s[s.PartialContent=206]="PartialContent",s[s.MultiStatus=207]="MultiStatus",s[s.AlreadyReported=208]="AlreadyReported",s[s.ImUsed=226]="ImUsed",s[s.MultipleChoices=300]="MultipleChoices",s[s.MovedPermanently=301]="MovedPermanently",s[s.Found=302]="Found",s[s.SeeOther=303]="SeeOther",s[s.NotModified=304]="NotModified",s[s.UseProxy=305]="UseProxy",s[s.Unused=306]="Unused",s[s.TemporaryRedirect=307]="TemporaryRedirect",s[s.PermanentRedirect=308]="PermanentRedirect",s[s.BadRequest=400]="BadRequest",s[s.Unauthorized=401]="Unauthorized",s[s.PaymentRequired=402]="PaymentRequired",s[s.Forbidden=403]="Forbidden",s[s.NotFound=404]="NotFound",s[s.MethodNotAllowed=405]="MethodNotAllowed",s[s.NotAcceptable=406]="NotAcceptable",s[s.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",s[s.RequestTimeout=408]="RequestTimeout",s[s.Conflict=409]="Conflict",s[s.Gone=410]="Gone",s[s.LengthRequired=411]="LengthRequired",s[s.PreconditionFailed=412]="PreconditionFailed",s[s.PayloadTooLarge=413]="PayloadTooLarge",s[s.UriTooLong=414]="UriTooLong",s[s.UnsupportedMediaType=415]="UnsupportedMediaType",s[s.RangeNotSatisfiable=416]="RangeNotSatisfiable",s[s.ExpectationFailed=417]="ExpectationFailed",s[s.ImATeapot=418]="ImATeapot",s[s.MisdirectedRequest=421]="MisdirectedRequest",s[s.UnprocessableEntity=422]="UnprocessableEntity",s[s.Locked=423]="Locked",s[s.FailedDependency=424]="FailedDependency",s[s.TooEarly=425]="TooEarly",s[s.UpgradeRequired=426]="UpgradeRequired",s[s.PreconditionRequired=428]="PreconditionRequired",s[s.TooManyRequests=429]="TooManyRequests",s[s.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",s[s.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",s[s.InternalServerError=500]="InternalServerError",s[s.NotImplemented=501]="NotImplemented",s[s.BadGateway=502]="BadGateway",s[s.ServiceUnavailable=503]="ServiceUnavailable",s[s.GatewayTimeout=504]="GatewayTimeout",s[s.HttpVersionNotSupported=505]="HttpVersionNotSupported",s[s.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",s[s.InsufficientStorage=507]="InsufficientStorage",s[s.LoopDetected=508]="LoopDetected",s[s.NotExtended=510]="NotExtended",s[s.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",s}(kf||{});function Ua(s,r){return{body:r,headers:s.headers,context:s.context,observe:s.observe,params:s.params,reportProgress:s.reportProgress,responseType:s.responseType,withCredentials:s.withCredentials,transferCache:s.transferCache}}var Nf=(()=>{let r=class r{constructor(t){this.handler=t}request(t,i,l={}){let e;if(t instanceof Wr)e=t;else{let p;l.headers instanceof tr?p=l.headers:p=new tr(l.headers);let b;l.params&&(l.params instanceof ln?b=l.params:b=new ln({fromObject:l.params})),e=new Wr(t,i,l.body!==void 0?l.body:null,{headers:p,context:l.context,params:b,reportProgress:l.reportProgress,responseType:l.responseType||"json",withCredentials:l.withCredentials,transferCache:l.transferCache})}let c=z(e).pipe(Jt(p=>this.handler.handle(p)));if(t instanceof Wr||l.observe==="events")return c;let m=c.pipe(At(p=>p instanceof Ba));switch(l.observe||"body"){case"body":switch(e.responseType){case"arraybuffer":return m.pipe(Y(p=>{if(p.body!==null&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return m.pipe(Y(p=>{if(p.body!==null&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return m.pipe(Y(p=>{if(p.body!==null&&typeof p.body!="string")throw new Error("Response is not a string.");return p.body}));case"json":default:return m.pipe(Y(p=>p.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${l.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new ln().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,l={}){return this.request("PATCH",t,Ua(l,i))}post(t,i,l={}){return this.request("POST",t,Ua(l,i))}put(t,i,l={}){return this.request("PUT",t,Ua(l,i))}};r.\u0275fac=function(i){return new(i||r)(H(ja))},r.\u0275prov=G({token:r,factory:r.\u0275fac});let s=r;return s})();var Wa=class extends hf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ga=class s extends Wa{static makeCurrent(){ff(new s)}onAndCancel(r,o,t){return r.addEventListener(o,t),()=>{r.removeEventListener(o,t)}}dispatchEvent(r,o){r.dispatchEvent(o)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,o){return o=o||this.getDefaultDocument(),o.createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,o){return o==="window"?window:o==="document"?r:o==="body"?r.body:null}getBaseHref(r){let o=qb();return o==null?null:zb(o)}resetBaseElement(){Gr=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return bf(document.cookie,r)}},Gr=null;function qb(){return Gr=Gr||document.querySelector("base"),Gr?Gr.getAttribute("href"):null}function zb(s){return new URL(s,document.baseURI).pathname}var Ka=class{addToWindow(r){en.getAngularTestability=(t,i=!0)=>{let l=r.findTestabilityInTree(t,i);if(l==null)throw new ye(5103,!1);return l},en.getAllAngularTestabilities=()=>r.getAllTestabilities(),en.getAllAngularRootElements=()=>r.getAllRootElements();let o=t=>{let i=en.getAllAngularTestabilities(),l=i.length,e=function(){l--,l==0&&t()};i.forEach(c=>{c.whenStable(e)})};en.frameworkStabilizers||(en.frameworkStabilizers=[]),en.frameworkStabilizers.push(o)}findTestabilityInTree(r,o,t){if(o==null)return null;let i=r.getTestability(o);return i??(t?Ts().isShadowRoot(o)?this.findTestabilityInTree(r,o.host,!0):this.findTestabilityInTree(r,o.parentElement,!0):null)}},Bb=(()=>{let r=class r{build(){return new XMLHttpRequest}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:r.\u0275fac});let s=r;return s})(),Ya=new re(""),Lf=(()=>{let r=class r{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(l=>{l.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,l){return this._findPluginFor(i).addEventListener(t,i,l)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(e=>e.supports(t)),!i)throw new ye(5101,!1);return this._eventNameToPlugin.set(t,i),i}};r.\u0275fac=function(i){return new(i||r)(H(Ya),H(ae))},r.\u0275prov=G({token:r,factory:r.\u0275fac});let s=r;return s})(),Es=class{constructor(r){this._doc=r}},Va="ng-app-id",Uf=(()=>{let r=class r{constructor(t,i,l,e={}){this.doc=t,this.appId=i,this.nonce=l,this.platformId=e,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=La(e),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(l=>l.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Va}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(l=>{l.textContent!=null&&i.set(l.textContent,l)}),i}return null}changeUsageCount(t,i){let l=this.styleRef;if(l.has(t)){let e=l.get(t);return e.usage+=i,e.usage}return l.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let l=this.styleNodesInDOM,e=l?.get(i);if(e?.parentNode===t)return l.delete(i),e.removeAttribute(Va),e;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(Va,this.appId),t.appendChild(c),c}}addStyleToHost(t,i){let l=this.getStyleElement(t,i),e=this.styleRef,c=e.get(i)?.elements;c?c.push(l):e.set(i,{elements:[l],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}};r.\u0275fac=function(i){return new(i||r)(H(de),H(Hr),H(qr,8),H(In))},r.\u0275prov=G({token:r,factory:r.\u0275fac});let s=r;return s})(),$a={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Za=/%COMP%/g,jf="%COMP%",Vb=`_nghost-${jf}`,$b=`_ngcontent-${jf}`,Wb=!0,Gb=new re("",{providedIn:"root",factory:()=>Wb});function Kb(s){return $b.replace(Za,s)}function Yb(s){return Vb.replace(Za,s)}function Hf(s,r){return r.map(o=>o.replace(Za,s))}var Ss=(()=>{let r=class r{constructor(t,i,l,e,c,m,p,b=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=l,this.removeStylesOnCompDestroy=e,this.doc=c,this.platformId=m,this.ngZone=p,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=La(m),this.defaultRenderer=new Kr(t,c,p,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===jr.ShadowDom&&(i=qe(F({},i),{encapsulation:jr.Emulated}));let l=this.getOrCreateRenderer(t,i);return l instanceof As?l.applyToHost(t):l instanceof Yr&&l.applyStyles(),l}getOrCreateRenderer(t,i){let l=this.rendererByCompId,e=l.get(i.id);if(!e){let c=this.doc,m=this.ngZone,p=this.eventManager,b=this.sharedStylesHost,y=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case jr.Emulated:e=new As(p,b,i,this.appId,y,c,m,f);break;case jr.ShadowDom:return new Xa(p,b,t,i,c,m,this.nonce,f);default:e=new Yr(p,b,i,y,c,m,f);break}l.set(i.id,e)}return e}ngOnDestroy(){this.rendererByCompId.clear()}};r.\u0275fac=function(i){return new(i||r)(H(Lf),H(Uf),H(Hr),H(Gb),H(de),H(In),H(ae),H(qr))},r.\u0275prov=G({token:r,factory:r.\u0275fac});let s=r;return s})(),Kr=class{constructor(r,o,t,i){this.eventManager=r,this.doc=o,this.ngZone=t,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(r,o){return o?this.doc.createElementNS($a[o]||o,r):this.doc.createElement(r)}createComment(r){return this.doc.createComment(r)}createText(r){return this.doc.createTextNode(r)}appendChild(r,o){(Mf(r)?r.content:r).appendChild(o)}insertBefore(r,o,t){r&&(Mf(r)?r.content:r).insertBefore(o,t)}removeChild(r,o){r&&r.removeChild(o)}selectRootElement(r,o){let t=typeof r=="string"?this.doc.querySelector(r):r;if(!t)throw new ye(-5104,!1);return o||(t.textContent=""),t}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,o,t,i){if(i){o=i+":"+o;let l=$a[i];l?r.setAttributeNS(l,o,t):r.setAttribute(o,t)}else r.setAttribute(o,t)}removeAttribute(r,o,t){if(t){let i=$a[t];i?r.removeAttributeNS(i,o):r.removeAttribute(`${t}:${o}`)}else r.removeAttribute(o)}addClass(r,o){r.classList.add(o)}removeClass(r,o){r.classList.remove(o)}setStyle(r,o,t,i){i&(zr.DashCase|zr.Important)?r.style.setProperty(o,t,i&zr.Important?"important":""):r.style[o]=t}removeStyle(r,o,t){t&zr.DashCase?r.style.removeProperty(o):r.style[o]=""}setProperty(r,o,t){r!=null&&(r[o]=t)}setValue(r,o){r.nodeValue=o}listen(r,o,t){if(typeof r=="string"&&(r=Ts().getGlobalEventTarget(this.doc,r),!r))throw new Error(`Unsupported event target ${r} for event ${o}`);return this.eventManager.addEventListener(r,o,this.decoratePreventDefault(t))}decoratePreventDefault(r){return o=>{if(o==="__ngUnwrap__")return r;(this.platformIsServer?this.ngZone.runGuarded(()=>r(o)):r(o))===!1&&o.preventDefault()}}};function Mf(s){return s.tagName==="TEMPLATE"&&s.content!==void 0}var Xa=class extends Kr{constructor(r,o,t,i,l,e,c,m){super(r,l,e,m),this.sharedStylesHost=o,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=Hf(i.id,i.styles);for(let b of p){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=b,this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}appendChild(r,o){return super.appendChild(this.nodeOrShadowRoot(r),o)}insertBefore(r,o,t){return super.insertBefore(this.nodeOrShadowRoot(r),o,t)}removeChild(r,o){return super.removeChild(this.nodeOrShadowRoot(r),o)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Yr=class extends Kr{constructor(r,o,t,i,l,e,c,m){super(r,l,e,c),this.sharedStylesHost=o,this.removeStylesOnCompDestroy=i,this.styles=m?Hf(m,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},As=class extends Yr{constructor(r,o,t,i,l,e,c,m){let p=i+"-"+t.id;super(r,o,t,l,e,c,m,p),this.contentAttr=Kb(p),this.hostAttr=Yb(p)}applyToHost(r){this.applyStyles(),this.setAttribute(r,this.hostAttr,"")}createElement(r,o){let t=super.createElement(r,o);return super.setAttribute(t,this.contentAttr,""),t}},Xb=(()=>{let r=class r extends Es{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,l){return t.addEventListener(i,l,!1),()=>this.removeEventListener(t,i,l)}removeEventListener(t,i,l){return t.removeEventListener(i,l)}};r.\u0275fac=function(i){return new(i||r)(H(de))},r.\u0275prov=G({token:r,factory:r.\u0275fac});let s=r;return s})(),Pf=["alt","control","meta","shift"],Zb={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jb={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey},Qb=(()=>{let r=class r extends Es{constructor(t){super(t)}supports(t){return r.parseEventName(t)!=null}addEventListener(t,i,l){let e=r.parseEventName(i),c=r.eventCallback(e.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ts().onAndCancel(t,e.domEventName,c))}static parseEventName(t){let i=t.toLowerCase().split("."),l=i.shift();if(i.length===0||!(l==="keydown"||l==="keyup"))return null;let e=r._normalizeKey(i.pop()),c="",m=i.indexOf("code");if(m>-1&&(i.splice(m,1),c="code."),Pf.forEach(b=>{let y=i.indexOf(b);y>-1&&(i.splice(y,1),c+=b+".")}),c+=e,i.length!=0||e.length===0)return null;let p={};return p.domEventName=l,p.fullKey=c,p}static matchEventFullKeyCode(t,i){let l=Zb[t.key]||t.key,e="";return i.indexOf("code.")>-1&&(l=t.code,e="code."),l==null||!l?!1:(l=l.toLowerCase(),l===" "?l="space":l==="."&&(l="dot"),Pf.forEach(c=>{if(c!==l){let m=Jb[c];m(t)&&(e+=c+".")}}),e+=l,e===i)}static eventCallback(t,i,l){return e=>{r.matchEventFullKeyCode(e,t)&&l.runGuarded(()=>i(e))}}static _normalizeKey(t){return t==="esc"?"escape":t}};r.\u0275fac=function(i){return new(i||r)(H(de))},r.\u0275prov=G({token:r,factory:r.\u0275fac});let s=r;return s})();function e_(){Ga.makeCurrent()}function t_(){return new xn}function n_(){return jd(document),document}var r_=[{provide:In,useValue:Cf},{provide:qd,useValue:e_,multi:!0},{provide:de,useFactory:n_,deps:[]}],qf=lf(cf,"browser",r_),i_=new re(""),s_=[{provide:_s,useClass:Ka,deps:[]},{provide:sf,useClass:vs,deps:[ae,Na,_s]},{provide:vs,useClass:vs,deps:[ae,Na,_s]}],o_=[{provide:zd,useValue:"root"},{provide:xn,useFactory:t_,deps:[]},{provide:Ya,useClass:Xb,multi:!0,deps:[de,ae,In]},{provide:Ya,useClass:Qb,multi:!0,deps:[de]},Ss,Uf,Lf,{provide:hs,useExisting:Ss},{provide:Af,useClass:Bb,deps:[]},[]],zf=(()=>{let r=class r{constructor(t){}static withServerTransition(t){return{ngModule:r,providers:[{provide:Hr,useValue:t.appId}]}}};r.\u0275fac=function(i){return new(i||r)(H(i_,12))},r.\u0275mod=he({type:r}),r.\u0275inj=me({providers:[...o_,...s_],imports:[er,uf]});let s=r;return s})();var Bf=(()=>{let r=class r{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}};r.\u0275fac=function(i){return new(i||r)(H(de))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var Ja=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:function(i){let l=null;return i?l=new(i||r):l=H(a_),l},providedIn:"root"});let s=r;return s})(),a_=(()=>{let r=class r extends Ja{constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case it.NONE:return i;case it.HTML:return Xn(i,"HTML")?Yn(i):Yd(this._doc,String(i)).toString();case it.STYLE:return Xn(i,"Style")?Yn(i):i;case it.SCRIPT:if(Xn(i,"Script"))return Yn(i);throw new ye(5200,!1);case it.URL:return Xn(i,"URL")?Yn(i):Kd(String(i));case it.RESOURCE_URL:if(Xn(i,"ResourceURL"))return Yn(i);throw new ye(5201,!1);default:throw new ye(5202,!1)}}bypassSecurityTrustHtml(t){return Bd(t)}bypassSecurityTrustStyle(t){return Vd(t)}bypassSecurityTrustScript(t){return $d(t)}bypassSecurityTrustUrl(t){return Wd(t)}bypassSecurityTrustResourceUrl(t){return Gd(t)}};r.\u0275fac=function(i){return new(i||r)(H(de))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var l_="@",c_=(()=>{let r=class r{constructor(t,i,l,e,c){this.doc=t,this.delegate=i,this.zone=l,this.animationType=e,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=j(Xd,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-MHML3I5Z.js")).catch(i=>{throw new ye(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:l})=>{this._engine=i(this.animationType,this.doc,this.scheduler);let e=new l(this.delegate,this._engine,this.zone);return this.delegate=e,e})}createRenderer(t,i){let l=this.delegate.createRenderer(t,i);if(l.\u0275type===0)return l;typeof l.throwOnSyntheticProps=="boolean"&&(l.throwOnSyntheticProps=!1);let e=new el(l);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let m=c.createRenderer(t,i);e.use(m)}).catch(c=>{e.use(l)}),e}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};r.\u0275fac=function(i){Zn()},r.\u0275prov=G({token:r,factory:r.\u0275fac});let s=r;return s})(),el=class{constructor(r){this.delegate=r,this.replay=[],this.\u0275type=1}use(r){if(this.delegate=r,this.replay!==null){for(let o of this.replay)o(r);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(r,o){return this.delegate.createElement(r,o)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}get destroyNode(){return this.delegate.destroyNode}appendChild(r,o){this.delegate.appendChild(r,o)}insertBefore(r,o,t,i){this.delegate.insertBefore(r,o,t,i)}removeChild(r,o,t){this.delegate.removeChild(r,o,t)}selectRootElement(r,o){return this.delegate.selectRootElement(r,o)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,o,t,i){this.delegate.setAttribute(r,o,t,i)}removeAttribute(r,o,t){this.delegate.removeAttribute(r,o,t)}addClass(r,o){this.delegate.addClass(r,o)}removeClass(r,o){this.delegate.removeClass(r,o)}setStyle(r,o,t,i){this.delegate.setStyle(r,o,t,i)}removeStyle(r,o,t){this.delegate.removeStyle(r,o,t)}setProperty(r,o,t){this.shouldReplay(o)&&this.replay.push(i=>i.setProperty(r,o,t)),this.delegate.setProperty(r,o,t)}setValue(r,o){this.delegate.setValue(r,o)}listen(r,o,t){return this.shouldReplay(o)&&this.replay.push(i=>i.listen(r,o,t)),this.delegate.listen(r,o,t)}shouldReplay(r){return this.replay!==null&&r.startsWith(l_)}};function Vf(s="animations"){return Zd("NgAsyncAnimations"),fs([{provide:hs,useFactory:(r,o,t)=>new c_(r,o,t,s),deps:[de,Ss,ae]},{provide:Lt,useValue:s==="noop"?"NoopAnimations":"BrowserAnimations"}])}var X="primary",ui=Symbol("RouteTitle"),sl=class{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){let o=this.params[r];return Array.isArray(o)?o[0]:o}return null}getAll(r){if(this.has(r)){let o=this.params[r];return Array.isArray(o)?o:[o]}return[]}get keys(){return Object.keys(this.params)}};function or(s){return new sl(s)}function u_(s,r,o){let t=o.path.split("/");if(t.length>s.length||o.pathMatch==="full"&&(r.hasChildren()||t.length<s.length))return null;let i={};for(let l=0;l<t.length;l++){let e=t[l],c=s[l];if(e.startsWith(":"))i[e.substring(1)]=c;else if(e!==c.path)return null}return{consumed:s.slice(0,t.length),posParams:i}}function d_(s,r){if(s.length!==r.length)return!1;for(let o=0;o<s.length;++o)if(!Dt(s[o],r[o]))return!1;return!0}function Dt(s,r){let o=s?ol(s):void 0,t=r?ol(r):void 0;if(!o||!t||o.length!=t.length)return!1;let i;for(let l=0;l<o.length;l++)if(i=o[l],!Qf(s[i],r[i]))return!1;return!0}function ol(s){return[...Object.keys(s),...Object.getOwnPropertySymbols(s)]}function Qf(s,r){if(Array.isArray(s)&&Array.isArray(r)){if(s.length!==r.length)return!1;let o=[...s].sort(),t=[...r].sort();return o.every((i,l)=>t[l]===i)}else return s===r}function eh(s){return s.length>0?s[s.length-1]:null}function hn(s){return Dd(s)?s:of(s)?Je(Promise.resolve(s)):z(s)}var f_={exact:nh,subset:rh},th={exact:h_,subset:m_,ignored:()=>!0};function $f(s,r,o){return f_[o.paths](s.root,r.root,o.matrixParams)&&th[o.queryParams](s.queryParams,r.queryParams)&&!(o.fragment==="exact"&&s.fragment!==r.fragment)}function h_(s,r){return Dt(s,r)}function nh(s,r,o){if(!On(s.segments,r.segments)||!xs(s.segments,r.segments,o)||s.numberOfChildren!==r.numberOfChildren)return!1;for(let t in r.children)if(!s.children[t]||!nh(s.children[t],r.children[t],o))return!1;return!0}function m_(s,r){return Object.keys(r).length<=Object.keys(s).length&&Object.keys(r).every(o=>Qf(s[o],r[o]))}function rh(s,r,o){return ih(s,r,r.segments,o)}function ih(s,r,o,t){if(s.segments.length>o.length){let i=s.segments.slice(0,o.length);return!(!On(i,o)||r.hasChildren()||!xs(i,o,t))}else if(s.segments.length===o.length){if(!On(s.segments,o)||!xs(s.segments,o,t))return!1;for(let i in r.children)if(!s.children[i]||!rh(s.children[i],r.children[i],t))return!1;return!0}else{let i=o.slice(0,s.segments.length),l=o.slice(s.segments.length);return!On(s.segments,i)||!xs(s.segments,i,t)||!s.children[X]?!1:ih(s.children[X],r,l,t)}}function xs(s,r,o){return r.every((t,i)=>th[o](s[i].parameters,t.parameters))}var cn=class{constructor(r=new se([],{}),o={},t=null){this.root=r,this.queryParams=o,this.fragment=t}get queryParamMap(){return this._queryParamMap??=or(this.queryParams),this._queryParamMap}toString(){return b_.serialize(this)}},se=class{constructor(r,o){this.segments=r,this.children=o,this.parent=null,Object.values(o).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ds(this)}},Dn=class{constructor(r,o){this.path=r,this.parameters=o}get parameterMap(){return this._parameterMap??=or(this.parameters),this._parameterMap}toString(){return oh(this)}};function p_(s,r){return On(s,r)&&s.every((o,t)=>Dt(o.parameters,r[t].parameters))}function On(s,r){return s.length!==r.length?!1:s.every((o,t)=>o.path===r[t].path)}function g_(s,r){let o=[];return Object.entries(s.children).forEach(([t,i])=>{t===X&&(o=o.concat(r(i,t)))}),Object.entries(s.children).forEach(([t,i])=>{t!==X&&(o=o.concat(r(i,t)))}),o}var di=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:()=>new ni,providedIn:"root"});let s=r;return s})(),ni=class{parse(r){let o=new ll(r);return new cn(o.parseRootSegment(),o.parseQueryParams(),o.parseFragment())}serialize(r){let o=`/${Xr(r.root,!0)}`,t=y_(r.queryParams),i=typeof r.fragment=="string"?`#${__(r.fragment)}`:"";return`${o}${t}${i}`}},b_=new ni;function Ds(s){return s.segments.map(r=>oh(r)).join("/")}function Xr(s,r){if(!s.hasChildren())return Ds(s);if(r){let o=s.children[X]?Xr(s.children[X],!1):"",t=[];return Object.entries(s.children).forEach(([i,l])=>{i!==X&&t.push(`${i}:${Xr(l,!1)}`)}),t.length>0?`${o}(${t.join("//")})`:o}else{let o=g_(s,(t,i)=>i===X?[Xr(s.children[X],!1)]:[`${i}:${Xr(t,!1)}`]);return Object.keys(s.children).length===1&&s.children[X]!=null?`${Ds(s)}/${o[0]}`:`${Ds(s)}/(${o.join("//")})`}}function sh(s){return encodeURIComponent(s).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rs(s){return sh(s).replace(/%3B/gi,";")}function __(s){return encodeURI(s)}function al(s){return sh(s).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Os(s){return decodeURIComponent(s)}function Wf(s){return Os(s.replace(/\+/g,"%20"))}function oh(s){return`${al(s.path)}${v_(s.parameters)}`}function v_(s){return Object.entries(s).map(([r,o])=>`;${al(r)}=${al(o)}`).join("")}function y_(s){let r=Object.entries(s).map(([o,t])=>Array.isArray(t)?t.map(i=>`${Rs(o)}=${Rs(i)}`).join("&"):`${Rs(o)}=${Rs(t)}`).filter(o=>o);return r.length?`?${r.join("&")}`:""}var T_=/^[^\/()?;#]+/;function tl(s){let r=s.match(T_);return r?r[0]:""}var w_=/^[^\/()?;=#]+/;function C_(s){let r=s.match(w_);return r?r[0]:""}var E_=/^[^=?&#]+/;function S_(s){let r=s.match(E_);return r?r[0]:""}var A_=/^[^&#]+/;function R_(s){let r=s.match(A_);return r?r[0]:""}var ll=class{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){let r={};if(this.consumeOptional("?"))do this.parseQueryParam(r);while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let o={};this.peekStartsWith("/(")&&(this.capture("/"),o=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(r.length>0||Object.keys(o).length>0)&&(t[X]=new se(r,o)),t}parseSegment(){let r=tl(this.remaining);if(r===""&&this.peekStartsWith(";"))throw new ye(4009,!1);return this.capture(r),new Dn(Os(r),this.parseMatrixParams())}parseMatrixParams(){let r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){let o=C_(this.remaining);if(!o)return;this.capture(o);let t="";if(this.consumeOptional("=")){let i=tl(this.remaining);i&&(t=i,this.capture(t))}r[Os(o)]=Os(t)}parseQueryParam(r){let o=S_(this.remaining);if(!o)return;this.capture(o);let t="";if(this.consumeOptional("=")){let e=R_(this.remaining);e&&(t=e,this.capture(t))}let i=Wf(o),l=Wf(t);if(r.hasOwnProperty(i)){let e=r[i];Array.isArray(e)||(e=[e],r[i]=e),e.push(l)}else r[i]=l}parseParens(r){let o={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=tl(this.remaining),i=this.remaining[t.length];if(i!=="/"&&i!==")"&&i!==";")throw new ye(4010,!1);let l;t.indexOf(":")>-1?(l=t.slice(0,t.indexOf(":")),this.capture(l),this.capture(":")):r&&(l=X);let e=this.parseChildren();o[l]=Object.keys(e).length===1?e[X]:new se([],e),this.consumeOptional("//")}return o}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return this.peekStartsWith(r)?(this.remaining=this.remaining.substring(r.length),!0):!1}capture(r){if(!this.consumeOptional(r))throw new ye(4011,!1)}};function ah(s){return s.segments.length>0?new se([],{[X]:s}):s}function lh(s){let r={};for(let[t,i]of Object.entries(s.children)){let l=lh(i);if(t===X&&l.segments.length===0&&l.hasChildren())for(let[e,c]of Object.entries(l.children))r[e]=c;else(l.segments.length>0||l.hasChildren())&&(r[t]=l)}let o=new se(s.segments,r);return I_(o)}function I_(s){if(s.numberOfChildren===1&&s.children[X]){let r=s.children[X];return new se(s.segments.concat(r.segments),r.children)}return s}function ar(s){return s instanceof cn}function x_(s,r,o=null,t=null){let i=ch(s);return uh(i,r,o,t)}function ch(s){let r;function o(l){let e={};for(let m of l.children){let p=o(m);e[m.outlet]=p}let c=new se(l.url,e);return l===s&&(r=c),c}let t=o(s.root),i=ah(t);return r??i}function uh(s,r,o,t){let i=s;for(;i.parent;)i=i.parent;if(r.length===0)return nl(i,i,i,o,t);let l=D_(r);if(l.toRoot())return nl(i,i,new se([],{}),o,t);let e=O_(l,i,s),c=e.processChildren?Qr(e.segmentGroup,e.index,l.commands):fh(e.segmentGroup,e.index,l.commands);return nl(i,e.segmentGroup,c,o,t)}function ks(s){return typeof s=="object"&&s!=null&&!s.outlets&&!s.segmentPath}function ri(s){return typeof s=="object"&&s!=null&&s.outlets}function nl(s,r,o,t,i){let l={};t&&Object.entries(t).forEach(([m,p])=>{l[m]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`});let e;s===r?e=o:e=dh(s,r,o);let c=ah(lh(e));return new cn(c,l,i)}function dh(s,r,o){let t={};return Object.entries(s.children).forEach(([i,l])=>{l===r?t[i]=o:t[i]=dh(l,r,o)}),new se(s.segments,t)}var Ns=class{constructor(r,o,t){if(this.isAbsolute=r,this.numberOfDoubleDots=o,this.commands=t,r&&t.length>0&&ks(t[0]))throw new ye(4003,!1);let i=t.find(ri);if(i&&i!==eh(t))throw new ye(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function D_(s){if(typeof s[0]=="string"&&s.length===1&&s[0]==="/")return new Ns(!0,0,s);let r=0,o=!1,t=s.reduce((i,l,e)=>{if(typeof l=="object"&&l!=null){if(l.outlets){let c={};return Object.entries(l.outlets).forEach(([m,p])=>{c[m]=typeof p=="string"?p.split("/"):p}),[...i,{outlets:c}]}if(l.segmentPath)return[...i,l.segmentPath]}return typeof l!="string"?[...i,l]:e===0?(l.split("/").forEach((c,m)=>{m==0&&c==="."||(m==0&&c===""?o=!0:c===".."?r++:c!=""&&i.push(c))}),i):[...i,l]},[]);return new Ns(o,r,t)}var ir=class{constructor(r,o,t){this.segmentGroup=r,this.processChildren=o,this.index=t}};function O_(s,r,o){if(s.isAbsolute)return new ir(r,!0,0);if(!o)return new ir(r,!1,NaN);if(o.parent===null)return new ir(o,!0,0);let t=ks(s.commands[0])?0:1,i=o.segments.length-1+t;return k_(o,i,s.numberOfDoubleDots)}function k_(s,r,o){let t=s,i=r,l=o;for(;l>i;){if(l-=i,t=t.parent,!t)throw new ye(4005,!1);i=t.segments.length}return new ir(t,!1,i-l)}function N_(s){return ri(s[0])?s[0].outlets:{[X]:s}}function fh(s,r,o){if(s??=new se([],{}),s.segments.length===0&&s.hasChildren())return Qr(s,r,o);let t=M_(s,r,o),i=o.slice(t.commandIndex);if(t.match&&t.pathIndex<s.segments.length){let l=new se(s.segments.slice(0,t.pathIndex),{});return l.children[X]=new se(s.segments.slice(t.pathIndex),s.children),Qr(l,0,i)}else return t.match&&i.length===0?new se(s.segments,{}):t.match&&!s.hasChildren()?cl(s,r,o):t.match?Qr(s,0,i):cl(s,r,o)}function Qr(s,r,o){if(o.length===0)return new se(s.segments,{});{let t=N_(o),i={};if(Object.keys(t).some(l=>l!==X)&&s.children[X]&&s.numberOfChildren===1&&s.children[X].segments.length===0){let l=Qr(s.children[X],r,o);return new se(s.segments,l.children)}return Object.entries(t).forEach(([l,e])=>{typeof e=="string"&&(e=[e]),e!==null&&(i[l]=fh(s.children[l],r,e))}),Object.entries(s.children).forEach(([l,e])=>{t[l]===void 0&&(i[l]=e)}),new se(s.segments,i)}}function M_(s,r,o){let t=0,i=r,l={match:!1,pathIndex:0,commandIndex:0};for(;i<s.segments.length;){if(t>=o.length)return l;let e=s.segments[i],c=o[t];if(ri(c))break;let m=`${c}`,p=t<o.length-1?o[t+1]:null;if(i>0&&m===void 0)break;if(m&&p&&typeof p=="object"&&p.outlets===void 0){if(!Kf(m,p,e))return l;t+=2}else{if(!Kf(m,{},e))return l;t++}i++}return{match:!0,pathIndex:i,commandIndex:t}}function cl(s,r,o){let t=s.segments.slice(0,r),i=0;for(;i<o.length;){let l=o[i];if(ri(l)){let m=P_(l.outlets);return new se(t,m)}if(i===0&&ks(o[0])){let m=s.segments[r];t.push(new Dn(m.path,Gf(o[0]))),i++;continue}let e=ri(l)?l.outlets[X]:`${l}`,c=i<o.length-1?o[i+1]:null;e&&c&&ks(c)?(t.push(new Dn(e,Gf(c))),i+=2):(t.push(new Dn(e,{})),i++)}return new se(t,{})}function P_(s){let r={};return Object.entries(s).forEach(([o,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(r[o]=cl(new se([],{}),0,t))}),r}function Gf(s){let r={};return Object.entries(s).forEach(([o,t])=>r[o]=`${t}`),r}function Kf(s,r,o){return s==o.path&&Dt(r,o.parameters)}var ei="imperative",Me=function(s){return s[s.NavigationStart=0]="NavigationStart",s[s.NavigationEnd=1]="NavigationEnd",s[s.NavigationCancel=2]="NavigationCancel",s[s.NavigationError=3]="NavigationError",s[s.RoutesRecognized=4]="RoutesRecognized",s[s.ResolveStart=5]="ResolveStart",s[s.ResolveEnd=6]="ResolveEnd",s[s.GuardsCheckStart=7]="GuardsCheckStart",s[s.GuardsCheckEnd=8]="GuardsCheckEnd",s[s.RouteConfigLoadStart=9]="RouteConfigLoadStart",s[s.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",s[s.ChildActivationStart=11]="ChildActivationStart",s[s.ChildActivationEnd=12]="ChildActivationEnd",s[s.ActivationStart=13]="ActivationStart",s[s.ActivationEnd=14]="ActivationEnd",s[s.Scroll=15]="Scroll",s[s.NavigationSkipped=16]="NavigationSkipped",s}(Me||{}),ht=class{constructor(r,o){this.id=r,this.url=o}},lr=class extends ht{constructor(r,o,t="imperative",i=null){super(r,o),this.type=Me.NavigationStart,this.navigationTrigger=t,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qt=class extends ht{constructor(r,o,t){super(r,o),this.urlAfterRedirects=t,this.type=Me.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ft=function(s){return s[s.Redirect=0]="Redirect",s[s.SupersededByNewNavigation=1]="SupersededByNewNavigation",s[s.NoDataFromResolver=2]="NoDataFromResolver",s[s.GuardRejected=3]="GuardRejected",s}(ft||{}),Ms=function(s){return s[s.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",s[s.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",s}(Ms||{}),un=class extends ht{constructor(r,o,t,i){super(r,o),this.reason=t,this.code=i,this.type=Me.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},dn=class extends ht{constructor(r,o,t,i){super(r,o),this.reason=t,this.code=i,this.type=Me.NavigationSkipped}},ii=class extends ht{constructor(r,o,t,i){super(r,o),this.error=t,this.target=i,this.type=Me.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ps=class extends ht{constructor(r,o,t,i){super(r,o),this.urlAfterRedirects=t,this.state=i,this.type=Me.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ul=class extends ht{constructor(r,o,t,i){super(r,o),this.urlAfterRedirects=t,this.state=i,this.type=Me.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dl=class extends ht{constructor(r,o,t,i,l){super(r,o),this.urlAfterRedirects=t,this.state=i,this.shouldActivate=l,this.type=Me.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},fl=class extends ht{constructor(r,o,t,i){super(r,o),this.urlAfterRedirects=t,this.state=i,this.type=Me.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hl=class extends ht{constructor(r,o,t,i){super(r,o),this.urlAfterRedirects=t,this.state=i,this.type=Me.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ml=class{constructor(r){this.route=r,this.type=Me.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pl=class{constructor(r){this.route=r,this.type=Me.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gl=class{constructor(r){this.snapshot=r,this.type=Me.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bl=class{constructor(r){this.snapshot=r,this.type=Me.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_l=class{constructor(r){this.snapshot=r,this.type=Me.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vl=class{constructor(r){this.snapshot=r,this.type=Me.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fs=class{constructor(r,o,t){this.routerEvent=r,this.position=o,this.anchor=t,this.type=Me.Scroll}toString(){let r=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${r}')`}},si=class{},oi=class{constructor(r){this.url=r}};var yl=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new fi,this.attachRef=null}},fi=(()=>{let r=class r{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){let l=this.getOrCreateContext(t);l.outlet=i,this.contexts.set(t,l)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new yl,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Ls=class{constructor(r){this._root=r}get root(){return this._root.value}parent(r){let o=this.pathFromRoot(r);return o.length>1?o[o.length-2]:null}children(r){let o=Tl(r,this._root);return o?o.children.map(t=>t.value):[]}firstChild(r){let o=Tl(r,this._root);return o&&o.children.length>0?o.children[0].value:null}siblings(r){let o=wl(r,this._root);return o.length<2?[]:o[o.length-2].children.map(i=>i.value).filter(i=>i!==r)}pathFromRoot(r){return wl(r,this._root).map(o=>o.value)}};function Tl(s,r){if(s===r.value)return r;for(let o of r.children){let t=Tl(s,o);if(t)return t}return null}function wl(s,r){if(s===r.value)return[r];for(let o of r.children){let t=wl(s,o);if(t.length)return t.unshift(r),t}return[]}var at=class{constructor(r,o){this.value=r,this.children=o}toString(){return`TreeNode(${this.value})`}};function rr(s){let r={};return s&&s.children.forEach(o=>r[o.value.outlet]=o),r}var Us=class extends Ls{constructor(r,o){super(r),this.snapshot=o,kl(this,r)}toString(){return this.snapshot.toString()}};function hh(s){let r=F_(s),o=new De([new Dn("",{})]),t=new De({}),i=new De({}),l=new De({}),e=new De(""),c=new fn(o,t,l,e,i,X,s,r.root);return c.snapshot=r.root,new Us(new at(c,[]),r)}function F_(s){let r={},o={},t={},i="",l=new ai([],r,t,i,o,X,s,null,{});return new js("",new at(l,[]))}var fn=class{constructor(r,o,t,i,l,e,c,m){this.urlSubject=r,this.paramsSubject=o,this.queryParamsSubject=t,this.fragmentSubject=i,this.dataSubject=l,this.outlet=e,this.component=c,this._futureSnapshot=m,this.title=this.dataSubject?.pipe(Y(p=>p[ui]))??z(void 0),this.url=r,this.params=o,this.queryParams=t,this.fragment=i,this.data=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(r=>or(r))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(r=>or(r))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ol(s,r,o="emptyOnly"){let t,{routeConfig:i}=s;return r!==null&&(o==="always"||i?.path===""||!r.component&&!r.routeConfig?.loadComponent)?t={params:F(F({},r.params),s.params),data:F(F({},r.data),s.data),resolve:F(F(F(F({},s.data),r.data),i?.data),s._resolvedData)}:t={params:F({},s.params),data:F({},s.data),resolve:F(F({},s.data),s._resolvedData??{})},i&&ph(i)&&(t.resolve[ui]=i.title),t}var ai=class{get title(){return this.data?.[ui]}constructor(r,o,t,i,l,e,c,m,p){this.url=r,this.params=o,this.queryParams=t,this.fragment=i,this.data=l,this.outlet=e,this.component=c,this.routeConfig=m,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=or(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=or(this.queryParams),this._queryParamMap}toString(){let r=this.url.map(t=>t.toString()).join("/"),o=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${r}', path:'${o}')`}},js=class extends Ls{constructor(r,o){super(o),this.url=r,kl(this,o)}toString(){return mh(this._root)}};function kl(s,r){r.value._routerState=s,r.children.forEach(o=>kl(s,o))}function mh(s){let r=s.children.length>0?` { ${s.children.map(mh).join(", ")} } `:"";return`${s.value}${r}`}function rl(s){if(s.snapshot){let r=s.snapshot,o=s._futureSnapshot;s.snapshot=o,Dt(r.queryParams,o.queryParams)||s.queryParamsSubject.next(o.queryParams),r.fragment!==o.fragment&&s.fragmentSubject.next(o.fragment),Dt(r.params,o.params)||s.paramsSubject.next(o.params),d_(r.url,o.url)||s.urlSubject.next(o.url),Dt(r.data,o.data)||s.dataSubject.next(o.data)}else s.snapshot=s._futureSnapshot,s.dataSubject.next(s._futureSnapshot.data)}function Cl(s,r){let o=Dt(s.params,r.params)&&p_(s.url,r.url),t=!s.parent!=!r.parent;return o&&!t&&(!s.parent||Cl(s.parent,r.parent))}function ph(s){return typeof s.title=="string"||s.title===null}var L_=(()=>{let r=class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new Rn,this.deactivateEvents=new Rn,this.attachEvents=new Rn,this.detachEvents=new Rn,this.parentContexts=j(fi),this.location=j(Qd),this.changeDetector=j(ms),this.environmentInjector=j(Kn),this.inputBinder=j(Vs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:l}=t.name;if(i)return;this.isTrackedInParentContexts(l)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(l)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ye(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ye(4013,!1);this._activatedRoute=t;let l=this.location,c=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,p=new El(t,m,l.injector);this.activated=l.createComponent(c,{index:l.length,injector:p,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275dir=rt({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sa]});let s=r;return s})(),El=class{constructor(r,o,t){this.route=r,this.childContexts=o,this.parent=t}get(r,o){return r===fn?this.route:r===fi?this.childContexts:this.parent.get(r,o)}},Vs=new re(""),Yf=(()=>{let r=class r{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,l=Wn([i.queryParams,i.params,i.data]).pipe(dt(([e,c,m],p)=>(m=F(F(F({},e),c),m),p===0?z(m):Promise.resolve(m)))).subscribe(e=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let c=df(i.component);if(!c){this.unsubscribeFromRouteData(t);return}for(let{templateName:m}of c.inputs)t.activatedComponentRef.setInput(m,e[m])});this.outletDataSubscriptions.set(t,l)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:r.\u0275fac});let s=r;return s})();function U_(s,r,o){let t=li(s,r._root,o?o._root:void 0);return new Us(t,r)}function li(s,r,o){if(o&&s.shouldReuseRoute(r.value,o.value.snapshot)){let t=o.value;t._futureSnapshot=r.value;let i=j_(s,r,o);return new at(t,i)}else{if(s.shouldAttach(r.value)){let l=s.retrieve(r.value);if(l!==null){let e=l.route;return e.value._futureSnapshot=r.value,e.children=r.children.map(c=>li(s,c)),e}}let t=H_(r.value),i=r.children.map(l=>li(s,l));return new at(t,i)}}function j_(s,r,o){return r.children.map(t=>{for(let i of o.children)if(s.shouldReuseRoute(t.value,i.value.snapshot))return li(s,t,i);return li(s,t)})}function H_(s){return new fn(new De(s.url),new De(s.params),new De(s.queryParams),new De(s.fragment),new De(s.data),s.outlet,s.component,s)}var gh="ngNavigationCancelingError";function bh(s,r){let{redirectTo:o,navigationBehaviorOptions:t}=ar(r)?{redirectTo:r,navigationBehaviorOptions:void 0}:r,i=_h(!1,ft.Redirect);return i.url=o,i.navigationBehaviorOptions=t,i}function _h(s,r){let o=new Error(`NavigationCancelingError: ${s||""}`);return o[gh]=!0,o.cancellationCode=r,o}function q_(s){return vh(s)&&ar(s.url)}function vh(s){return!!s&&s[gh]}var z_=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=ze({type:r,selectors:[["ng-component"]],standalone:!0,features:[Qe],decls:1,vars:0,template:function(i,l){i&1&&Ke(0,"router-outlet")},dependencies:[L_],encapsulation:2});let s=r;return s})();function B_(s,r){return s.providers&&!s._injector&&(s._injector=xa(s.providers,r,`Route: ${s.path}`)),s._injector??r}function Nl(s){let r=s.children&&s.children.map(Nl),o=r?qe(F({},s),{children:r}):F({},s);return!o.component&&!o.loadComponent&&(r||o.loadChildren)&&o.outlet&&o.outlet!==X&&(o.component=z_),o}function Ot(s){return s.outlet||X}function V_(s,r){let o=s.filter(t=>Ot(t)===r);return o.push(...s.filter(t=>Ot(t)!==r)),o}function hi(s){if(!s)return null;if(s.routeConfig?._injector)return s.routeConfig._injector;for(let r=s.parent;r;r=r.parent){let o=r.routeConfig;if(o?._loadedInjector)return o._loadedInjector;if(o?._injector)return o._injector}return null}var $_=(s,r,o,t)=>Y(i=>(new Sl(r,i.targetRouterState,i.currentRouterState,o,t).activate(s),i)),Sl=class{constructor(r,o,t,i,l){this.routeReuseStrategy=r,this.futureState=o,this.currState=t,this.forwardEvent=i,this.inputBindingEnabled=l}activate(r){let o=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(o,t,r),rl(this.futureState.root),this.activateChildRoutes(o,t,r)}deactivateChildRoutes(r,o,t){let i=rr(o);r.children.forEach(l=>{let e=l.value.outlet;this.deactivateRoutes(l,i[e],t),delete i[e]}),Object.values(i).forEach(l=>{this.deactivateRouteAndItsChildren(l,t)})}deactivateRoutes(r,o,t){let i=r.value,l=o?o.value:null;if(i===l)if(i.component){let e=t.getContext(i.outlet);e&&this.deactivateChildRoutes(r,o,e.children)}else this.deactivateChildRoutes(r,o,t);else l&&this.deactivateRouteAndItsChildren(o,t)}deactivateRouteAndItsChildren(r,o){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,o):this.deactivateRouteAndOutlet(r,o)}detachAndStoreRouteSubtree(r,o){let t=o.getContext(r.value.outlet),i=t&&r.value.component?t.children:o,l=rr(r);for(let e of Object.values(l))this.deactivateRouteAndItsChildren(e,i);if(t&&t.outlet){let e=t.outlet.detach(),c=t.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:e,route:r,contexts:c})}}deactivateRouteAndOutlet(r,o){let t=o.getContext(r.value.outlet),i=t&&r.value.component?t.children:o,l=rr(r);for(let e of Object.values(l))this.deactivateRouteAndItsChildren(e,i);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(r,o,t){let i=rr(o);r.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],t),this.forwardEvent(new vl(l.value.snapshot))}),r.children.length&&this.forwardEvent(new bl(r.value.snapshot))}activateRoutes(r,o,t){let i=r.value,l=o?o.value:null;if(rl(i),i===l)if(i.component){let e=t.getOrCreateContext(i.outlet);this.activateChildRoutes(r,o,e.children)}else this.activateChildRoutes(r,o,t);else if(i.component){let e=t.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),e.children.onOutletReAttached(c.contexts),e.attachRef=c.componentRef,e.route=c.route.value,e.outlet&&e.outlet.attach(c.componentRef,c.route.value),rl(c.route.value),this.activateChildRoutes(r,null,e.children)}else{let c=hi(i.snapshot);e.attachRef=null,e.route=i,e.injector=c,e.outlet&&e.outlet.activateWith(i,e.injector),this.activateChildRoutes(r,null,e.children)}}else this.activateChildRoutes(r,null,t)}},Hs=class{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}},sr=class{constructor(r,o){this.component=r,this.route=o}};function W_(s,r,o){let t=s._root,i=r?r._root:null;return Zr(t,i,o,[t.value])}function G_(s){let r=s.routeConfig?s.routeConfig.canActivateChild:null;return!r||r.length===0?null:{node:s,guards:r}}function ur(s,r){let o=Symbol(),t=r.get(s,o);return t===o?typeof s=="function"&&!Hd(s)?s:r.get(s):t}function Zr(s,r,o,t,i={canDeactivateChecks:[],canActivateChecks:[]}){let l=rr(r);return s.children.forEach(e=>{K_(e,l[e.value.outlet],o,t.concat([e.value]),i),delete l[e.value.outlet]}),Object.entries(l).forEach(([e,c])=>ti(c,o.getContext(e),i)),i}function K_(s,r,o,t,i={canDeactivateChecks:[],canActivateChecks:[]}){let l=s.value,e=r?r.value:null,c=o?o.getContext(s.value.outlet):null;if(e&&l.routeConfig===e.routeConfig){let m=Y_(e,l,l.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Hs(t)):(l.data=e.data,l._resolvedData=e._resolvedData),l.component?Zr(s,r,c?c.children:null,t,i):Zr(s,r,o,t,i),m&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new sr(c.outlet.component,e))}else e&&ti(r,c,i),i.canActivateChecks.push(new Hs(t)),l.component?Zr(s,null,c?c.children:null,t,i):Zr(s,null,o,t,i);return i}function Y_(s,r,o){if(typeof o=="function")return o(s,r);switch(o){case"pathParamsChange":return!On(s.url,r.url);case"pathParamsOrQueryParamsChange":return!On(s.url,r.url)||!Dt(s.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cl(s,r)||!Dt(s.queryParams,r.queryParams);case"paramsChange":default:return!Cl(s,r)}}function ti(s,r,o){let t=rr(s),i=s.value;Object.entries(t).forEach(([l,e])=>{i.component?r?ti(e,r.children.getContext(l),o):ti(e,null,o):ti(e,r,o)}),i.component?r&&r.outlet&&r.outlet.isActivated?o.canDeactivateChecks.push(new sr(r.outlet.component,i)):o.canDeactivateChecks.push(new sr(null,i)):o.canDeactivateChecks.push(new sr(null,i))}function mi(s){return typeof s=="function"}function X_(s){return typeof s=="boolean"}function Z_(s){return s&&mi(s.canLoad)}function J_(s){return s&&mi(s.canActivate)}function Q_(s){return s&&mi(s.canActivateChild)}function ev(s){return s&&mi(s.canDeactivate)}function tv(s){return s&&mi(s.canMatch)}function yh(s){return s instanceof Od||s?.name==="EmptyError"}var Is=Symbol("INITIAL_VALUE");function cr(){return dt(s=>Wn(s.map(r=>r.pipe(vt(1),ls(Is)))).pipe(Y(r=>{for(let o of r)if(o!==!0){if(o===Is)return Is;if(o===!1||o instanceof cn)return o}return!0}),At(r=>r!==Is),vt(1)))}function nv(s,r){return nt(o=>{let{targetSnapshot:t,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:e}}=o;return e.length===0&&l.length===0?z(qe(F({},o),{guardsResult:!0})):rv(e,t,i,s).pipe(nt(c=>c&&X_(c)?iv(t,l,s,r):z(c)),Y(c=>qe(F({},o),{guardsResult:c})))})}function rv(s,r,o,t){return Je(s).pipe(nt(i=>cv(i.component,i.route,o,r,t)),Qt(i=>i!==!0,!0))}function iv(s,r,o,t){return Je(r).pipe(Jt(i=>os(ov(i.route.parent,t),sv(i.route,t),lv(s,i.path,o),av(s,i.route,o))),Qt(i=>i!==!0,!0))}function sv(s,r){return s!==null&&r&&r(new _l(s)),z(!0)}function ov(s,r){return s!==null&&r&&r(new gl(s)),z(!0)}function av(s,r,o){let t=r.routeConfig?r.routeConfig.canActivate:null;if(!t||t.length===0)return z(!0);let i=t.map(l=>va(()=>{let e=hi(r)??o,c=ur(l,e),m=J_(c)?c.canActivate(r,s):tn(e,()=>c(r,s));return hn(m).pipe(Qt())}));return z(i).pipe(cr())}function lv(s,r,o){let t=r[r.length-1],l=r.slice(0,r.length-1).reverse().map(e=>G_(e)).filter(e=>e!==null).map(e=>va(()=>{let c=e.guards.map(m=>{let p=hi(e.node)??o,b=ur(m,p),y=Q_(b)?b.canActivateChild(t,s):tn(p,()=>b(t,s));return hn(y).pipe(Qt())});return z(c).pipe(cr())}));return z(l).pipe(cr())}function cv(s,r,o,t,i){let l=r&&r.routeConfig?r.routeConfig.canDeactivate:null;if(!l||l.length===0)return z(!0);let e=l.map(c=>{let m=hi(r)??i,p=ur(c,m),b=ev(p)?p.canDeactivate(s,r,o,t):tn(m,()=>p(s,r,o,t));return hn(b).pipe(Qt())});return z(e).pipe(cr())}function uv(s,r,o,t){let i=r.canLoad;if(i===void 0||i.length===0)return z(!0);let l=i.map(e=>{let c=ur(e,s),m=Z_(c)?c.canLoad(r,o):tn(s,()=>c(r,o));return hn(m)});return z(l).pipe(cr(),Th(t))}function Th(s){return xd(Ce(r=>{if(ar(r))throw bh(s,r)}),Y(r=>r===!0))}function dv(s,r,o,t){let i=r.canMatch;if(!i||i.length===0)return z(!0);let l=i.map(e=>{let c=ur(e,s),m=tv(c)?c.canMatch(r,o):tn(s,()=>c(r,o));return hn(m)});return z(l).pipe(cr(),Th(t))}var ci=class{constructor(r){this.segmentGroup=r||null}},qs=class extends Error{constructor(r){super(),this.urlTree=r}};function nr(s){return Sn(new ci(s))}function fv(s){return Sn(new ye(4e3,!1))}function hv(s){return Sn(_h(!1,ft.GuardRejected))}var Al=class{constructor(r,o){this.urlSerializer=r,this.urlTree=o}lineralizeSegments(r,o){let t=[],i=o.root;for(;;){if(t=t.concat(i.segments),i.numberOfChildren===0)return z(t);if(i.numberOfChildren>1||!i.children[X])return fv(r.redirectTo);i=i.children[X]}}applyRedirectCommands(r,o,t){let i=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),r,t);if(o.startsWith("/"))throw new qs(i);return i}applyRedirectCreateUrlTree(r,o,t,i){let l=this.createSegmentGroup(r,o.root,t,i);return new cn(l,this.createQueryParams(o.queryParams,this.urlTree.queryParams),o.fragment)}createQueryParams(r,o){let t={};return Object.entries(r).forEach(([i,l])=>{if(typeof l=="string"&&l.startsWith(":")){let c=l.substring(1);t[i]=o[c]}else t[i]=l}),t}createSegmentGroup(r,o,t,i){let l=this.createSegments(r,o.segments,t,i),e={};return Object.entries(o.children).forEach(([c,m])=>{e[c]=this.createSegmentGroup(r,m,t,i)}),new se(l,e)}createSegments(r,o,t,i){return o.map(l=>l.path.startsWith(":")?this.findPosParam(r,l,i):this.findOrReturn(l,t))}findPosParam(r,o,t){let i=t[o.path.substring(1)];if(!i)throw new ye(4001,!1);return i}findOrReturn(r,o){let t=0;for(let i of o){if(i.path===r.path)return o.splice(t),i;t++}return r}},Rl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mv(s,r,o,t,i){let l=Ml(s,r,o);return l.matched?(t=B_(r,t),dv(t,r,o,i).pipe(Y(e=>e===!0?l:F({},Rl)))):z(l)}function Ml(s,r,o){if(r.path==="**")return pv(o);if(r.path==="")return r.pathMatch==="full"&&(s.hasChildren()||o.length>0)?F({},Rl):{matched:!0,consumedSegments:[],remainingSegments:o,parameters:{},positionalParamSegments:{}};let i=(r.matcher||u_)(o,s,r);if(!i)return F({},Rl);let l={};Object.entries(i.posParams??{}).forEach(([c,m])=>{l[c]=m.path});let e=i.consumed.length>0?F(F({},l),i.consumed[i.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:i.consumed,remainingSegments:o.slice(i.consumed.length),parameters:e,positionalParamSegments:i.posParams??{}}}function pv(s){return{matched:!0,parameters:s.length>0?eh(s).parameters:{},consumedSegments:s,remainingSegments:[],positionalParamSegments:{}}}function Xf(s,r,o,t){return o.length>0&&_v(s,o,t)?{segmentGroup:new se(r,bv(t,new se(o,s.children))),slicedSegments:[]}:o.length===0&&vv(s,o,t)?{segmentGroup:new se(s.segments,gv(s,o,t,s.children)),slicedSegments:o}:{segmentGroup:new se(s.segments,s.children),slicedSegments:o}}function gv(s,r,o,t){let i={};for(let l of o)if($s(s,r,l)&&!t[Ot(l)]){let e=new se([],{});i[Ot(l)]=e}return F(F({},t),i)}function bv(s,r){let o={};o[X]=r;for(let t of s)if(t.path===""&&Ot(t)!==X){let i=new se([],{});o[Ot(t)]=i}return o}function _v(s,r,o){return o.some(t=>$s(s,r,t)&&Ot(t)!==X)}function vv(s,r,o){return o.some(t=>$s(s,r,t))}function $s(s,r,o){return(s.hasChildren()||r.length>0)&&o.pathMatch==="full"?!1:o.path===""}function yv(s,r,o,t){return Ot(s)!==t&&(t===X||!$s(r,o,s))?!1:Ml(r,s,o).matched}function Tv(s,r,o){return r.length===0&&!s.children[o]}var Il=class{};function wv(s,r,o,t,i,l,e="emptyOnly"){return new xl(s,r,o,t,i,e,l).recognize()}var Cv=31,xl=class{constructor(r,o,t,i,l,e,c){this.injector=r,this.configLoader=o,this.rootComponentType=t,this.config=i,this.urlTree=l,this.paramsInheritanceStrategy=e,this.urlSerializer=c,this.applyRedirects=new Al(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(r){return new ye(4002,`'${r.segmentGroup}'`)}recognize(){let r=Xf(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(r).pipe(Y(o=>{let t=new ai([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,{},X,this.rootComponentType,null,{}),i=new at(t,o),l=new js("",i),e=x_(t,[],this.urlTree.queryParams,this.urlTree.fragment);return e.queryParams=this.urlTree.queryParams,l.url=this.urlSerializer.serialize(e),this.inheritParamsAndData(l._root,null),{state:l,tree:e}}))}match(r){return this.processSegmentGroup(this.injector,this.config,r,X).pipe(Zt(t=>{if(t instanceof qs)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof ci?this.noMatchError(t):t}))}inheritParamsAndData(r,o){let t=r.value,i=Ol(t,o,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),r.children.forEach(l=>this.inheritParamsAndData(l,t))}processSegmentGroup(r,o,t,i){return t.segments.length===0&&t.hasChildren()?this.processChildren(r,o,t):this.processSegment(r,o,t,t.segments,i,!0).pipe(Y(l=>l instanceof at?[l]:[]))}processChildren(r,o,t){let i=[];for(let l of Object.keys(t.children))l==="primary"?i.unshift(l):i.push(l);return Je(i).pipe(Jt(l=>{let e=t.children[l],c=V_(o,l);return this.processSegmentGroup(r,c,e,l)}),Fd((l,e)=>(l.push(...e),l)),ya(null),Pd(),nt(l=>{if(l===null)return nr(t);let e=wh(l);return Ev(e),z(e)}))}processSegment(r,o,t,i,l,e){return Je(o).pipe(Jt(c=>this.processSegmentAgainstRoute(c._injector??r,o,c,t,i,l,e).pipe(Zt(m=>{if(m instanceof ci)return z(null);throw m}))),Qt(c=>!!c),Zt(c=>{if(yh(c))return Tv(t,i,l)?z(new Il):nr(t);throw c}))}processSegmentAgainstRoute(r,o,t,i,l,e,c){return yv(t,i,l,e)?t.redirectTo===void 0?this.matchSegmentAgainstRoute(r,i,t,l,e):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(r,i,o,t,l,e):nr(i):nr(i)}expandSegmentAgainstRouteUsingRedirect(r,o,t,i,l,e){let{matched:c,consumedSegments:m,positionalParamSegments:p,remainingSegments:b}=Ml(o,i,l);if(!c)return nr(o);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Cv&&(this.allowRedirects=!1));let y=this.applyRedirects.applyRedirectCommands(m,i.redirectTo,p);return this.applyRedirects.lineralizeSegments(i,y).pipe(nt(f=>this.processSegment(r,t,o,f.concat(b),e,!1)))}matchSegmentAgainstRoute(r,o,t,i,l){let e=mv(o,t,i,r,this.urlSerializer);return t.path==="**"&&(o.children={}),e.pipe(dt(c=>c.matched?(r=t._injector??r,this.getChildConfig(r,t,i).pipe(dt(({routes:m})=>{let p=t._loadedInjector??r,{consumedSegments:b,remainingSegments:y,parameters:f}=c,S=new ai(b,f,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Av(t),Ot(t),t.component??t._loadedComponent??null,t,Rv(t)),{segmentGroup:v,slicedSegments:C}=Xf(o,b,y,m);if(C.length===0&&v.hasChildren())return this.processChildren(p,m,v).pipe(Y(K=>K===null?null:new at(S,K)));if(m.length===0&&C.length===0)return z(new at(S,[]));let q=Ot(t)===l;return this.processSegment(p,m,v,C,q?X:l,!0).pipe(Y(K=>new at(S,K instanceof at?[K]:[])))}))):nr(o)))}getChildConfig(r,o,t){return o.children?z({routes:o.children,injector:r}):o.loadChildren?o._loadedRoutes!==void 0?z({routes:o._loadedRoutes,injector:o._loadedInjector}):uv(r,o,t,this.urlSerializer).pipe(nt(i=>i?this.configLoader.loadChildren(r,o).pipe(Ce(l=>{o._loadedRoutes=l.routes,o._loadedInjector=l.injector})):hv(o))):z({routes:[],injector:r})}};function Ev(s){s.sort((r,o)=>r.value.outlet===X?-1:o.value.outlet===X?1:r.value.outlet.localeCompare(o.value.outlet))}function Sv(s){let r=s.value.routeConfig;return r&&r.path===""}function wh(s){let r=[],o=new Set;for(let t of s){if(!Sv(t)){r.push(t);continue}let i=r.find(l=>t.value.routeConfig===l.value.routeConfig);i!==void 0?(i.children.push(...t.children),o.add(i)):r.push(t)}for(let t of o){let i=wh(t.children);r.push(new at(t.value,i))}return r.filter(t=>!o.has(t))}function Av(s){return s.data||{}}function Rv(s){return s.resolve||{}}function Iv(s,r,o,t,i,l){return nt(e=>wv(s,r,o,t,e.extractedUrl,i,l).pipe(Y(({state:c,tree:m})=>qe(F({},e),{targetSnapshot:c,urlAfterRedirects:m}))))}function xv(s,r){return nt(o=>{let{targetSnapshot:t,guards:{canActivateChecks:i}}=o;if(!i.length)return z(o);let l=new Set(i.map(m=>m.route)),e=new Set;for(let m of l)if(!e.has(m))for(let p of Ch(m))e.add(p);let c=0;return Je(e).pipe(Jt(m=>l.has(m)?Dv(m,t,s,r):(m.data=Ol(m,m.parent,s).resolve,z(void 0))),Ce(()=>c++),Ta(1),nt(m=>c===e.size?z(o):En))})}function Ch(s){let r=s.children.map(o=>Ch(o)).flat();return[s,...r]}function Dv(s,r,o,t){let i=s.routeConfig,l=s._resolve;return i?.title!==void 0&&!ph(i)&&(l[ui]=i.title),Ov(l,s,r,t).pipe(Y(e=>(s._resolvedData=e,s.data=Ol(s,s.parent,o).resolve,null)))}function Ov(s,r,o,t){let i=ol(s);if(i.length===0)return z({});let l={};return Je(i).pipe(nt(e=>kv(s[e],r,o,t).pipe(Qt(),Ce(c=>{l[e]=c}))),Ta(1),Nd(l),Zt(e=>yh(e)?En:Sn(e)))}function kv(s,r,o,t){let i=hi(r)??t,l=ur(s,i),e=l.resolve?l.resolve(r,o):tn(i,()=>l(r,o));return hn(e)}function il(s){return dt(r=>{let o=s(r);return o?Je(o).pipe(Y(()=>r)):z(r)})}var Eh=(()=>{let r=class r{buildTitle(t){let i,l=t.root;for(;l!==void 0;)i=this.getResolvedTitleForRoute(l)??i,l=l.children.find(e=>e.outlet===X);return i}getResolvedTitleForRoute(t){return t.data[ui]}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:()=>j(Nv),providedIn:"root"});let s=r;return s})(),Nv=(()=>{let r=class r extends Eh{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}};r.\u0275fac=function(i){return new(i||r)(H(Bf))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),pi=new re("",{providedIn:"root",factory:()=>({})}),zs=new re(""),Pl=(()=>{let r=class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(ys)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=hn(t.loadComponent()).pipe(Y(Sh),Ce(e=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=e}),An(()=>{this.componentLoaders.delete(t)})),l=new ba(i,()=>new ut).pipe(ga());return this.componentLoaders.set(t,l),l}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let e=Mv(i,this.compiler,t,this.onLoadEndListener).pipe(An(()=>{this.childrenLoaders.delete(i)})),c=new ba(e,()=>new ut).pipe(ga());return this.childrenLoaders.set(i,c),c}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function Mv(s,r,o,t){return hn(s.loadChildren()).pipe(Y(Sh),nt(i=>i instanceof tf||Array.isArray(i)?z(i):Je(r.compileModuleAsync(i))),Y(i=>{t&&t(s);let l,e,c=!1;return Array.isArray(i)?(e=i,c=!0):(l=i.create(o).injector,e=l.get(zs,[],{optional:!0,self:!0}).flat()),{routes:e.map(Nl),injector:l}}))}function Pv(s){return s&&typeof s=="object"&&"default"in s}function Sh(s){return Pv(s)?s.default:s}var Fl=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:()=>j(Fv),providedIn:"root"});let s=r;return s})(),Fv=(()=>{let r=class r{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Ah=new re(""),Rh=new re("");function Lv(s,r,o){let t=s.get(Rh),i=s.get(de);return s.get(ae).runOutsideAngular(()=>{if(!i.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,Promise.resolve();let l,e=new Promise(p=>{l=p}),c=i.startViewTransition(()=>(l(),Uv(s))),{onViewTransitionCreated:m}=t;return m&&tn(s,()=>m({transition:c,from:r,to:o})),e})}function Uv(s){return new Promise(r=>{Jd(r,{injector:s})})}var Ll=(()=>{let r=class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ut,this.transitionAbortSubject=new ut,this.configLoader=j(Pl),this.environmentInjector=j(Kn),this.urlSerializer=j(di),this.rootContexts=j(fi),this.location=j($r),this.inputBindingEnabled=j(Vs,{optional:!0})!==null,this.titleStrategy=j(Eh),this.options=j(pi,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(Fl),this.createViewTransition=j(Ah,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null;let t=l=>this.events.next(new ml(l)),i=l=>this.events.next(new pl(l));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(qe(F(F({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,l){return this.transitions=new De({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ei,restoredState:null,currentSnapshot:l.snapshot,targetSnapshot:null,currentRouterState:l,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(At(e=>e.id!==0),Y(e=>qe(F({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),dt(e=>{this.currentTransition=e;let c=!1,m=!1;return z(e).pipe(Ce(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?qe(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),dt(p=>{let b=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),y=p.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!b&&y!=="reload"){let f="";return this.events.next(new dn(p.id,this.urlSerializer.serialize(p.rawUrl),f,Ms.IgnoredSameUrlNavigation)),p.resolve(null),En}if(this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return z(p).pipe(dt(f=>{let S=this.transitions?.getValue();return this.events.next(new lr(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),S!==this.transitions?.getValue()?En:Promise.resolve(f)}),Iv(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ce(f=>{e.targetSnapshot=f.targetSnapshot,e.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=qe(F({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let S=new Ps(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(S)}));if(b&&this.urlHandlingStrategy.shouldProcessUrl(p.currentRawUrl)){let{id:f,extractedUrl:S,source:v,restoredState:C,extras:q}=p,K=new lr(f,this.urlSerializer.serialize(S),v,C);this.events.next(K);let _e=hh(this.rootComponentType).snapshot;return this.currentTransition=e=qe(F({},p),{targetSnapshot:_e,urlAfterRedirects:S,extras:qe(F({},q),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=S,z(e)}else{let f="";return this.events.next(new dn(p.id,this.urlSerializer.serialize(p.extractedUrl),f,Ms.IgnoredByUrlHandlingStrategy)),p.resolve(null),En}}),Ce(p=>{let b=new ul(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(b)}),Y(p=>(this.currentTransition=e=qe(F({},p),{guards:W_(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),e)),nv(this.environmentInjector,p=>this.events.next(p)),Ce(p=>{if(e.guardsResult=p.guardsResult,ar(p.guardsResult))throw bh(this.urlSerializer,p.guardsResult);let b=new dl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.events.next(b)}),At(p=>p.guardsResult?!0:(this.cancelNavigationTransition(p,"",ft.GuardRejected),!1)),il(p=>{if(p.guards.canActivateChecks.length)return z(p).pipe(Ce(b=>{let y=new fl(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(y)}),dt(b=>{let y=!1;return z(b).pipe(xv(this.paramsInheritanceStrategy,this.environmentInjector),Ce({next:()=>y=!0,complete:()=>{y||this.cancelNavigationTransition(b,"",ft.NoDataFromResolver)}}))}),Ce(b=>{let y=new hl(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(y)}))}),il(p=>{let b=y=>{let f=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(y.routeConfig).pipe(Ce(S=>{y.component=S}),Y(()=>{})));for(let S of y.children)f.push(...b(S));return f};return Wn(b(p.targetSnapshot.root)).pipe(ya(null),vt(1))}),il(()=>this.afterPreactivation()),dt(()=>{let{currentSnapshot:p,targetSnapshot:b}=e,y=this.createViewTransition?.(this.environmentInjector,p.root,b.root);return y?Je(y).pipe(Y(()=>e)):z(e)}),Y(p=>{let b=U_(t.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return this.currentTransition=e=qe(F({},p),{targetRouterState:b}),this.currentNavigation.targetRouterState=b,e}),Ce(()=>{this.events.next(new si)}),$_(this.rootContexts,t.routeReuseStrategy,p=>this.events.next(p),this.inputBindingEnabled),vt(1),Ce({next:p=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qt(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects))),this.titleStrategy?.updateTitle(p.targetRouterState.snapshot),p.resolve(!0)},complete:()=>{c=!0}}),Gn(this.transitionAbortSubject.pipe(Ce(p=>{throw p}))),An(()=>{!c&&!m&&this.cancelNavigationTransition(e,"",ft.SupersededByNewNavigation),this.currentTransition?.id===e.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zt(p=>{if(m=!0,vh(p))this.events.next(new un(e.id,this.urlSerializer.serialize(e.extractedUrl),p.message,p.cancellationCode)),q_(p)?this.events.next(new oi(p.url)):e.resolve(!1);else{this.events.next(new ii(e.id,this.urlSerializer.serialize(e.extractedUrl),p,e.targetSnapshot??void 0));try{e.resolve(t.errorHandler(p))}catch(b){this.options.resolveNavigationPromiseOnError?e.resolve(!1):e.reject(b)}}return En}))}))}cancelNavigationTransition(t,i,l){let e=new un(t.id,this.urlSerializer.serialize(t.extractedUrl),i,l);this.events.next(e),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function jv(s){return s!==ei}var Hv=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:()=>j(qv),providedIn:"root"});let s=r;return s})(),Dl=class{shouldDetach(r){return!1}store(r,o){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,o){return r.routeConfig===o.routeConfig}},qv=(()=>{let r=class r extends Dl{};r.\u0275fac=(()=>{let t;return function(l){return(t||(t=Aa(r)))(l||r)}})(),r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Ih=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:()=>j(zv),providedIn:"root"});let s=r;return s})(),zv=(()=>{let r=class r extends Ih{constructor(){super(...arguments),this.location=j($r),this.urlSerializer=j(di),this.options=j(pi,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(Fl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new cn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=hh(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof lr)this.stateMemento=this.createStateMemento();else if(t instanceof dn)this.rawUrlTree=i.initialUrl;else if(t instanceof Ps){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let l=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(l,i)}}else t instanceof si?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):t instanceof un&&(t.code===ft.GuardRejected||t.code===ft.NoDataFromResolver)?this.restoreHistory(i):t instanceof ii?this.restoreHistory(i,!0):t instanceof qt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let l=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(l)||i.extras.replaceUrl){let e=this.browserPageId,c=F(F({},i.extras.state),this.generateNgRouterState(i.id,e));this.location.replaceState(l,"",c)}else{let e=F(F({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(l,"",e)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let l=this.browserPageId,e=this.currentPageId-l;e!==0?this.location.historyGo(e):this.currentUrlTree===t.finalUrl&&e===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}};r.\u0275fac=(()=>{let t;return function(l){return(t||(t=Aa(r)))(l||r)}})(),r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Jr=function(s){return s[s.COMPLETE=0]="COMPLETE",s[s.FAILED=1]="FAILED",s[s.REDIRECTING=2]="REDIRECTING",s}(Jr||{});function xh(s,r){s.events.pipe(At(o=>o instanceof qt||o instanceof un||o instanceof ii||o instanceof dn),Y(o=>o instanceof qt||o instanceof dn?Jr.COMPLETE:(o instanceof un?o.code===ft.Redirect||o.code===ft.SupersededByNewNavigation:!1)?Jr.REDIRECTING:Jr.FAILED),At(o=>o!==Jr.REDIRECTING),vt(1)).subscribe(()=>{r()})}function Bv(s){throw s}var Vv={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$v={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},kn=(()=>{let r=class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=j(bs),this.stateManager=j(Ih),this.options=j(pi,{optional:!0})||{},this.pendingTasks=j(nf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(Ll),this.urlSerializer=j(di),this.location=j($r),this.urlHandlingStrategy=j(Fl),this._events=new ut,this.errorHandler=this.options.errorHandler||Bv,this.navigated=!1,this.routeReuseStrategy=j(Hv),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(zs,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(Vs,{optional:!0}),this.eventsSubscription=new Cn,this.isNgZoneEnabled=j(ae)instanceof ae&&ae.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let l=this.navigationTransitions.currentTransition,e=this.navigationTransitions.currentNavigation;if(l!==null&&e!==null){if(this.stateManager.handleRouterEvent(i,e),i instanceof un&&i.code!==ft.Redirect&&i.code!==ft.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof qt)this.navigated=!0;else if(i instanceof oi){let c=this.urlHandlingStrategy.merge(i.url,l.currentRawUrl),m={info:l.extras.info,skipLocationChange:l.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||jv(l.source)};this.scheduleNavigation(c,ei,null,m,{resolve:l.resolve,reject:l.reject,promise:l.promise})}}Gv(i)&&this._events.next(i)}catch(l){this.navigationTransitions.transitionAbortSubject.next(l)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ei,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,l){let e={replaceUrl:!0},c=l?.navigationId?l:null;if(l){let p=F({},l);delete p.navigationId,delete p.\u0275routerPageId,Object.keys(p).length!==0&&(e.state=p)}let m=this.parseUrl(t);this.scheduleNavigation(m,i,c,e)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Nl),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:l,queryParams:e,fragment:c,queryParamsHandling:m,preserveFragment:p}=i,b=p?this.currentUrlTree.fragment:c,y=null;switch(m){case"merge":y=F(F({},this.currentUrlTree.queryParams),e);break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=e||null}y!==null&&(y=this.removeEmptyProps(y));let f;try{let S=l?l.snapshot:this.routerState.snapshot.root;f=ch(S)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),f=this.currentUrlTree.root}return uh(f,t,y,b??null)}navigateByUrl(t,i={skipLocationChange:!1}){let l=ar(t)?t:this.parseUrl(t),e=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(e,ei,null,i)}navigate(t,i={skipLocationChange:!1}){return Wv(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let l;if(i===!0?l=F({},Vv):i===!1?l=F({},$v):l=i,ar(t))return $f(this.currentUrlTree,t,l);let e=this.parseUrl(t);return $f(this.currentUrlTree,e,l)}removeEmptyProps(t){return Object.entries(t).reduce((i,[l,e])=>(e!=null&&(i[l]=e),i),{})}scheduleNavigation(t,i,l,e,c){if(this.disposed)return Promise.resolve(!1);let m,p,b;c?(m=c.resolve,p=c.reject,b=c.promise):b=new Promise((f,S)=>{m=f,p=S});let y=this.pendingTasks.add();return xh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(y))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:e,resolve:m,reject:p,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(f=>Promise.reject(f))}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function Wv(s){for(let r=0;r<s.length;r++)if(s[r]==null)throw new ye(4008,!1)}function Gv(s){return!(s instanceof si)&&!(s instanceof oi)}var Bs=class{};var Kv=(()=>{let r=class r{constructor(t,i,l,e,c){this.router=t,this.injector=l,this.preloadingStrategy=e,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(At(t=>t instanceof qt),Jt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let l=[];for(let e of i){e.providers&&!e._injector&&(e._injector=xa(e.providers,t,`Route: ${e.path}`));let c=e._injector??t,m=e._loadedInjector??c;(e.loadChildren&&!e._loadedRoutes&&e.canLoad===void 0||e.loadComponent&&!e._loadedComponent)&&l.push(this.preloadConfig(c,e)),(e.children||e._loadedRoutes)&&l.push(this.processRoutes(m,e.children??e._loadedRoutes))}return Je(l).pipe(_a())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let l;i.loadChildren&&i.canLoad===void 0?l=this.loader.loadChildren(t,i):l=z(null);let e=l.pipe(nt(c=>c===null?z(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(i.loadComponent&&!i._loadedComponent){let c=this.loader.loadComponent(i);return Je([e,c]).pipe(_a())}else return e})}};r.\u0275fac=function(i){return new(i||r)(H(kn),H(ys),H(Kn),H(Bs),H(Pl))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Dh=new re(""),Yv=(()=>{let r=class r{constructor(t,i,l,e,c={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=l,this.zone=e,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof lr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof dn&&t.code===Ms.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Fs&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fs(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};r.\u0275fac=function(i){Zn()},r.\u0275prov=G({token:r,factory:r.\u0275fac});let s=r;return s})();function Xv(s){return s.routerState.root}function gi(s,r){return{\u0275kind:s,\u0275providers:r}}function Zv(){let s=j(Ia);return r=>{let o=s.get(Pa);if(r!==o.components[0])return;let t=s.get(kn),i=s.get(Oh);s.get(Ul)===1&&t.initialNavigation(),s.get(kh,null,wa.Optional)?.setUpPreloading(),s.get(Dh,null,wa.Optional)?.init(),t.resetRootComponentType(o.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Oh=new re("",{factory:()=>new ut}),Ul=new re("",{providedIn:"root",factory:()=>1});function Jv(){return gi(2,[{provide:Ul,useValue:0},{provide:Ma,multi:!0,deps:[Ia],useFactory:r=>{let o=r.get(mf,Promise.resolve());return()=>o.then(()=>new Promise(t=>{let i=r.get(kn),l=r.get(Oh);xh(i,()=>{t(!0)}),r.get(Ll).afterPreactivation=()=>(t(!0),l.closed?z(void 0):l),i.initialNavigation()}))}}])}function Qv(){return gi(3,[{provide:Ma,multi:!0,useFactory:()=>{let r=j(kn);return()=>{r.setUpLocationChangeListener()}}},{provide:Ul,useValue:2}])}var kh=new re("");function e0(s){return gi(0,[{provide:kh,useExisting:Kv},{provide:Bs,useExisting:s}])}function t0(){return gi(8,[Yf,{provide:Vs,useExisting:Yf}])}function n0(s){let r=[{provide:Ah,useValue:Lv},{provide:Rh,useValue:F({skipNextTransition:!!s?.skipInitialTransition},s)}];return gi(9,r)}var Zf=new re("ROUTER_FORROOT_GUARD"),r0=[$r,{provide:di,useClass:ni},kn,fi,{provide:fn,useFactory:Xv,deps:[kn]},Pl,[]],Nh=(()=>{let r=class r{constructor(t){}static forRoot(t,i){return{ngModule:r,providers:[r0,[],{provide:zs,multi:!0,useValue:t},{provide:Zf,useFactory:a0,deps:[[kn,new ds,new Ea]]},{provide:pi,useValue:i||{}},i?.useHash?s0():o0(),i0(),i?.preloadingStrategy?e0(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?l0(i):[],i?.bindToComponentInputs?t0().\u0275providers:[],i?.enableViewTransitions?n0().\u0275providers:[],c0()]}}static forChild(t){return{ngModule:r,providers:[{provide:zs,multi:!0,useValue:t}]}}};r.\u0275fac=function(i){return new(i||r)(H(Zf,8))},r.\u0275mod=he({type:r}),r.\u0275inj=me({});let s=r;return s})();function i0(){return{provide:Dh,useFactory:()=>{let s=j(Sf),r=j(ae),o=j(pi),t=j(Ll),i=j(di);return o.scrollOffset&&s.setOffset(o.scrollOffset),new Yv(i,t,s,r,o)}}}function s0(){return{provide:Fa,useClass:gf}}function o0(){return{provide:Fa,useClass:pf}}function a0(s){return"guarded"}function l0(s){return[s.initialNavigation==="disabled"?Qv().\u0275providers:[],s.initialNavigation==="enabledBlocking"?Jv().\u0275providers:[]]}var Jf=new re("");function c0(){return[{provide:Jf,useFactory:Zv},{provide:af,multi:!0,useExisting:Jf}]}var Cr=Nb(sg());var Li={production:!0,domain:"webrtc.whirly.pl",addresses:["wss://webrtc.whirly.pl"],iceServers:["74.125.140.127:19302","74.125.143.127:19302"]};var og=(()=>{let r=class r{constructor(){this.connected=new De(!1),this.connecting=new De(!1),this.activeCall=new De(null),this.remoteStream=new De(null),this.callStatus=new De(""),this.ua=null,this.options={},Cr.debug.enable("JsSIP:*")}ngOnDestroy(){this.stop()}start(t){this.ua&&this.ua.isConnected()&&this.ua.stop();let i={sockets:Li.addresses.map(l=>new Cr.WebSocketInterface(l)),uri:`sip:Anonymous@${Li.domain}`,display_name:"Anonymous",register:!1,extra_headers:[`link-id: ${t}`]};this.options={mediaConstraints:{audio:!0,video:!1},pcConfig:{iceServers:Li.iceServers.map(l=>({urls:`stun:${l}`}))},extraHeaders:[]},this.callStatus.next(""),this.ua=new Cr.UA(i),this.ua.on("connecting",l=>{console.log("[WEBRTC][UA] LoginStateChanged: Connecting",l),this.connected.next(!1),this.connecting.next(!0)}),this.ua.on("connected",l=>{console.log("[WEBRTC][UA] LoginStateChanged: Connected",l),this.connected.next(!0),this.connecting.next(!1),this.callStatus.next("")}),this.ua.on("disconnected",l=>{console.log("[WEBRTC][UA] LoginStateChanged: Disconnected",l),this.connected.next(!1),this.connecting.next(!0),this.callStatus.next("")}),this.ua.on("registered",l=>{console.log("[WEBRTC][UA] LoginStateChanged: Login",l)}),this.ua.on("unregistered",l=>{console.log("[WEBRTC][UA] LoginStateChanged: Logout",l)}),this.ua.on("registrationFailed",l=>{console.log("[WEBRTC][UA] LoginStateChanged: Login failed",l)}),this.ua.on("newMessage",l=>{console.log("[WEBRTC][UA] newMessage: ",l)}),this.ua.on("newRTCSession",l=>{console.log("[WEBRTC][UA] New RTCSession: ",l),this.activeCall.next(l.session),l.session.on("failed",e=>{console.log("[WEBRTC][RTCSession] failed: ",e),this.activeCall.next(null),this.callStatus.next("Failed")}),l.session.on("ended",e=>{console.log("[WEBRTC][RTCSession] ended",e),this.activeCall.next(null),this.callStatus.next("Ended")}),l.session.on("icecandidate",e=>{console.log("[WEBRTC][RTCSession] icecandidate",e),setTimeout(()=>{console.log("[WEBRTC][RTCSession][icecandidate] timeout"),e.ready()},5e3)}),l.session.on("progress",e=>{console.log("[WEBRTC][RTCSession] progress",e),this.callStatus.next("In progress")}),l.session.on("confirmed",e=>{console.log("[WEBRTC][RTCSession] confirmed",e),this.callStatus.next("Confirmed")}),l.session.on("connecting",e=>{console.log("[WEBRTC][RTCSession] connecting",e),this.callStatus.next("Connecting")}),l.session.on("sending",e=>{console.log("[WEBRTC][RTCSession] sending",e)}),l.session.on("accepted",e=>{console.log("[WEBRTC][RTCSession] accepted",e),this.callStatus.next("Accepted")}),l.session.on("newDTMF",e=>{console.log("[WEBRTC][RTCSession] newDTMF",e)}),l.session.on("newInfo",e=>{console.log("[WEBRTC][RTCSession] newInfo",e)}),l.session.on("hold",e=>{console.log("[WEBRTC][RTCSession] hold",e)}),l.session.on("unhold",e=>{console.log("[WEBRTC][RTCSession] unhold",e)}),l.session.on("muted",e=>{console.log("[WEBRTC][RTCSession] muted",e)}),l.session.on("unmuted",e=>{console.log("[WEBRTC][RTCSession] unmuted",e)}),l.session.on("reinvite",e=>{console.log("[WEBRTC][RTCSession] reinvite",e)}),l.session.on("update",e=>{console.log("[WEBRTC][RTCSession] update",e)}),l.session.on("refer",e=>{console.log("[WEBRTC][RTCSession] refer",e)}),l.session.on("replaces",e=>{console.log("[WEBRTC][RTCSession] replaces",e)}),l.session.on("sdp",e=>{console.log("[WEBRTC][RTCSession] sdp",e)}),l.session.on("getusermediafailed",e=>{console.log("[WEBRTC][RTCSession] getusermediafailed",e)}),l.session.connection?(console.log("[WEBRTC][RTCSession] Peer connection exists"),this._set_addStream_listener(l.session.connection)):(console.log("[WEBRTC][RTCSession] Peer connection does not exist, wait creation"),l.session.on("peerconnection",e=>{console.log("[WEBRTC][RTCSession] peerconnection created",e),this._set_addStream_listener(l.session.connection)}))}),this.ua.on("sipEvent",l=>{console.log("[WEBRTC][UA] Sip Event: ",l)}),console.log("[WEBRTC][UA] Starting"),this.ua.start()}stop(){this.ua&&(this.ua.unregister({all:!0}),this.ua.stop(),this.ua=null,console.log("[WEBRTC][UA] Stopped"))}_set_addStream_listener(t){t.ontrack=i=>{console.log("[WEBRTC][RTCSession][peerconnection] ontrack",i);let l=i.streams[0];l.onremovetrack=e=>{console.log("[WEBRTC][RTCSession][peerconnection][ontrack][remote-stream] onremovetrack",e)},l.onaddtrack=e=>{console.log("[WEBRTC][RTCSession][peerconnection][ontrack][remote-stream] onaddtrack",e)},this.remoteStream.next(l)}}call(t){this.ua&&this.ua.isConnected()&&(this.callStatus.next(""),console.log(this.options),this.ua.call(`sip:${t}@${Li.domain}`,this.options))}hangup(){let t=this.activeCall.getValue();t&&t.terminate()}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var Dc;try{Dc=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Dc=!1}var Ze=(()=>{let r=class r{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Ef(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Dc)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};r.\u0275fac=function(i){return new(i||r)(H(In))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var Ui;function aC(){if(Ui==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ui=!0}))}finally{Ui=Ui||!1}return Ui}function Er(s){return aC()?s:!!s.capture}var xc;function lC(){if(xc==null){let s=typeof document<"u"?document.head:null;xc=!!(s&&(s.createShadowRoot||s.attachShadow))}return xc}function ag(s){if(lC()){let r=s.getRootNode?s.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&r instanceof ShadowRoot)return r}return null}function bn(s){return s.composedPath?s.composedPath()[0]:s.target}function lg(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Oc(s){return Array.isArray(s)?s:[s]}function jn(s){return s instanceof Be?s.nativeElement:s}var cg=new Set,Hn,cC=(()=>{let r=class r{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):dC}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&uC(t,this._nonce),this._matchMedia(t)}};r.\u0275fac=function(i){return new(i||r)(H(Ze),H(qr,8))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function uC(s,r){if(!cg.has(s))try{Hn||(Hn=document.createElement("style"),r&&(Hn.nonce=r),Hn.setAttribute("type","text/css"),document.head.appendChild(Hn)),Hn.sheet&&(Hn.sheet.insertRule(`@media ${s} {body{ }}`,0),cg.add(s))}catch(o){console.error(o)}}function dC(s){return{matches:s==="all"||s==="",media:s,addListener:()=>{},removeListener:()=>{}}}var dg=(()=>{let r=class r{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new ut}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return ug(Oc(t)).some(l=>this._registerQuery(l).mql.matches)}observe(t){let l=ug(Oc(t)).map(c=>this._registerQuery(c).observable),e=Wn(l);return e=os(e.pipe(vt(1)),e.pipe(as(1),Ur(0))),e.pipe(Y(c=>{let m={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:b})=>{m.matches=m.matches||p,m.breakpoints[b]=p}),m}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),e={observable:new pa(c=>{let m=p=>this._zone.run(()=>c.next(p));return i.addListener(m),()=>{i.removeListener(m)}}).pipe(ls(i),Y(({matches:c})=>({query:t,matches:c})),Gn(this._destroySubject)),mql:i};return this._queries.set(t,e),e}};r.\u0275fac=function(i){return new(i||r)(H(cC),H(ae))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function ug(s){return s.map(r=>r.split(",")).reduce((r,o)=>r.concat(o)).map(r=>r.trim())}function Nc(s){return s.buttons===0||s.detail===0}function Mc(s){let r=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!!r&&r.identifier===-1&&(r.radiusX==null||r.radiusX===1)&&(r.radiusY==null||r.radiusY===1)}var fC=new re("cdk-input-modality-detector-options"),hC={ignoreKeys:[18,17,224,91,16]},mg=650,Sr=Er({passive:!0,capture:!0}),mC=(()=>{let r=class r{get mostRecentModality(){return this._modality.value}constructor(t,i,l,e){this._platform=t,this._mostRecentTarget=null,this._modality=new De(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(m=>m===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=bn(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<mg||(this._modality.next(Nc(c)?"keyboard":"mouse"),this._mostRecentTarget=bn(c))},this._onTouchstart=c=>{if(Mc(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=bn(c)},this._options=F(F({},hC),e),this.modalityDetected=this._modality.pipe(as(1)),this.modalityChanged=this.modalityDetected.pipe(Md()),t.isBrowser&&i.runOutsideAngular(()=>{l.addEventListener("keydown",this._onKeydown,Sr),l.addEventListener("mousedown",this._onMousedown,Sr),l.addEventListener("touchstart",this._onTouchstart,Sr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Sr),document.removeEventListener("mousedown",this._onMousedown,Sr),document.removeEventListener("touchstart",this._onTouchstart,Sr))}};r.\u0275fac=function(i){return new(i||r)(H(Ze),H(ae),H(de),H(fC,8))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var Lo=function(s){return s[s.IMMEDIATE=0]="IMMEDIATE",s[s.EVENTUAL=1]="EVENTUAL",s}(Lo||{}),pC=new re("cdk-focus-monitor-default-options"),Fo=Er({passive:!0,capture:!0}),pg=(()=>{let r=class r{constructor(t,i,l,e,c){this._ngZone=t,this._platform=i,this._inputModalityDetector=l,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ut,this._rootNodeFocusAndBlurListener=m=>{let p=bn(m);for(let b=p;b;b=b.parentElement)m.type==="focus"?this._onFocus(m,b):this._onBlur(m,b)},this._document=e,this._detectionMode=c?.detectionMode||Lo.IMMEDIATE}monitor(t,i=!1){let l=jn(t);if(!this._platform.isBrowser||l.nodeType!==1)return z();let e=ag(l)||this._getDocument(),c=this._elementInfo.get(l);if(c)return i&&(c.checkChildren=!0),c.subject;let m={checkChildren:i,subject:new ut,rootNode:e};return this._elementInfo.set(l,m),this._registerGlobalListeners(m),m.subject}stopMonitoring(t){let i=jn(t),l=this._elementInfo.get(i);l&&(l.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(l))}focusVia(t,i,l){let e=jn(t),c=this._getDocument().activeElement;e===c?this._getClosestElementsInfo(e).forEach(([m,p])=>this._originChanged(m,i,p)):(this._setOrigin(i),typeof e.focus=="function"&&e.focus(l))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Lo.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===Lo.IMMEDIATE){clearTimeout(this._originTimeoutId);let l=this._originFromTouchInteraction?mg:1;this._originTimeoutId=setTimeout(()=>this._origin=null,l)}})}_onFocus(t,i){let l=this._elementInfo.get(i),e=bn(t);!l||!l.checkChildren&&i!==e||this._originChanged(i,this._getFocusOrigin(e),l)}_onBlur(t,i){let l=this._elementInfo.get(i);!l||l.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(l,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,l=this._rootNodeFocusListenerCount.get(i)||0;l||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Fo),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Fo)}),this._rootNodeFocusListenerCount.set(i,l+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Gn(this._stopInputModalityDetector)).subscribe(e=>{this._setOrigin(e,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let l=this._rootNodeFocusListenerCount.get(i);l>1?this._rootNodeFocusListenerCount.set(i,l-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Fo),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Fo),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,l){this._setClasses(t,i),this._emitOrigin(l,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((l,e)=>{(e===t||l.checkChildren&&e.contains(t))&&i.push([e,l])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:l}=this._inputModalityDetector;if(l!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let e=t.labels;if(e){for(let c=0;c<e.length;c++)if(e[c].contains(i))return!0}return!1}};r.\u0275fac=function(i){return new(i||r)(H(ae),H(Ze),H(mC),H(de,8),H(pC,8))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var qn=function(s){return s[s.NONE=0]="NONE",s[s.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",s[s.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",s}(qn||{}),fg="cdk-high-contrast-black-on-white",hg="cdk-high-contrast-white-on-black",kc="cdk-high-contrast-active",gg=(()=>{let r=class r{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=j(dg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return qn.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,l=i&&i.getComputedStyle?i.getComputedStyle(t):null,e=(l&&l.backgroundColor||"").replace(/ /g,"");switch(t.remove(),e){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return qn.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return qn.BLACK_ON_WHITE}return qn.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(kc,fg,hg),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===qn.BLACK_ON_WHITE?t.add(kc,fg):i===qn.WHITE_ON_BLACK&&t.add(kc,hg)}}};r.\u0275fac=function(i){return new(i||r)(H(Ze),H(de))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var Pc=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=he({type:r}),r.\u0275inj=me({});let s=r;return s})();function _C(){return!0}var vC=new re("mat-sanity-checks",{providedIn:"root",factory:_C}),We=(()=>{let r=class r{constructor(t,i,l){this._sanityChecks=i,this._document=l,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return lg()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}};r.\u0275fac=function(i){return new(i||r)(H(gg),H(vC,8),H(de))},r.\u0275mod=he({type:r}),r.\u0275inj=me({imports:[Pc,Pc]});let s=r;return s})();var gt=function(s){return s[s.FADING_IN=0]="FADING_IN",s[s.VISIBLE=1]="VISIBLE",s[s.FADING_OUT=2]="FADING_OUT",s[s.HIDDEN=3]="HIDDEN",s}(gt||{}),Uc=class{constructor(r,o,t,i=!1){this._renderer=r,this.element=o,this.config=t,this._animationForciblyDisabledThroughCss=i,this.state=gt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},bg=Er({passive:!0,capture:!0}),jc=class{constructor(){this._events=new Map,this._delegateEventHandler=r=>{let o=bn(r);o&&this._events.get(r.type)?.forEach((t,i)=>{(i===o||i.contains(o))&&t.forEach(l=>l.handleEvent(r))})}}addHandler(r,o,t,i){let l=this._events.get(o);if(l){let e=l.get(t);e?e.add(i):l.set(t,new Set([i]))}else this._events.set(o,new Map([[t,new Set([i])]])),r.runOutsideAngular(()=>{document.addEventListener(o,this._delegateEventHandler,bg)})}removeHandler(r,o,t){let i=this._events.get(r);if(!i)return;let l=i.get(o);l&&(l.delete(t),l.size===0&&i.delete(o),i.size===0&&(this._events.delete(r),document.removeEventListener(r,this._delegateEventHandler,bg)))}},_g={enterDuration:225,exitDuration:150},yC=800,vg=Er({passive:!0,capture:!0}),yg=["mousedown","touchstart"],Tg=["mouseup","mouseleave","touchend","touchcancel"],Hi=class Hi{constructor(r,o,t,i){this._target=r,this._ngZone=o,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=jn(t))}fadeInRipple(r,o,t={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),l=F(F({},_g),t.animation);t.centered&&(r=i.left+i.width/2,o=i.top+i.height/2);let e=t.radius||TC(r,o,i),c=r-i.left,m=o-i.top,p=l.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=`${c-e}px`,b.style.top=`${m-e}px`,b.style.height=`${e*2}px`,b.style.width=`${e*2}px`,t.color!=null&&(b.style.backgroundColor=t.color),b.style.transitionDuration=`${p}ms`,this._containerElement.appendChild(b);let y=window.getComputedStyle(b),f=y.transitionProperty,S=y.transitionDuration,v=f==="none"||S==="0s"||S==="0s, 0s"||i.width===0&&i.height===0,C=new Uc(this,b,t,v);b.style.transform="scale3d(1, 1, 1)",C.state=gt.FADING_IN,t.persistent||(this._mostRecentTransientRipple=C);let q=null;return!v&&(p||l.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let K=()=>this._finishRippleTransition(C),_e=()=>this._destroyRipple(C);b.addEventListener("transitionend",K),b.addEventListener("transitioncancel",_e),q={onTransitionEnd:K,onTransitionCancel:_e}}),this._activeRipples.set(C,q),(v||!p)&&this._finishRippleTransition(C),C}fadeOutRipple(r){if(r.state===gt.FADING_OUT||r.state===gt.HIDDEN)return;let o=r.element,t=F(F({},_g),r.config.animation);o.style.transitionDuration=`${t.exitDuration}ms`,o.style.opacity="0",r.state=gt.FADING_OUT,(r._animationForciblyDisabledThroughCss||!t.exitDuration)&&this._finishRippleTransition(r)}fadeOutAll(){this._getActiveRipples().forEach(r=>r.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(r=>{r.config.persistent||r.fadeOut()})}setupTriggerEvents(r){let o=jn(r);!this._platform.isBrowser||!o||o===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=o,yg.forEach(t=>{Hi._eventManager.addHandler(this._ngZone,t,o,this)}))}handleEvent(r){r.type==="mousedown"?this._onMousedown(r):r.type==="touchstart"?this._onTouchStart(r):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Tg.forEach(o=>{this._triggerElement.addEventListener(o,this,vg)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(r){r.state===gt.FADING_IN?this._startFadeOutTransition(r):r.state===gt.FADING_OUT&&this._destroyRipple(r)}_startFadeOutTransition(r){let o=r===this._mostRecentTransientRipple,{persistent:t}=r.config;r.state=gt.VISIBLE,!t&&(!o||!this._isPointerDown)&&r.fadeOut()}_destroyRipple(r){let o=this._activeRipples.get(r)??null;this._activeRipples.delete(r),this._activeRipples.size||(this._containerRect=null),r===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),r.state=gt.HIDDEN,o!==null&&(r.element.removeEventListener("transitionend",o.onTransitionEnd),r.element.removeEventListener("transitioncancel",o.onTransitionCancel)),r.element.remove()}_onMousedown(r){let o=Nc(r),t=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+yC;!this._target.rippleDisabled&&!o&&!t&&(this._isPointerDown=!0,this.fadeInRipple(r.clientX,r.clientY,this._target.rippleConfig))}_onTouchStart(r){if(!this._target.rippleDisabled&&!Mc(r)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let o=r.changedTouches;if(o)for(let t=0;t<o.length;t++)this.fadeInRipple(o[t].clientX,o[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(r=>{let o=r.state===gt.VISIBLE||r.config.terminateOnPointerUp&&r.state===gt.FADING_IN;!r.config.persistent&&o&&r.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let r=this._triggerElement;r&&(yg.forEach(o=>Hi._eventManager.removeHandler(o,r,this)),this._pointerUpEventsRegistered&&Tg.forEach(o=>r.removeEventListener(o,this,vg)))}};Hi._eventManager=new jc;var Hc=Hi;function TC(s,r,o){let t=Math.max(Math.abs(s-o.left),Math.abs(s-o.right)),i=Math.max(Math.abs(r-o.top),Math.abs(r-o.bottom));return Math.sqrt(t*t+i*i)}var Sg=new re("mat-ripple-global-options"),wC=(()=>{let r=class r{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,l,e,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=e||{},this._rippleRenderer=new Hc(this,i,t,l)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:F(F(F({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,l){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,F(F({},this.rippleConfig),l)):this._rippleRenderer.fadeInRipple(0,0,F(F({},this.rippleConfig),t))}};r.\u0275fac=function(i){return new(i||r)(ee(Be),ee(ae),ee(Ze),ee(Sg,8),ee(Lt,8))},r.\u0275dir=rt({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,l){i&2&&ot("mat-ripple-unbounded",l.unbounded)},inputs:{color:[Re.None,"matRippleColor","color"],unbounded:[Re.None,"matRippleUnbounded","unbounded"],centered:[Re.None,"matRippleCentered","centered"],radius:[Re.None,"matRippleRadius","radius"],animation:[Re.None,"matRippleAnimation","animation"],disabled:[Re.None,"matRippleDisabled","disabled"],trigger:[Re.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let s=r;return s})(),Ag=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=he({type:r}),r.\u0275inj=me({imports:[We,We]});let s=r;return s})();var wg={capture:!0},Cg=["focus","click","mouseenter","touchstart"],Fc="mat-ripple-loader-uninitialized",Lc="mat-ripple-loader-class-name",Eg="mat-ripple-loader-centered",Uo="mat-ripple-loader-disabled",Rg=(()=>{let r=class r{constructor(){this._document=j(de,{optional:!0}),this._animationMode=j(Lt,{optional:!0}),this._globalRippleOptions=j(Sg,{optional:!0}),this._platform=j(Ze),this._ngZone=j(ae),this._hosts=new Map,this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;let l=t.target.closest(`[${Fc}]`);l&&this._createRipple(l)},this._ngZone.runOutsideAngular(()=>{for(let t of Cg)this._document?.addEventListener(t,this._onInteraction,wg)})}ngOnDestroy(){let t=this._hosts.keys();for(let i of t)this.destroyRipple(i);for(let i of Cg)this._document?.removeEventListener(i,this._onInteraction,wg)}configureRipple(t,i){t.setAttribute(Fc,""),(i.className||!t.hasAttribute(Lc))&&t.setAttribute(Lc,i.className||""),i.centered&&t.setAttribute(Eg,""),i.disabled&&t.setAttribute(Uo,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,i){let l=this._hosts.get(t);if(l){l.disabled=i;return}i?t.setAttribute(Uo,""):t.removeAttribute(Uo)}_createRipple(t){if(!this._document)return;let i=this._hosts.get(t);if(i)return i;t.querySelector(".mat-ripple")?.remove();let l=this._document.createElement("span");l.classList.add("mat-ripple",t.getAttribute(Lc)),t.append(l);let e=new wC(new Be(l),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return e._isInitialized=!0,e.trigger=t,e.centered=t.hasAttribute(Eg),e.disabled=t.hasAttribute(Uo),this.attachRipple(t,e),e}attachRipple(t,i){t.removeAttribute(Fc),this._hosts.set(t,i)}destroyRipple(t){let i=this._hosts.get(t);i&&(i.ngOnDestroy(),this._hosts.delete(t))}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var CC=["*",[["mat-toolbar-row"]]],EC=["*","mat-toolbar-row"],SC=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275dir=rt({type:r,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0});let s=r;return s})(),Ig=(()=>{let r=class r{constructor(t,i,l){this._elementRef=t,this._platform=i,this._document=l}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}};r.\u0275fac=function(i){return new(i||r)(ee(Be),ee(Ze),ee(de))},r.\u0275cmp=ze({type:r,selectors:[["mat-toolbar"]],contentQueries:function(i,l,e){if(i&1&&ka(e,SC,5),i&2){let c;rn(c=sn())&&(l._toolbarRows=c)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,l){i&2&&(nn(l.color?"mat-"+l.color:""),ot("mat-toolbar-multiple-rows",l._toolbarRows.length>0)("mat-toolbar-single-row",l._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[Qe],ngContentSelectors:EC,decls:2,vars:0,template:function(i,l){i&1&&(Rt(CC),Ye(0),Ye(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0});let s=r;return s})();var xg=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=he({type:r}),r.\u0275inj=me({imports:[We,We]});let s=r;return s})();var RC=["*"];var IC=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],xC=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],DC=new re("MAT_CARD_CONFIG"),Dg=(()=>{let r=class r{constructor(t){this.appearance=t?.appearance||"raised"}};r.\u0275fac=function(i){return new(i||r)(ee(DC,8))},r.\u0275cmp=ze({type:r,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,l){i&2&&ot("mat-mdc-card-outlined",l.appearance==="outlined")("mdc-card--outlined",l.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[Qe],ngContentSelectors:RC,decls:1,vars:0,template:function(i,l){i&1&&(Rt(),Ye(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0});let s=r;return s})();var Og=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275dir=rt({type:r,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0});let s=r;return s})();var kg=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=ze({type:r,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],standalone:!0,features:[Qe],ngContentSelectors:xC,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,l){i&1&&(Rt(IC),Ye(0),ge(1,"div",0),Ye(2,1),Ee(),Ye(3,2))},encapsulation:2,changeDetection:0});let s=r;return s})();var Ng=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275dir=rt({type:r,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"],standalone:!0});let s=r;return s})();var Mg=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=he({type:r}),r.\u0275inj=me({imports:[We,er,We]});let s=r;return s})();var kC=["mat-button",""],NC=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],MC=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var PC=new re("MAT_BUTTON_CONFIG");var FC=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],LC=(()=>{let r=class r{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,i,l,e){this._elementRef=t,this._platform=i,this._ngZone=l,this._animationMode=e,this._focusMonitor=j(pg),this._rippleLoader=j(Rg),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=j(PC,{optional:!0}),m=t.nativeElement,p=m.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(m,{className:"mat-mdc-button-ripple"});for(let{attribute:b,mdcClasses:y}of FC)m.hasAttribute(b)&&p.add(...y)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};r.\u0275fac=function(i){Zn()},r.\u0275dir=rt({type:r,inputs:{color:"color",disableRipple:[Re.HasDecoratorInputTransform,"disableRipple","disableRipple",xt],disabled:[Re.HasDecoratorInputTransform,"disabled","disabled",xt],ariaDisabled:[Re.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",xt],disabledInteractive:[Re.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",xt]},features:[Ut]});let s=r;return s})();var Pg=(()=>{let r=class r extends LC{constructor(t,i,l,e){super(t,i,l,e)}};r.\u0275fac=function(i){return new(i||r)(ee(Be),ee(Ze),ee(ae),ee(Lt,8))},r.\u0275cmp=ze({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,l){i&2&&(st("disabled",l._getDisabledAttribute())("aria-disabled",l._getAriaDisabled()),nn(l.color?"mat-"+l.color:""),ot("mat-mdc-button-disabled",l.disabled)("mat-mdc-button-disabled-interactive",l.disabledInteractive)("_mat-animation-noopable",l._animationMode==="NoopAnimations")("mat-unthemed",!l.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ef,Qe],attrs:kC,ngContentSelectors:MC,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,l){i&1&&(Rt(NC),Ke(0,"span",0),Ye(1),ge(2,"span",1),Ye(3,1),Ee(),Ye(4,2),Ke(5,"span",2)(6,"span",3)),i&2&&ot("mdc-button__ripple",!l._isFab)("mdc-fab__ripple",l._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let s=r;return s})();var Fg=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=he({type:r}),r.\u0275inj=me({imports:[We,Ag,We]});let s=r;return s})();var jC=["determinateSpinner"];function HC(s,r){if(s&1&&(Ca(),ge(0,"svg",11),Ke(1,"circle",12),Ee()),s&2){let o=Fe();st("viewBox",o._viewBox()),Se(),ps("stroke-dasharray",o._strokeCircumference(),"px")("stroke-dashoffset",o._strokeCircumference()/2,"px")("stroke-width",o._circleStrokeWidth(),"%"),st("r",o._circleRadius())}}var qC=new re("mat-progress-spinner-default-options",{providedIn:"root",factory:zC});function zC(){return{diameter:Lg}}var Lg=100,BC=10,Ug=(()=>{let r=class r{get color(){return this._color||this._defaultColor}set color(t){this._color=t}constructor(t,i,l){this._elementRef=t,this._defaultColor="primary",this._value=0,this._diameter=Lg,this._noopAnimations=i==="NoopAnimations"&&!!l&&!l._forceAnimations,this.mode=t.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",l&&(l.color&&(this.color=this._defaultColor=l.color),l.diameter&&(this.diameter=l.diameter),l.strokeWidth&&(this.strokeWidth=l.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_circleRadius(){return(this.diameter-BC)/2}_viewBox(){let t=this._circleRadius()*2+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}};r.\u0275fac=function(i){return new(i||r)(ee(Be),ee(Lt,8),ee(qC))},r.\u0275cmp=ze({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,l){if(i&1&&Br(jC,5),i&2){let e;rn(e=sn())&&(l._determinateCircle=e.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,l){i&2&&(st("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",l.mode==="determinate"?l.value:null)("mode",l.mode),nn("mat-"+l.color),ps("width",l.diameter,"px")("height",l.diameter,"px")("--mdc-circular-progress-size",l.diameter+"px")("--mdc-circular-progress-active-indicator-width",l.diameter+"px"),ot("_mat-animation-noopable",l._noopAnimations)("mdc-circular-progress--indeterminate",l.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[Re.HasDecoratorInputTransform,"value","value",Vr],diameter:[Re.HasDecoratorInputTransform,"diameter","diameter",Vr],strokeWidth:[Re.HasDecoratorInputTransform,"strokeWidth","strokeWidth",Vr]},exportAs:["matProgressSpinner"],standalone:!0,features:[Ut,Qe],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,l){if(i&1&&(jt(0,HC,2,8,"ng-template",null,0,Qn),ge(2,"div",1,2),Ca(),ge(4,"svg",3),Ke(5,"circle",4),Ee()(),Ud(),ge(6,"div",5)(7,"div",6)(8,"div",7),yt(9,8),Ee(),ge(10,"div",9),yt(11,8),Ee(),ge(12,"div",10),yt(13,8),Ee()()()),i&2){let e=Ht(1);Se(4),st("viewBox",l._viewBox()),Se(),ps("stroke-dasharray",l._strokeCircumference(),"px")("stroke-dashoffset",l._strokeDashOffset(),"px")("stroke-width",l._circleStrokeWidth(),"%"),st("r",l._circleRadius()),Se(4),pe("ngTemplateOutlet",e),Se(2),pe("ngTemplateOutlet",e),Se(2),pe("ngTemplateOutlet",e)}},dependencies:[ws],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0});let s=r;return s})();var jg=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=he({type:r}),r.\u0275inj=me({imports:[er,We]});let s=r;return s})();var $C=["*"],jo;function WC(){if(jo===void 0&&(jo=null,typeof window<"u")){let s=window;s.trustedTypes!==void 0&&(jo=s.trustedTypes.createPolicy("angular#components",{createHTML:r=>r}))}return jo}function qi(s){return WC()?.createHTML(s)||s}function Hg(s){return Error(`Unable to find icon with the name "${s}"`)}function GC(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function qg(s){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${s}".`)}function zg(s){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${s}".`)}var Xt=class{constructor(r,o,t){this.url=r,this.svgText=o,this.options=t}},KC=(()=>{let r=class r{constructor(t,i,l,e){this._httpClient=t,this._sanitizer=i,this._errorHandler=e,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=l}addSvgIcon(t,i,l){return this.addSvgIconInNamespace("",t,i,l)}addSvgIconLiteral(t,i,l){return this.addSvgIconLiteralInNamespace("",t,i,l)}addSvgIconInNamespace(t,i,l,e){return this._addSvgIconConfig(t,i,new Xt(l,null,e))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,l,e){let c=this._sanitizer.sanitize(it.HTML,l);if(!c)throw zg(l);let m=qi(c);return this._addSvgIconConfig(t,i,new Xt("",m,e))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,l){return this._addSvgIconSetConfig(t,new Xt(i,null,l))}addSvgIconSetLiteralInNamespace(t,i,l){let e=this._sanitizer.sanitize(it.HTML,i);if(!e)throw zg(i);let c=qi(e);return this._addSvgIconSetConfig(t,new Xt("",c,l))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(it.RESOURCE_URL,t);if(!i)throw qg(t);let l=this._cachedIconsByUrl.get(i);return l?z(Ho(l)):this._loadSvgIconFromConfig(new Xt(t,null)).pipe(Ce(e=>this._cachedIconsByUrl.set(i,e)),Y(e=>Ho(e)))}getNamedSvgIcon(t,i=""){let l=Bg(i,t),e=this._svgIconConfigs.get(l);if(e)return this._getSvgFromConfig(e);if(e=this._getIconConfigFromResolvers(i,t),e)return this._svgIconConfigs.set(l,e),this._getSvgFromConfig(e);let c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(t,c):Sn(Hg(l))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?z(Ho(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Y(i=>Ho(i)))}_getSvgFromIconSetConfigs(t,i){let l=this._extractIconWithNameFromAnySet(t,i);if(l)return z(l);let e=i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Zt(m=>{let b=`Loading icon set URL: ${this._sanitizer.sanitize(it.RESOURCE_URL,c.url)} failed: ${m.message}`;return this._errorHandler.handleError(new Error(b)),z(null)})));return kd(e).pipe(Y(()=>{let c=this._extractIconWithNameFromAnySet(t,i);if(!c)throw Hg(t);return c}))}_extractIconWithNameFromAnySet(t,i){for(let l=i.length-1;l>=0;l--){let e=i[l];if(e.svgText&&e.svgText.toString().indexOf(t)>-1){let c=this._svgElementFromConfig(e),m=this._extractSvgIconFromSet(c,t,e.options);if(m)return m}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ce(i=>t.svgText=i),Y(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?z(null):this._fetchIcon(t).pipe(Ce(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,l){let e=t.querySelector(`[id="${i}"]`);if(!e)return null;let c=e.cloneNode(!0);if(c.removeAttribute("id"),c.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(c,l);if(c.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(c),l);let m=this._svgElementFromString(qi("<svg></svg>"));return m.appendChild(c),this._setSvgAttributes(m,l)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let l=i.querySelector("svg");if(!l)throw Error("<svg> tag not found");return l}_toSvgElement(t){let i=this._svgElementFromString(qi("<svg></svg>")),l=t.attributes;for(let e=0;e<l.length;e++){let{name:c,value:m}=l[e];c!=="id"&&i.setAttribute(c,m)}for(let e=0;e<t.childNodes.length;e++)t.childNodes[e].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[e].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:l}=t,e=l?.withCredentials??!1;if(!this._httpClient)throw GC();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let c=this._sanitizer.sanitize(it.RESOURCE_URL,i);if(!c)throw qg(i);let m=this._inProgressUrlFetches.get(c);if(m)return m;let p=this._httpClient.get(c,{responseType:"text",withCredentials:e}).pipe(Y(b=>qi(b)),An(()=>this._inProgressUrlFetches.delete(c)),Ld());return this._inProgressUrlFetches.set(c,p),p}_addSvgIconConfig(t,i,l){return this._svgIconConfigs.set(Bg(t,i),l),this}_addSvgIconSetConfig(t,i){let l=this._iconSetConfigs.get(t);return l?l.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let l=0;l<this._resolvers.length;l++){let e=this._resolvers[l](i,t);if(e)return YC(e)?new Xt(e.url,null,e.options):new Xt(e,null)}}};r.\u0275fac=function(i){return new(i||r)(H(Nf,8),H(Ja),H(de,8),H(xn))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function Ho(s){return s.cloneNode(!0)}function Bg(s,r){return s+":"+r}function YC(s){return!!(s.url&&s.options)}var XC=new re("MAT_ICON_DEFAULT_OPTIONS"),ZC=new re("mat-icon-location",{providedIn:"root",factory:JC});function JC(){let s=j(de),r=s?s.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}var Vg=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],QC=Vg.map(s=>`[${s}]`).join(", "),eE=/^url\(['"]?#(.*?)['"]?\)$/,$g=(()=>{let r=class r{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,l,e,c,m){this._elementRef=t,this._iconRegistry=i,this._location=e,this._errorHandler=c,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Cn.EMPTY,m&&(m.color&&(this.color=this._defaultColor=m.color),m.fontSet&&(this.fontSet=m.fontSet)),l||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let l=t.childNodes[i];(l.nodeType!==1||l.nodeName.toLowerCase()==="svg")&&l.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(l=>l.length>0);this._previousFontSetClass.forEach(l=>t.classList.remove(l)),i.forEach(l=>t.classList.add(l)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((l,e)=>{l.forEach(c=>{e.setAttribute(c.name,`url('${t}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(QC),l=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let e=0;e<i.length;e++)Vg.forEach(c=>{let m=i[e],p=m.getAttribute(c),b=p?p.match(eE):null;if(b){let y=l.get(m);y||(y=[],l.set(m,y)),y.push({name:c,value:b[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,l]=this._splitIconName(t);i&&(this._svgNamespace=i),l&&(this._svgName=l),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(l,i).pipe(vt(1)).subscribe(e=>this._setSvgElement(e),e=>{let c=`Error retrieving icon ${i}:${l}! ${e.message}`;this._errorHandler.handleError(new Error(c))})}}};r.\u0275fac=function(i){return new(i||r)(ee(Be),ee(KC),Ra("aria-hidden"),ee(ZC),ee(xn),ee(XC,8))},r.\u0275cmp=ze({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,l){i&2&&(st("data-mat-icon-type",l._usingFontIcon()?"font":"svg")("data-mat-icon-name",l._svgName||l.fontIcon)("data-mat-icon-namespace",l._svgNamespace||l.fontSet)("fontIcon",l._usingFontIcon()?l.fontIcon:null),nn(l.color?"mat-"+l.color:""),ot("mat-icon-inline",l.inline)("mat-icon-no-color",l.color!=="primary"&&l.color!=="accent"&&l.color!=="warn"))},inputs:{color:"color",inline:[Re.HasDecoratorInputTransform,"inline","inline",xt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Ut,Qe],ngContentSelectors:$C,decls:1,vars:0,template:function(i,l){i&1&&(Rt(),Ye(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let s=r;return s})(),Wg=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=he({type:r}),r.\u0275inj=me({imports:[We,We]});let s=r;return s})();var nE=["remote_video"];function rE(s,r){s&1&&(ge(0,"mat-card-content",10)(1,"div",11),Ke(2,"mat-progress-spinner",12),Ee()()),s&2&&(Se(2),pe("diameter",50))}function iE(s,r){if(s&1){let o=gs();Da(0),ge(1,"button",16),Jn("click",function(){cs(o);let i=Fe(2);return us(i.startCall())}),on(2,"async"),It(3," Zadzwo\u0144 "),ge(4,"mat-icon"),It(5,"phone"),Ee()(),Oa()}if(s&2){let o=Fe(2);Se(),pe("disabled",!an(2,1,o.webrtcSvc.connected))}}function sE(s,r){if(s&1&&yt(0,23),s&2){Fe();let o=Ht(9);pe("ngTemplateOutlet",o)}}function oE(s,r){if(s&1&&yt(0,23),s&2){Fe();let o=Ht(9);pe("ngTemplateOutlet",o)}}function aE(s,r){if(s&1&&yt(0,23),s&2){Fe();let o=Ht(9);pe("ngTemplateOutlet",o)}}function lE(s,r){if(s&1&&yt(0,23),s&2){Fe();let o=Ht(13);pe("ngTemplateOutlet",o)}}function cE(s,r){if(s&1&&yt(0,23),s&2){Fe();let o=Ht(13);pe("ngTemplateOutlet",o)}}function uE(s,r){if(s&1&&yt(0,23),s&2){Fe();let o=Ht(11);pe("ngTemplateOutlet",o)}}function dE(s,r){if(s&1){let o=gs();ge(0,"h4"),It(1,"Connected"),Ee(),ge(2,"button",24),Jn("click",function(){cs(o);let i=Fe(3);return us(i.stopCall())}),It(3," Hang up "),Ee()}}function fE(s,r){s&1&&(ge(0,"h4"),It(1,"Connecting"),Ee(),Ke(2,"mat-progress-spinner",12)),s&2&&(Se(2),pe("diameter",50))}function hE(s,r){if(s&1){let o=gs();ge(0,"h4"),It(1),on(2,"async"),Ee(),ge(3,"button",25),Jn("click",function(){cs(o);let i=Fe(3);return us(i.resetCallStatus())}),It(4," Reset "),Ee()}if(s&2){let o=Fe(3);Se(),rf(an(2,1,o.webrtcSvc.callStatus))}}function mE(s,r){if(s&1&&(Da(0,17),on(1,"async"),jt(2,sE,1,1,"ng-container",18)(3,oE,1,1,"ng-container",18)(4,aE,1,1,"ng-container",18)(5,lE,1,1,"ng-container",18)(6,cE,1,1,"ng-container",18)(7,uE,1,1,"ng-container",19)(8,dE,4,0,"ng-template",null,20,Qn)(10,fE,3,1,"ng-template",null,21,Qn)(12,hE,5,3,"ng-template",null,22,Qn),Oa()),s&2){let o=Fe(2);pe("ngSwitch",an(1,6,o.webrtcSvc.callStatus)),Se(2),pe("ngSwitchCase","Connected"),Se(),pe("ngSwitchCase","Accepted"),Se(),pe("ngSwitchCase","Confirmed"),Se(),pe("ngSwitchCase","Ended"),Se(),pe("ngSwitchCase","Failed")}}function pE(s,r){if(s&1&&(ge(0,"mat-card-content",10)(1,"div",13),jt(2,iE,6,3,"ng-container",14),on(3,"async"),jt(4,mE,14,8,"ng-container",15),on(5,"async"),Ee()()),s&2){let o=Fe();Se(2),pe("ngIf",!an(3,2,o.webrtcSvc.activeCall)),Se(2),pe("ngIf",an(5,4,o.webrtcSvc.activeCall))}}var Gg=(()=>{let r=class r{constructor(t,i,l){this.zone=t,this.route=i,this.webrtcSvc=l,this.subs=new Cn}ngOnInit(){this.subs.add(this.webrtcSvc.remoteStream.subscribe(t=>{this.zone.run(()=>{t&&(this.videoComponent.nativeElement.srcObject=t)})})),this.webrtcSvc.connecting.next(!0),this.subs.add(this.route.queryParams.pipe(Y(t=>t.id),Ur(1e3)).subscribe(t=>{console.log(t),this.webrtcSvc.start(t)}))}ngOnDestroy(){this.subs.unsubscribe()}startCall(){console.log("startCall"),this.webrtcSvc.call("+4822333444")}stopCall(){console.log("stopCall"),this.webrtcSvc.hangup()}resetCallStatus(){}};r.\u0275fac=function(i){return new(i||r)(ee(ae),ee(fn),ee(og))},r.\u0275cmp=ze({type:r,selectors:[["app-root"]],viewQuery:function(i,l){if(i&1&&Br(nE,5),i&2){let e;rn(e=sn())&&(l.videoComponent=e.first)}},decls:14,vars:6,consts:[[1,"shadow-2"],["alt","logo","src","https://www.europ-assistance.pl/sites/all/themes/ea_ebiz/logo.png","height","50",1,"mr-2"],[1,"flex-1","flex","justify-content-center"],["id","remote_video","playsinline","","autoplay","",2,"display","none"],["remote_video",""],[1,"flex","justify-content-center","align-items-center",2,"height","calc(100vh - var(--mat-toolbar-standard-height))"],[1,"customCard"],[1,"justify-content-center"],["alt","logo","mat-card-image","","src","https://www.europ-assistance.pl/sites/all/themes/ea_ebiz/logo.png",1,"m-3"],["class","h-full",4,"ngIf"],[1,"h-full"],[1,"h-full","flex","justify-content-center","align-items-center","p-5",2,"min-height","175px"],["color","primary","mode","indeterminate",3,"diameter"],[1,"h-full","flex","flex-column","justify-content-center","align-items-center","p-5",2,"min-height","175px"],[4,"ngIf"],[3,"ngSwitch",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["onCallTemplate",""],["inProgressTemplate",""],["onDisconnectTemplate",""],[3,"ngTemplateOutlet"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,l){i&1&&(ge(0,"mat-toolbar",0),Ke(1,"img",1),ge(2,"h2",2),It(3,"WebRTC - ClickToCall"),Ee()(),Ke(4,"video",3,4),ge(6,"div",5)(7,"mat-card",6)(8,"mat-card-header",7),Ke(9,"img",8),Ee(),jt(10,rE,3,1,"mat-card-content",9),on(11,"async"),jt(12,pE,6,6,"mat-card-content",9),on(13,"async"),Ee()()),i&2&&(Se(10),pe("ngIf",an(11,2,l.webrtcSvc.connecting)),Se(2),pe("ngIf",!an(13,4,l.webrtcSvc.connecting)))},dependencies:[_f,ws,vf,yf,Tf,Ig,Dg,Og,kg,Ng,Pg,Ug,$g,wf]});let s=r;return s})();var Kg=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=he({type:r,bootstrap:[Gg]}),r.\u0275inj=me({providers:[Vf()],imports:[zf,Nh.forRoot([]),xg,Mg,Fg,jg,Wg]});let s=r;return s})();qf().bootstrapModule(Kg).catch(s=>console.error(s));
